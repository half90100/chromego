(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.worker = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * Runs given LiveStyle commands in worker context
 */
var livestyle = require('emmet-livestyle');
var fileLoader = require('./file-loader');
var eventMixin = require('./event-mixin');

function extend(obj) {
	for (var i = 1, il = arguments.length, src; i < il; i++) {
		if (src = arguments[i]) {
			Object.keys(src).forEach(function(key) {
				obj[key] = src[key];
			});
		}
	}
	return obj;
}

/**
 * Resolver options factory
 * @param  {Object} data Options coming from server
 * @return {Object}
 */
function resolverOptions(data, callback) {
	return extend({loader: fileLoader.request(callback)}, data);
}

function emit(name, data) {
	module.exports.emit(name, data);
}

function CommandContext(payload, callback) {
	this.id = payload.commandId;
	this.name = payload.name;
	this.data = payload.data;
	this.callback = callback;
}

CommandContext.prototype = {
	reply: function(status, data) {
		this.callback({
			commandId: this.id,
			status: status,
			data: data
		});
	},

	success: function(data) {
		this.reply('ok', data);
	},

	error: function(message) {
		if (message instanceof Error) {
			message = message.message + '\n' + message.stack;
		}
		
		this.reply('error', message);
	}
};

function assertPayload(ctx) {
	var data = ctx.data;
	if (!data) {
		return ctx.error('No data');
	}

	if (!data.syntax) {
		data.syntax = 'css';
	}

	if (!livestyle.supports(data.syntax)) {
		return ctx.error('Syntax ' + data.syntax + ' is not supported');
	}

	return true;
}

function diff(ctx, callback) {
	var data = ctx.data;
	// Get previous state. Do it before current source
	// resolving because cached initial state will be replaced with
	// current source
	var prev = null;
	if ('previous' in data) {
		prev = data.previous;
	} else {
		var cachedItem = livestyle.cache.get(data.uri);
		prev = cachedItem ? cachedItem.source : null;
	}

	var options = resolverOptions(data, callback);

	// Resolve current state.
	// Do so before checking previous state to make sure current state
	// will be in cache even if we can’t actually diff sources
	livestyle.resolve(data.content || '', options, function(err, curTree) {
		if (err) {
			return ctx.error('Error parsing current state of ' + data.uri + ':\n' + err);
		}

		// resolve previous state
		if (!prev && prev !== '') {
			// no previous state
			return ctx.error('Can’t diff: no previous state for ' + data.uri);
		}

		livestyle.resolve(prev, options, function(err, prevTree) {
			if (err) {
				return ctx.error('Error parsing previous state of ' + data.uri + ':\n' + err);
			}

			// make sure current source is in cache
			livestyle.cache.add(data.uri, curTree, data.hash);

			// we have two sources, let’s diff’em
			try {
				var patches = livestyle.diff(prevTree, curTree);
				emit('diff', {
					uri: data.uri,
					cur: curTree,
					prev: prevTree,
					patches: patches
				});

				ctx.success(patches.map(function(patch) {
					return patch.toJSON();
				}));
			} catch (err) {
				ctx.error(err);
			}
		});
	});
}

function patch(ctx, callback) {
	var data = ctx.data;
	var options = resolverOptions(data, callback);
	livestyle.resolve(data.content || '', options, function(err, tree) {
		if (err) {
			return ctx.error('Unable to apply patch on ' + data.uri + ':\n' + err);
		}

		try {
			livestyle.condensePatches(data.patches).forEach(function(patch) {
				livestyle.patch(tree, patch, data);
			});
			
			emit('patch', {
				uri: data.uri,
				tree: tree
			});

			ctx.success({
				content: tree.ref.source.valueOf(),
				ranges: tree.ref.source.changeset,
				hash: data.hash
			});
		} catch (err) {
			ctx.error(err);
		}
	});
}

function initialContent(ctx, callback) {
	var data = ctx.data;
	var options = resolverOptions(data, callback);
	livestyle.resolve(data.content || '', options, function(err, tree) {
		if (err) {
			return ctx.error('Unable to parse initial content of ' + data.uri + ':\n' + err);
		}

		livestyle.cache.add(data.uri, tree, data.hash);
		emit('initial-content', {
			uri: data.uri,
			tree: tree
		});
		ctx.success();
	});
}

function wrapCtx(fn) {
	return function(payload, callback) {
		var ctx = new CommandContext(payload, callback);
		if (assertPayload(ctx)) {
			fn(ctx, callback);
		}
	};
}

module.exports = function(payload, callback) {
	switch (payload.name) {
		case 'calculate-diff':
			return module.exports.diff(payload, callback);
		case 'apply-patch':
			return module.exports.patch(payload, callback);
		case 'initial-content':
			return module.exports.initialContent(payload, callback);
		case 'files':
			return module.exports.files(payload, callback);
	}
};

module.exports.livestyle = livestyle;
module.exports.diff = wrapCtx(diff);
module.exports.patch = wrapCtx(patch);
module.exports.initialContent = wrapCtx(initialContent);
module.exports.files = function(payload) {
	var ctx = new CommandContext(payload);
	return fileLoader.respond(ctx.data);
};
module.exports.syntaxes = function() {
	return livestyle.syntaxes();
};

extend(module.exports, eventMixin);
},{"./event-mixin":2,"./file-loader":3,"emmet-livestyle":5}],2:[function(require,module,exports){
/**
 * A simple event dispatcher mixin, borrowed from Backbone.Event.
 * Users should extend their objects/modules with this mixin.
 * @example
 * define(['lodash', 'eventMixin'], function(_, eventMixin) {
 * 	return _.extend({
 * 		...
 * 	}, eventMixin);
 * })
 */

// Regular expression used to split event strings
var eventSplitter = /\s+/;

// Create a local reference to slice/splice.
var slice = Array.prototype.slice;

module.exports = {
	/**
	 * Bind one or more space separated events, `events`, to a `callback`
	 * function. Passing `"all"` will bind the callback to all events fired.
	 * @param {String} events
	 * @param {Function} callback
	 * @param {Object} context
	 * @memberOf eventDispatcher
	 */
	on: function(events, callback, context) {
		var calls, event, node, tail, list;
		if (!callback)
			return this;
		
		events = events.split(eventSplitter);
		calls = this._callbacks || (this._callbacks = {});

		// Create an immutable callback list, allowing traversal during
		// modification.  The tail is an empty object that will always be used
		// as the next node.
		while (event = events.shift()) {
			list = calls[event];
			node = list ? list.tail : {};
			node.next = tail = {};
			node.context = context;
			node.callback = callback;
			calls[event] = {
				tail : tail,
				next : list ? list.next : node
			};
		}

		return this;
	},

	/**
	 * Remove one or many callbacks. If `context` is null, removes all
	 * callbacks with that function. If `callback` is null, removes all
	 * callbacks for the event. If `events` is null, removes all bound
	 * callbacks for all events.
	 * @param {String} events
	 * @param {Function} callback
	 * @param {Object} context
	 */
	off: function(events, callback, context) {
		var event, calls, node, tail, cb, ctx;

		// No events, or removing *all* events.
		if (!(calls = this._callbacks))
			return;
		if (!(events || callback || context)) {
			delete this._callbacks;
			return this;
		}

		// Loop through the listed events and contexts, splicing them out of the
		// linked list of callbacks if appropriate.
		events = events ? events.split(eventSplitter) : _.keys(calls);
		while (event = events.shift()) {
			node = calls[event];
			delete calls[event];
			if (!node || !(callback || context))
				continue;
			// Create a new list, omitting the indicated callbacks.
			tail = node.tail;
			while ((node = node.next) !== tail) {
				cb = node.callback;
				ctx = node.context;
				if ((callback && cb !== callback) || (context && ctx !== context)) {
					this.on(event, cb, ctx);
				}
			}
		}

		return this;
	},
	
	/**
	 * Trigger one or many events, firing all bound callbacks. Callbacks are
	 * passed the same arguments as `emit` is, apart from the event name
	 * (unless you're listening on `"all"`, which will cause your callback
	 * to receive the true name of the event as the first argument).
	 * @param {String} events
	 */
	emit: function(events) {
		var event, node, calls, tail, args, all, rest;
		if (!(calls = this._callbacks)) {
			return this;
		}
		all = calls.all;
		events = events.split(eventSplitter);
		rest = slice.call(arguments, 1);

		// For each event, walk through the linked list of callbacks twice,
		// first to trigger the event, then to trigger any `"all"` callbacks.
		while (event = events.shift()) {
			if (node = calls[event]) {
				tail = node.tail;
				while ((node = node.next) !== tail) {
					node.callback.apply(node.context || this, rest);
				}
			}
			if (node = all) {
				tail = node.tail;
				args = [ event ].concat(rest);
				while ((node = node.next) !== tail) {
					node.callback.apply(node.context || this, args);
				}
			}
		}

		return this;
	}
};
},{}],3:[function(require,module,exports){
/**
 * A file loader module: requests given file list and watches
 * for “hanging” callbacks in case if no one replies on request
 */
var timerId = null;
var waitTimeout = 3000; // milliseconds
var requests = {};

function uuid() {
	return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
		var r = (Math.random() * 0x10) | 0;
		var v = c === 'x' ? r : (r & 0x3 | 0x8);
		return v.toString(16);
	});
}

function watch() {
	if (!timerId) {
		timerId = setTimeout(resolveHungRequests, waitTimeout);
	}
}

function resolveHungRequests() {
	var now = Date.now();
	Object.keys(requests).forEach(function(id) {
		var req = requests[id];
		if (req.wait < now) {
			req.callback([]);
			delete requests[id];
		}
	});

	timerId = null;
	if (Object.keys(requests).length) {
		watch();
	}
}

module.exports = {
	/**
	 * A dependency loader for LiveStyle engine: uses external
	 * web socket connection to retrieve requested files from
	 * file system 
	 * @param  {Array} file List of files to load
	 * @param  {Function} callback
	 */
	request: function(sendCommand) {
		return function(files, callback) {
			var requestId = uuid();
			requests[requestId] = {
				wait: Date.now() + waitTimeout,
				callback: callback
			};
			// waiting for `files` reply from server 
			// (see `onmessage()` handler)
			sendCommand({
				name: 'request-files',
				data: {
					token: requestId,
					files: files
				}
			});
			watch();
		};
	},

	/**
	 * Handle `file` message from server
	 * @param  {Object} data Message payload
	 */
	respond: function(data) {
		if (data.token && requests[data.token]) {
			var callback = requests[data.token].callback;
			callback(data.files);
			delete requests[data.token];
		}
	},

	/**
	 * Get or set timeout to kill hung file requests
	 * @param  {Number} value New timeout value, milliseconds
	 * @return {Number}       Current timeout value, milliseconds
	 */
	timeout: function(value) {
		if (typeof value !== 'undefined') {
			waitTimeout = +value;
		}
		return waitTimeout;
	}
};
},{}],4:[function(require,module,exports){
/**
 * A worker for diff’ing and patching sources.
 * Designed to work in a separate thread as a Web Worker
 */
var commands = require('./commands');

// XXX hook on default worker interface
onmessage = handleMessage;
var replyFn = typeof postMessage === 'function' ? postMessage : function() {};

function sendMessage(message) {
	try {
		replyFn(message);
	} catch (e) {
		console.error(e);
		console.error(message);
	}
}

function handleMessage(evt) {
	commands((typeof evt.data === 'string') ? JSON.parse(evt.data) : evt.data, sendMessage);
}

sendMessage({
	name: 'init',
	data: 'Created LiveStyle worker with ' + commands.syntaxes().join(', ').toUpperCase() + ' syntaxes'
});

// expose interface for mocks and unit testing
module.exports = function(fn) {
	if (fn) {
		replyFn = fn;
	}
};

module.exports.postMessage = function(data) {
	handleMessage({data: data});
};
},{"./commands":1}],5:[function(require,module,exports){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.livestyle=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";if("object"==typeof t&&"function"!=typeof r)var r=function(r){t.exports=r(e,n,t)};r(function(e,t,n){var r=e("./lib/parser"),i=e("./lib/evaluator"),o=e("./lib/patcher"),s=e("./lib/split"),a=e("./lib/context"),u=/\!important\s*$/,c=function f(e,t){var n="";u.test(e)&&(e=e.replace(u,""),n=" !important");var r=f.eval(e,t).valueOf();return n&&(r+=n),r};return c.eval=function(e,t){return t=a.create(t),"string"==typeof e?t._expression=e:Array.isArray(e)&&e.expression&&(t._expression=e.expression),i(e,t)},c.tokenize=function(e){return r.parse(e)},c.patch=function(e,t,n,r){return o.patch(e,a.create(t),n,r)},c.Context=a,c.split=s,c})},{"./lib/context":4,"./lib/evaluator":5,"./lib/parser":7,"./lib/patcher":8,"./lib/split":9}],2:[function(e,t,n){"use strict";t.exports={get:function(e){return this.colors[e.toLowerCase()]},colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}},{}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return Math.min(Math.max(e,n||0),t)}function o(e){return e=i(Math.round(e),255),(16>e?"0":"")+e.toString(16)}function s(e){return e=e.replace(/^#/,""),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e}function a(e){return e=i(e,p),new v((16711680&e)>>16,(65280&e)>>8,255&e)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("./color-keywords"),f=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\.\d]+)\s*)?\)/,l=/^#([a-f0-9]+)/i,p=16777215;t.exports=function(e,t){if(e instanceof v)return e;var n,r;return"string"==typeof e?(e=c.get(e)||e,"transparent"===e?n=new v(0,0,0,0):(r=e.match(f))?n=new v(r[1],r[2],r[3],r[4]):(r=e.match(l))?n=a(parseInt(s(r[1]),16)):t||(n=new v(0,0,0))):"number"==typeof e?n=a(e):Array.isArray(e)&&(n=new v(e[0],e[1],e[2],e[3])),n};var h=t.exports.blendMode={multiply:function(e,t){return e*t},screen:function(e,t){return e+t-e*t},overlay:function(e,t){return e*=2,1>=e?this.multiply(e,t):this.screen(e-1,t)},softlight:function(e,t){var n=1,r=e;return t>.5&&(r=1,n=e>.25?Math.sqrt(e):((16*e-12)*e+4)*e),e-(1-2*t)*r*(n-e)},hardlight:function(e,t){return this.overlay(t,e)},difference:function(e,t){return Math.abs(e-t)},exclusion:function(e,t){return e+t-2*e*t},average:function(e,t){return(e+t)/2},negation:function(e,t){return 1-Math.abs(e+t-1)}},v=function(){function e(t,n,i,o){r(this,e),this.r=+t,this.g=+n,this.b=+i,this.a="undefined"==typeof o?1:+o}return u(e,[{key:"blend",value:function(t,n){if(!h[n])throw new Error("No such color blend mode: "+n);var r,i,o,s=this,a=s.a,u=t.a,c=new e;return c.a=u+a*(1-u),["r","g","b"].forEach(function(e){r=s[e]/255,i=t[e]/255,o=h[n](r,i),c.a&&(o=(u*i+a*(r-u*(r+i-o)))/c.a),c[e]=255*o}),c}},{key:"toHex",value:function(){return"#"+this.toArray().map(o).join("")}},{key:"toArray",value:function(e){var t=[this.r,this.g,this.b];return e&&t.push(this.a),t}},{key:"toDecimal",value:function(){return(this.r<<16)+(this.g<<8)+this.b}},{key:"toCSS",value:function(){if(!(this.r||this.g||this.b||this.a))return"transparent";if(this.a<1){var e=this.toArray().map(function(e){return i(Math.round(e),255)});return e.push(i(this.a,1)),"rgba("+e.join(", ")+")"}return this.toHex()}},{key:"toARGB",value:function(){return"#"+o(255*this.a)+this.toHex().substr(1)}},{key:"toHSL",value:function(){var e,t,n=this.r/255,r=this.g/255,i=this.b/255,o=Math.max(n,r,i),s=Math.min(n,r,i),a=(o+s)/2,u=o-s;if(o===s)e=t=0;else{switch(t=a>.5?u/(2-o-s):u/(o+s),o){case n:e=(r-i)/u+(i>r?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:a,a:this.a}}},{key:"toHSV",value:function(){var e,t,n=this.r/255,r=this.g/255,i=this.b/255,o=Math.max(n,r,i),s=Math.min(n,r,i),a=o,u=o-s;if(t=0===o?0:u/o,o===s)e=0;else{switch(o){case n:e=(r-i)/u+(i>r?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,v:a,a:this.a}}},{key:"luma",value:function(){return.2126*this.r/255+.7152*this.g/255+.0722*this.b/255}},{key:"valueOf",value:function(){return this.toCSS()}}]),e}()},{"./color-keywords":2}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./functions");t.exports=function(){function e(t,n){r(this,e),this._scope=t||{},this._expression="",this.logger=n}return i(e,[{key:"variable",value:function(e){return e in this._scope&&"function"!=typeof this._scope[e]?this._scope[e]:void(this.logger&&this.logger('Missing variable "'+e+'"',{type:"variable",name:e}))}},{key:"fn",value:function t(e){var t=this._scope[e];return"function"==typeof t?t:e in o?o[e]:void(this.logger&&/^\w+/.test(e)&&this.logger('Missing function "'+e+'"',{type:"function",name:e}))}}],[{key:"create",value:function(t,n){return t instanceof e?new e(t._scope,t.logger):new e(t,n)}}]),e}()},{"./functions":6}],5:[function(e,t,n){"use strict";function r(e,t,n){e=c(e),t=c(t);var r=["r","g","b"];return e.a!==e.b&&r.push("a"),g.color(r.map(function(r){return n(e.value[r],t.value[r],e,t)}))}function i(e,t){return function(n,i){if(n=n||g.number(0),i=i||g.number(0),"/"===t){var s=o(n,i,this);if(null!==s)return s}if(n.is(g.color)||i.is(g.color))return r(n,i,e);var a=n.clone();if(a.value=e(n.toPrimitive(),i.toPrimitive(),n,i),isNaN(a.value))throw new Error("Expression evaluated to NaN");return"string"!=typeof a.value||a.is(g.string)?(a.unit=n.unit||i.unit,a):g.string(a.value)}}function o(e,t,n){var r=n.variable("%magic-div"),i=!1,o=e.range[1]===t.range[0]-1;return 1===r?i=o:2===r&&(i=o&&s(e,n)&&s(t,n)),i?g.string(e.valueOf()+"/"+t.valueOf()):null}function s(e,t){var n=t._expression||"",r=e.range||[];return r.length&&n.slice(r[0],r[1])==e.valueOf()}function a(e){return function(t,n){return g.bool(e(t.toPrimitive(),n.toPrimitive(),t,n))}}function u(e,t){var n=function(e){return e.is(g.list)?e.value:e},r=g.list([].concat(n(e),n(t)));return r.value.glue=" ",r}function c(e){return e.is(g.color)?e:e.is(g.number)?g.color([e.value,e.value,e.value]):g.color(e.value.valueOf())}function f(e,t,n){var r=e.value;return t&&t.fn(r)||n[r]}function l(e,t,n){if(null==e||e instanceof g.Token)return e;if("object"==typeof e&&"unit"in e)return g.restore(e);if("number"==typeof e)return g.number(e);if("boolean"==typeof e)return g.bool(e);if(Array.isArray(e))return g.list(e);try{return w(e,t,n)}catch(r){return g.string(e)}}function p(e){return e.filter(function(e){return e!==x.nullary})}function h(e,t,n){return e.map(function(e){return e.is(g.variable)?d(e,t,n.slice(0))||e:e})}function v(e,t,n,r){return t=t.is(g.list)?" "===t.value.glue?[g.string(t.valueOf())]:t.value:[t],t=h(p(t),n,r),l(e.apply(n,t),n,r)}function d(e,t,n){if(~n.indexOf(e.value))throw new Error("Recursive variable reference: "+e.value);n.push(e.value);var r=l(t.variable(e.value),t,n);return r&&(r.range=e.range),r}function m(e,t){var n=[t];return g.string(e.value+"("+p(n).map(function(e){return e.valueOf()}).join(", ")+")")}var g=e("./token"),x=e("./parser"),b=a(function(e,t,n,r){return!n.is(g.number)||!r.is(g.number)||n.unit&&r.unit?n.is(g.string)&&r.is(g.string)&&n.quote&&r.quote?e===t:n.valueOf()===r.valueOf():e===t}),y={"-":function(e){return e=e.clone(),e.value*=-1,e}},k={"+":i(function(e,t){return e+t}),"-":i(function(e,t){return e-t}),"*":i(function(e,t){return e*t}),"/":i(function(e,t){return e/t},"/"),"=":b,"==":b,"<":a(function(e,t){return t>e}),">":a(function(e,t){return e>t}),"<=":a(function(e,t){return t>=e}),"=<":a(function(e,t){return t>=e}),">=":a(function(e,t){return e>=t}),"=>":a(function(e,t){return e>=t}),"!=":a(function(e,t){return e!=t}),",":function(e,t){var n=[];return e&&(e.is(g.list)&&" "!==e.value.glue?n=n.concat(e.value):n.push(e)),t&&(t.is(g.list)&&" "!==t.value.glue?n=n.concat(t.value):n.push(t)),g.list(n)}},w=t.exports=function(e,t,n){"string"==typeof e&&(e=x.parse(e)),n=n||[];for(var r,i,o,s,a,c=[],l=0,p=e.length;p>l;l++)if(s=e[l],s.is(g.op2))i=c.pop(),r=c.pop(),o=f(s,t,k),c.push(o.call(t,r,i));else if(s.is(g.variable))a=d(s,t,n.slice(0)),void 0===a&&(a=s),c.push(a);else if(s.is(g.op1))r=c.pop(),o=y[s.value],c.push(o(r));else if(s.is(g.fn)){if(r=c.pop(),i=c.pop(),o=t.fn(i.value),o&&(a=v(o,r,t,n.slice(0)),null!==a)){c.push(a);continue}c.push(m(i,r))}else s.is(g.space)?(i=c.pop(),r=c.pop(),c.push(u(r,i))):c.push(s);if(c.length>1)throw new Error("Invalid Expression (parity)");return c[0]}},{"./parser":7,"./token":11}],6:[function(e,t,n){"use strict";function r(e){return Math.min(1,Math.max(0,e))}function i(e,t){1==arguments.length&&"object"==typeof e&&"type"in e&&(t=e.unit,e=e.value);var n=v.number(e);return n.unit=t||"",n}function o(e){var t=a(e);return t?t[e]:void 0}function s(e){for(var t in x)if(x.hasOwnProperty(t)&&e in x[t])return t}function a(e){return x[s(e)]}function u(e,t,n){if(!t){var r=s(n);t=r?g[r]:""}return t&&n?{value:e*o(t)/o(n),unit:n}:{value:e,unit:t}}function c(e,t,n){var r;return null===t?t=n.unit:""!==t&&"rad"!==t||("rad"!==n.unit&&(n.value=u(n.value,n.unit,"rad").value,n.unit="rad"),r=u(e(parseFloat(n.value)),n.unit,t||"rad"),r.unit=t),r||(r={value:e(parseFloat(n.value)),unit:t}),i(r.value,r.unit)}function f(e){return t.exports.hsla(e.h,e.s,e.l,e.a)}function l(e,t){return"%"==e.unit?parseFloat(e.value*t/100):p(e)}function p(e){return"number"==typeof e?e:parseFloat("%"==e.unit?e.value/100:e.value)}function h(e){if(e.is(v.color))return e.value;if(e.is(v.variable)){var t=d(e.value,!0);if(t)return t}throw new Error("Invalid color token: "+e.value+" ("+e.type+")")}var v=e("./token"),d=e("./color"),m=e("./split"),g={length:"m",duration:"s",angle:"rad"},x={length:{m:1,cm:.01,mm:.001,"in":.0254,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}};t.exports={rgb:function(e,n,r){return t.exports.rgba(e,n,r,1)},rgba:function k(e,t,n,r){if(arguments.length<3){var i=h(e);return i.a=p(null==t?1:t),v.color(i)}var k=[e,t,n].map(function(e){return l(e,255)});return k.push(p(null==r?1:r)),v.color(k)},hsl:function(e,n,r){return t.exports.hsla(e,n,r,1)},hsla:function(e,n,i,o){e=p(e)%360/360,n=r(p(n)),i=r(p(i)),o=r(p(o));var s=.5>=i?i*(n+1):i+n-i*n,a=2*i-s,u=function(e){return e=0>e?e+1:e>1?e-1:e,1>6*e?a+(s-a)*e*6:1>2*e?s:2>3*e?a+(s-a)*(2/3-e)*6:a};return t.exports.rgba(255*u(e+1/3),255*u(e),255*u(e-1/3),o)},hsv:function(e,n,r){return t.exports.hsva(e,n,r,1)},hsva:function(e,n,r,i){e=p(e)%360/360*360,n=p(n),r=p(r);var o,s;o=Math.floor(e/60%6),s=e/60-o;var a=[r,r*(1-n),r*(1-s*n),r*(1-(1-s)*n)],u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return t.exports.rgba(255*a[u[o][0]],255*a[u[o][1]],255*a[u[o][2]],i)},hue:function(e){var t=h(e).toHSL();return i(Math.round(t.h))},saturation:function(e){var t=h(e).toHSL();return i(Math.round(100*t.s),"%")},lightness:function(e){var t=h(e).toHSL();return i(Math.round(100*t.l),"%")},hsvhue:function(e){var t=h(e).toHSV();return i(Math.round(t.h))},hsvsaturation:function(e){var t=h(e).toHSV();return i(Math.round(100*t.s),"%")},hsvvalue:function(e){var t=h(e).toHSV();return i(Math.round(100*t.v),"%")},red:function(e){return i(Math.round(h(e).r))},green:function(e){return i(Math.round(h(e).g))},blue:function(e){return i(Math.round(h(e).b))},alpha:function(e){return i(h(e).a)},luma:function w(e){e=h(e);var w=e.luma();return i(Math.round(w*e.a*100),"%")},saturate:function(e,t){if(e.is(v.number))return null;var n=h(e).toHSL();return n.s=r(n.s+p(t)),f(n)},desaturate:function(e,t){var n=h(e).toHSL();return n.s=r(n.s-p(t)),f(n)},lighten:function(e,t){var n=h(e).toHSL();return n.l=r(n.l+p(t)),f(n)},darken:function(e,t){var n=h(e).toHSL();return n.l=r(n.l-p(t)),f(n)},fadein:function(e,t){var n=h(e).toHSL();return n.a=r(n.a+p(t)),f(n)},fadeout:function(e,t){var n=h(e).toHSL();return n.a=r(n.a-p(t)),f(n)},fade:function(e,t){var n=h(e).toHSL();return n.a=r(p(t)),f(n)},spin:function(e,t){var n=h(e).toHSL(),r=(n.h+p(t))%360;return n.h=0>r?360+r:r,f(n)},mix:function(e,n,r){r=r||v.number(.5),e=h(e),n=h(n);var i=p(r)/("%"!==r.unit?100:1),o=2*i-1,s=e.a-n.a,a=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,u=1-a,c=[e.r*a+n.r*u,e.g*a+n.g*u,e.b*a+n.b*u],f=e.a*i+n.a*(1-i);return t.exports.rgba(c[0],c[1],c[2],f)},greyscale:function(e){return t.exports.desaturate(e,v.number(1))},contrast:function(e,n,r,i){if(e.is(v.number))return null;if(e=h(e),r=h(r||v.color(255,255,255,1)),n=h(n||v.color(0,0,0,1)),n.luma()>r.luma()){var o=r;r=n,n=o}return i="undefined"==typeof i?.43:p(i),e.luma()<i?t.exports.rgba(r.r,r.g,r.b,r.a):t.exports.rgba(n.r,n.g,n.b,n.a)},e:function(e){return v.string(e.value)},escape:function(e){return encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29")},"%":function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=e.value,i=0;i<n.length;i++)t=n[i].valueOf(),r=r.replace(/%[sda]/i,function(e){return e.match(/[A-Z]$/)?encodeURIComponent(t):t});var o=v.string(r.replace(/%%/g,"%"));return o.quote=e.quote,o},unit:function(e,t){return i(e.value,t?t.value:"")},convert:function(e,t){var n=u(e.value,e.unit,t.value);return i(n.value,n.unit)},round:function(e,t){var n="undefined"==typeof t?0:t.value;return c(function(e){return e.toFixed(n)},null,e)},pi:function(){return Math.PI},mod:function(e,t){return i(e.value%t.value,e.unit||t.unit)},pow:function(e,t){return i(Math.pow(e.value,t.value),e.unit)},_minmax:function(e,t){switch(t=Array.from(t),t.length){case 0:throw new Error("one or more arguments required");case 1:return i(t[0])}var n={},r=t.map(function(e){var t=e;if(e.is(v.string))n.string=1;else if(e.is(v.number))n.number=1;else{var r=s(e.unit);r?(n[r]=1,t=u(e.value,e.unit,g[r]).value):(n[e.type]=1,t=e.value)}return{value:t,ref:e}});return Object.keys(n).length>1?null:(r.sort(function(t,n){return e?t.value-n.value:n.value-t.value}),i(r[0].ref))},min:function(){return t.exports._minmax(!0,arguments)},max:function(){return t.exports._minmax(!1,arguments)},argb:function(e){return e.value.toARGB()},percentage:function(e){return i(100*e.value,"%")},color:function(e){if(e.is(v.color))return e;if(e.is(v.string)){var t=d(e.value,!0);if(t)return v.color(t);throw new Error("argument must be a color keyword or 3/6 digit hex e.g. #FFF")}throw new Error("argument must be a string")},iscolor:function(e){return e.is(v.color)||!!d(e.value,!0)},isnumber:function(e){return e&&e.is(v.number)},isstring:function(e){return e&&e.is(v.string)},iskeyword:function(e){return t.exports.isstring(e)},isurl:function(e){return t.exports.isstring(e)},ispixel:function(e){return t.exports.isunit(e,"px")},ispercentage:function(e){return t.exports.isunit(e,"%")},isem:function(e){return t.exports.isunit(e,"em")},isunit:function(e,t){return e.unit==t.value||e.unit==t},tint:function(e,n){return t.exports.mix(v.color("#fff"),e,n)},shade:function(e,n){return t.exports.mix(v.color("#000"),e,n)},extract:function(){var e,t=Array.from(arguments),n=t.pop().value-1;return e=1==t.length&&t[0].is(v.string)?m(t[0].value):t.map(function(e){return e.value}),Array.isArray(e)?e[n]:Array(e)[n]},length:function(e){var t=arguments;return 1==t.length&&e.is(v.string)&&(t=m(e.value)),i(t.length)},"data-uri":function(e,t){throw new Error("Not implemented")},unquote:function(e){var t=v.string(e.value);return t.quote="",t},quote:function(e){var t=v.string(e.value);return t.quote='"',t},"str-length":function(e){return v.number(e.value.length)},"str-insert":function(e,t,n){var r=e.clone();return e=e.toPrimitive(),t=t.toPrimitive(),n=Math.min(n.toPrimitive(),e.length),r.value=e.substring(0,n)+t+e.substring(n),r},"str-index":function(e,t){return v.number(e.toPrimitive().indexOf(t.toPrimitive()))},"str-slice":function(e,t,n){var r=e.clone();return e=e.toPrimitive(),r.value=e.substring(t.toPrimitive(),n?n.toPrimitive():e.length),r},"to-upper-case":function(e){var t=e.clone();return t.value=t.value.toUpperCase(),t},"to-lower-case":function(e){var t=e.clone();return t.value=t.value.toLowerCase(),t},nth:function(e,t){var n=Array.from(arguments);return t=n.pop().toPrimitive(),e&&(e=e.is(v.list)?e.value:n),e[t>0?t-1:e.length+t]}};var b={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var y in b)t.exports[y]=c.bind(null,Math[y],b[y]);Object.keys(d.blendMode).forEach(function(e){t.exports[e]=function(t,n){return v.color(t.blend(n,e))}})},{"./color":3,"./split":9,"./token":11}],7:[function(e,t,n){"use strict";function r(e,t){var n=t.operators;for(e.priority+=t.priority;n.length>0&&e.priority<=n[n.length-1].priority;)t.tokens.push(n.pop());n.push(e)}function i(e,t){throw t&&(e+=" at column "+(t.start+1)+" in expression "+t.string),new Error(e)}function o(e){return s(e)||a(e)}function s(e){return"+"===e.value}function a(e){return"-"===e.value}function u(e){var t=e.next();switch(t){case"+":return _.op2(e,1);case"-":if(!/[a-z]/i.test(e.peek()))return _.op2(e,1);break;case"|":if("|"===e.peek())return e.next(),_.op2(e,1);break;case"*":return _.op2(e,2);case"/":return _.op2(e,3);case"=":return/[=<>]/.test(e.peek())&&e.next(),_.op2(e);case"!":case"<":case">":return"="===e.peek()&&e.next(),_.op2(e)}return e.backUp(1),!1}function c(e){if("-"!==e.peek())return!1;var t=e.string.charAt(e.pos+1);return!/^[a-z_]/i.test(t)}function f(e){if("/"===e.next()&&"*"===e.peek()){if(e.next(),e.skipTo("*/"))return e.pos+=2,!0;e.backUp(1),i("Unterminated comment",e)}return e.backUp(1),!1}function l(e){return e.match(P,!0)?_.number(e):!1}function p(e){var t=e.next();if("~"===t&&T.test(e.peek())){if(e.skipQuoted(!0))return _.string(e.current().slice(2,-1));i("Unterminated string escaper",e)}if(T.test(t)){if(e.skipString(t))return _.string(e);i("Unterminated string",e)}return e.backUp(1),!1}function h(e){if("#"!==e.peek())return!1;var t=e.match(U,!0);return!t||4!==t[0].length&&7!==t[0].length?!1:_.color(e)}function v(e,t){return"("===e.peek()?(e.next(),t.priority+=10,_(e,-3)):!1}function d(e,t){return")"===e.peek()?(e.next(),t.priority-=10,!0):!1}function m(e){return","===e.next()?_.op2(e,-2):(e.backUp(1),!1)}function g(e){for(var t,n=e.string.charAt(e.pos-1),r=!(~S.indexOf(n)||"("===n),i=!1;!e.eol();){if(!f(e)&&!e.eatSpace()){if(n=e.peek(),"-"===n&&(t=e.string.charAt(e.pos+1),P.test(t)||A.test(t)))break;(~S.indexOf(n)||"("===n||")"===n)&&(i=!1);break}i=!0}return e.start=e.pos,r&&i&&!e.eol()?_.space(e,-1):void 0}function x(e,t){for(var n,r=t.join(""),i="";!e.eol()&&(n=e.peek(),~r.indexOf(n))&&("-"!==n||c(e));)i+=e.next();return i&&~t.indexOf(i)?_(e,5):(e.backUp(i.length),!1)}function b(e){return x(e,E)}function y(e){return x(e,O)}function k(e){return e.match(C,!0)?_.variable(e,4):!1}var w=e("./string-stream"),_=e("./token"),E=["-"],O=["+","-","*","/",",","=","==","<","<=",">",">=","!="],S=[].concat(E,O).join(""),j=_.number(0),A=/^[@$]/,C=/^%[\w\-_]*|^[@\$%]?[\w\-_][\w\-_.]*/,P=/^(-?[\d\.]+)([a-z%]+)?/,U=/^#[a-f0-9]+/i,T=/['"]/,N=1,M=2,q=4,I=8,$=16,F=32,D=64,H=128,z=256;t.exports={nullary:j,parse:function(e){if(!e)return[];e=e.trim();var t,n=w(e),s=0,c=N|I|q|D,x={stream:n,tokens:[],operators:[],priority:0};for(f(n);!n.eol();)n.start=n.pos,(t=g(n))?(r(t,x),s+=2,c=N|I|q|D):(t=h(n))?(0===(c&N)&&i("Unexpected color",n),x.tokens.push(t),c=M|$|F):(t=l(n))?(0===(c&N)&&(t.value<0?(s+=2,r(_.op2("+",1),x)):i("Unexpected number",n)),x.tokens.push(t),c=M|$|F):(t=u(n))?o(t)&&c&D?(a(t)&&(s++,r(_.op1(t,2),x)),c=N|I|q|D):f(n)||(0===(c&M)&&i("Unexpected operator",n),s+=2,r(t,x),c=N|I|q|D):(t=p(n))?(0===(c&N)&&i("Unexpected string",n),x.tokens.push(t),c=M|$|F):(t=v(n,x))?(0===(c&I)&&i('Unexpected "("',n),c&H&&(s+=2,r(_.fn(t),x)),c=N|I|q|D|z):d(n,x)?(c&z?x.tokens.push(j):0===(c&$)&&i('Unexpected ")"',x),c=M|$|F|I|H):(t=m(n))?(0===(c&F)&&i('Unexpected ","',n),r(t,x),s+=2,c=N|I|q|D):(t=y(n))?(0===(c&q)&&i("Unexpected function",n),r(t,x),s+=2,c=I):(t=b(n))?(0===(c&q)&&i("Unexpected function",n),r(t,x),s++,c=I):(t=k(n))?(0===(c&N)&&i("Unexpected variable",n),x.tokens.push(t),c=M|$|F|I|H):i("Unknown character",n);return(x.priority<0||x.priority>=10)&&i('Unmatched "()"',n),x.tokens=x.tokens.concat(x.operators.reverse()),s+1!==x.tokens.length&&i("Parity",n),x.tokens.expression=e,x.tokens}}},{"./string-stream":10,"./token":11}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e&&"__bad"in e}function o(e){return e===b||i(e)?!0:e.is(d.variable)?!a(e):!1}function s(e){return i(e)&&(e.__bad=!0),e}function a(e){return e?m(e.valueOf(),!0):null}function u(e){e=e.filter(function(e){return e!==b&&!e.__bad});for(var t,n;e.length;){if(t=e.pop(),t.value.is(d.number)||t.value.is(d.color))return t;if(t.value.is(d.variable)&&(n=a(t.value)))return n.range=t.value.range,t.value=n,t}}function c(e,t,n,r){return null!==e&&"undefined"!=typeof e?(n instanceof d.Token&&(r=n.range[1],n=n.range[0]),e.substring(0,n)+t+e.substring(r)):void 0}function f(e){return!e.toPrimitive()}function l(e,t,n){e=e.valueOf(),t=t.valueOf();var r="+",i=x("("+t+") - ("+e+")",n);if(f(i)){if(!i.is(d.color))return null;var o=x("("+e+") - ("+t+")",n);f(o)||(i=o,r="-")}return i.is(d.number)&&i.value<0&&(r="-",i.value*=-1),i.sign=r,i}function p(e,t){return e.type!==t.type?!1:e.is(d.number)?e.unit===t.unit:e.is(d.color)}function h(e,t){return{expression:e.valueOf(),safe:!!t}}var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=e("./token"),m=e("./color"),g=e("./parser"),x=e("./evaluator"),b={};t.exports={findSafeToken:function(e){for(var t,n,r,i,a,c,f=[],l=[],p=0,h=e.length;h>p;p++)if(i=e[p],i.is(d.number)||i.is(d.color))f.push(i);else if(i.is(d.op2)){if(n=f.pop(),t=f.pop(),c=null,a=null,"+"!==i.value&&"-"!==i.value){s(t),s(n),f.push(b);continue}o(n)?o(t)||(a=t,c="left"):(a=n,c="right"),a?(r=new y(a,i,c),l.push(r),f.push(r)):f.push(b)}else i.is(d.variable)?f.push(i):i.is(d.op1)?(a=f.pop(),a.is(d.number)?(a=a.clone(),a.value*=-1,a.range&&i.range&&(a.range[0]=i.range[0]),f.push(a)):f.push(b)):i.is(d.fn)&&(s(f.pop()),f.pop(),f.push(b));if(!l.length&&1===f.length){var v=f[0];if(v===b)return null;(v.is(d.number)||v.is(d.color)||v.is(d.variable))&&(r=new y(f[0],null,"left"),r.single=!0,l.push(r))}return u(l)},replaceSafeToken:function(e,t,n){var r;if(Array.isArray(e)?(r=e,e=r.expression):r=g.parse(e),n=n||this.findSafeToken(r),!n)return null;var i=function(t,n,r){e=c(e,t,n,r)};if(!t||"0"==t)return"right"==n.side?i("",n.op.range[0],n.value.range[1]):(n.op&&"+"===n.op.value&&i("",n.op),i("",n.value)),e.trim().replace(/^-\s+/,"-");var o="-"===t[0],s="right"===n.side?"-"===n.op.value:n.value<0;return o!==s?"right"===n.side&&(n.op.value=s?"+":"-",o&&(t=t.substr(1)),i(n.op.value,n.op)):o&&"right"===n.side&&(t=t.substr(1)),i(t,n.value),e},patch:function(e,t,n,r){if(Array.isArray(e)||(e=g.parse(e)),"undefined"==typeof r&&(r=x(e,t)),r instanceof d.Token||(r=g.parse(r+"")[0]),n instanceof d.Token||(n=x(n+"",t)),!p(r,n))return h(n,!1);var i=this.findSafeToken(e);if(i&&i.single)return h(n,!0);var o=l(r,n,t);if(!o)return h(e.expression,!0);if(i){var s=(o.is(d.color),i.value.toPrimitive());i.op&&"-"===i.op.value&&(s*=-1);var a=o.toPrimitive();if("-"==o.sign&&(a*=-1),s+=a)if(o.is(d.color)){var u=m(Math.abs(s));s=(0>s?"-":"")+u.toCSS()}else s+=o.unit;return h(this.replaceSafeToken(e,s,i),!0)}return h(e.expression+" "+o.sign+" "+o.valueOf(),!0)}};var y=function(){function e(t,n,i){r(this,e),this.__bad=!1,this.value=t,this.op=n,this.side=i}return v(e,[{key:"valueOf",value:function(){var e=this.value.valueOf();return this.value.is(d.color)&&(e=this.value.value.toDecimal()),"right"==this.side&&"-"===this.op.value&&(e*=-1),e}}]),e}()},{"./color":3,"./evaluator":5,"./parser":7,"./token":11}],9:[function(e,t,n){"use strict";var r=e("./string-stream"),i=/[\s\u00a0]/,o=/[\-\+\*\/,=\!<>]/;t.exports=function(e){if(e=e.trim(),!i.test(e))return[e];for(var t,n=r(e),s=[];t=n.next();)if(i.test(t))if(n.eatSpace(),o.test(n.peek())){for(n.next();"="===n.next(););n.eatSpace()}else s.push(n.current().trim()),n.start=n.pos;else","==t?n.eatSpace():"("==t?(n.backUp(1),n.skipToPair("(",")")):n.skipQuoted();return s.push(n.current().trim()),s.filter(Boolean)}},{"./string-stream":10}],10:[function(e,t,n){"use strict";function r(e){this.pos=this.start=0,this.string=e,this._length=e.length}t.exports=function(e){return new r(e)},r.prototype={eol:function(){return this.pos>=this._length},sol:function(){return 0===this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this._length?this.string.charAt(this.pos++):void 0},eat:function(e){var t,n=this.string.charAt(this.pos);return t="string"==typeof e?n==e:n&&(e.test?e.test(n):e(n)),t?(++this.pos,n):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this._length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},skipToPair:function(e,t,n){for(var r,i=0,o=this.pos,s=this._length;s>o;)if(r=this.string.charAt(o++),r==e)i++;else if(r==t){if(i--,1>i)return this.pos=o,!0}else!n||'"'!=r&&"'"!=r||this.skipString(r);return!1},skipQuoted:function(e){var t=this.string.charAt(e?this.pos:this.pos-1);return'"'===t||"'"===t?(e&&this.pos++,this.skipString(t)):void 0},skipString:function(e){for(var t,n=this.pos,r=this._length;r>n;)if(t=this.string.charAt(n++),"\\"!=t&&t==e)return this.pos=n,!0;return!1},backUp:function(e){this.pos-=e},match:function i(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}var r=n?function(e){return e.toLowerCase()}:function(e){return e};return r(this.string).indexOf(r(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(e){return this.string.slice(this.start,this.pos-(e?1:0))}}},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t="",n=e,r=c(e);return r.skipQuoted(!0)&&r.pos===e.length&&(t=e[0],n=n.substring(1,n.length-1)),{quote:t,string:n}}function o(e,t){if(e instanceof k)return e;var n={};if(e&&"object"==typeof e&&"current"in e&&(n.range=[e.start,e.pos],e=e.current()),n.value=e,t===f&&"string"==typeof e){var r=e.match(y);if(!r)throw new Error("Unable to parse number token "+e);if(n.value=parseFloat(r[1]),isNaN(n.value))throw new Error('Invalid number "'+r[1]+'"');n.unit=r[2]||""}else if(t===g)n.value=u(e);else if(t===d){var o=i(e);n.value=o.string,n.quote=o.quote}else t!==x||Array.isArray(e)||(n.value=[e]);return n}function s(e){var n=function(n,r){return t.exports(n,r,e)};return n._type=e,n}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./color"),c=e("./string-stream"),f=1,l=2,p=3,h=4,v=5,d=6,m=7,g=8,x=9,b=10,y=/^(-?[0-9\.]+)([a-z%]*)$/i;t.exports=function(e,t,n){return new k(n||-1,e,t)},t.exports.string=s(d),t.exports.number=s(f),t.exports.variable=s(h),t.exports.op1=s(l),t.exports.op2=s(p),t.exports.fn=s(v),t.exports.bool=s(m),t.exports.color=s(g),t.exports.list=s(x),t.exports.space=s(b),t.exports.restore=function(e){var n=t.exports(e.value,e.priority,e.type);return["unit","quote","range"].forEach(function(t){t in e&&(n[t]=e[t])}),n};var k=function(){function e(t,n,i){var s=this;r(this,e),this.unit="",this.quote="",this.range=null;var a=o(n,t);Object.keys(a).forEach(function(e){return s[e]=a[e]}),this.type=t,null==i&&"priority"in this||(this.priority=i||0)}return a(e,[{key:"is",value:function(e){return"function"==typeof e?this.type===e._type:this.type===e}},{key:"clone",value:function(){return new e(this.type,this)}},{key:"valueOf",value:function(e){switch(this.type){
case d:return this.quote+this.value+this.quote;case g:return this.value.valueOf();case x:return this.value.map(function(e){return e.valueOf()}).join(e||this.value.glue||", ");case f:var t=this.value.toFixed(15).replace(/0+$/,"").replace(/\.$/,"");return t+this.unit}return this.value}},{key:"toString",value:function(){return this.valueOf()}},{key:"toPrimitive",value:function(){return this.type===g?this.value.toDecimal():this.value}}]),e}();t.exports.Token=k},{"./color":3,"./string-stream":10}],12:[function(e,t,n){"use strict";function r(e,t){this.source=e,this.hash=t,this.lastAccessTime=Date.now()}var i=18e5,o={};t.exports.get=function(e){var t=o[e];return t?(t.lastAccessTime=Date.now(),t):void 0},t.exports.copy=function(){return new r(this.source,this.hash)},t.exports.add=function(e,t,n){return null===e||"undefined"==typeof e?null:o[e]=new r(t,n)},t.exports.clean=function(e){e=e||i;var t=Date.now();Object.keys(o).forEach(function(n){o[n].lastAccessTime+e<t&&delete o[n]})},t.exports.reset=function(){o={}}},{}],13:[function(e,t,n){"use strict";function r(e){var t=new o(e);return(e.c||e.children||[]).forEach(function(e){t.addChild(r(e))}),t}var i=e("livestyle-css-tree"),o=e("../resolved-node"),s=e("../patcher");t.exports=function(e,t,n){"function"==typeof t&&(n=t,t={});try{e instanceof o||(e=r(i(e)))}catch(s){return n(s)}n(null,e)},t.exports.applyPatch=function(e,t){return s(e,t)}},{"../patcher":32,"../resolved-node":35,"livestyle-css-tree":59}],14:[function(e,t,n){"use strict";var r=e("string-stream"),i=e("../utils"),o=/^@import$/i;t.exports.parse=function(e){return i.split(e).map(function(e){var t=e.match(/^\(\s*(\w+)\s*\)\s*/);t&&(e=e.substring(t[0].length).trim());for(var n,i=null,o=r(e);n=o.next();)if("("!==n){if(/[\s\u00a0]/.test(n)){i=e.substring(o.pos).trim(),e=o.current().trim();break}o.skipQuoted()}else o.backUp(1),o.skipToPair("(",")",!0);return{option:t?t[1]:null,url:e.replace(/^url\s*\(\s*|\s*\)$/g,"").replace(/['"]/g,""),mq:i}})},t.exports.isDependency=function(e){return e.mq?!1:!(/^(\w+:)?\/\//.test(e.url)||/^data:/.test(e.url))},t.exports.imports=function(e){var t=[],n=this;return e.all().forEach(function(e){"property"===e.type&&o.test(e.name)&&(t=t.concat(n.parse(e.value)))}),t}},{"../utils":57,"string-stream":72}],15:[function(e,t,n){"use strict";function r(e){return e&&~h.indexOf(e)}function i(e){e&&!r(e)&&h.push(e)}function o(e){var t=h.indexOf(e);~t&&h.splice(t,1)}function s(e,t){t()}function a(e,t){return this instanceof a?(this.tree=e,this.options=t||{},this.uri=this.options.uri,this.baseDir=this.options.baseDir||c.dirname(this.uri||""),this.ext=this.options.ext||".css",this.loader=this.options.loader||s,this.stylesheetResolver=this.options.stylesheetResolver||l,this.globalDependencies=this.options.globalDependencies||[],void(this._fetcherGuard=(this.options._fetcherGuard||0)+1)):new a(e,t)}var u=e("../cache"),c=e("../path"),f=e("../utils"),l=e("../css/resolver"),p=15,h=[];a.prototype={resolvePath:function(e){if(!this.uri)return null;var t;return t=c.isAbsolute(e)?c.join(this.baseDir,e.substring(1)):c.join(c.dirname(this.uri),e),t=c.resolve(t),c.extname(t)||(t+=this.ext),t},payload:function(e){var t=this;e=e.map(function(e){return t.resolvePath(e)});var n=this.globalDependencies.concat(e).map(function(e){if(!e||r(e))return null;var t={uri:e},n=u.get(e);return n&&n.hash&&(t.hash=n.hash),t}).filter(function(e){return!!e});return f.unique(n)},fetch:function(e,t){var n=this,r=this.payload(e);return!r.length||this._fetcherGuard>p?t():void this.loader(r,function(e){e=e||[],"string"==typeof e&&JSON.parse(e),e.forEach(function(e){i(e.uri)});var r,s=n.stylesheetResolver,a=[],u=function c(){for(var u=!0;u;){if(u=!1,r&&o(r.uri),!e.length)return t(a);if(r=e.shift(),r.uri){i(r.uri),a.push(r.uri);var l=f.extend({},n.options,{uri:r.uri,hash:r.hash,_fetcherGuard:n._fetcherGuard});s(r.content,l,c)}else u=!0}};u()})},globals:function(){return this.globalDependencies.map(function(e){return e===this.uri?null:u.get(e)},this).filter(function(e){return!!e})},get:function(e){return e=u.get(this.resolvePath(e)),e?e.source:void 0},inject:function(e,t){Array.isArray(e)||(e=[e]);var n=this;e.forEach(function(e){if("string"==typeof e&&(e=u.get(n.resolvePath(e))),e&&e.source&&e.source.scope){var r=e.source.scope.mixins;Object.keys(r).forEach(function(e){Array.isArray(t.mixins[e])&&Array.isArray(r[e])?t.mixins[e]=t.mixins[e].concat(r[e]):t.mixins[e]=r[e]}),t.mixinsExternal&&t.mixinsExternal.push(e.source);var i=e.source.scope.variables;for(var o in i)t.variables[o]=i[o];if(i=e.source.scope.rawVariables)for(var o in i)t.rawVariables[o]=i[o]}})}},t.exports=a},{"../cache":12,"../css/resolver":13,"../path":33,"../utils":57}],16:[function(e,t,n){"use strict";function r(e){return e.normalName||e.name}function i(e){return"property"===e.type}function o(e){return"section"===e.type}function s(e){return e.filter(i)}function a(e){return e.filter(o)}function u(e){e=(e||"").trim().replace(/\s+/g," ");for(var t,n=d(e),r=[];t=n.next();)","===t?(r.push(n.current().trim()),n.start=n.pos):n.skipQuoted();return r.push(n.current().trim()),r.join(",")}function c(e){return u(e.value)}function f(e,t){return e.type===t.type&&r(e)===r(t)}function l(e,t){if(!f(e,t))return!1;if(i(e))return c(e)===c(t);var n=e.children,r=t.children;if(n.length!==r.length)return!1;for(var o=0,s=n.length;s>o;o++)if(!l(n[o],r[o]))return!1;return!0}function p(e,t){for(var n,r,i=0,o=t.length;o>i;i++){r=t[i];for(var s=0,a=e.length;a>s;s++)if(n=e[s],l(n,r)){e.splice(s,1),t.splice(i,1),i--,o--,s--,a--;break}}}function h(e,t){var n=.001,r=0;return e.children.forEach(function(e){t.children.forEach(function(t){f(e,t)&&(r++,i(e)&&c(e)===c(t)&&(r+=n))})}),r/Math.max(e.children.length,t.children.length)}function v(e,t){var n=[],r=t.slice(0),i=e.filter(function(e){for(var t=[],i=c(e),o=0,s=r.length;s>o;o++)if(e.name===r[o].name){if(i===c(r[o]))return r.splice(o,1),!1;t.push(r[o])}return"@import"!==e.name&&t.length?(n.push(t[0]),r.splice(r.indexOf(t[0]),1),!1):!0});return{add:r,update:n,remove:i,empty:r.length+n.length+i.length===0}}var d=e("string-stream"),m=e("./patch"),g=t.exports=function(e,t,n){n=n||[],n.removed||(n.removed=[]);var r=e.children.slice(0),i=t.children.slice(0);p(r,i);var o=v(s(r),s(i));if(!o.empty){var u=new m(e,"update",{excludeNodesFromHints:n.removed});u.update(o.add,o.update),u.remove(o.remove),u.all(s(t.children)),n.push(u)}for(r=a(r),i=a(i),r.forEach(function(e){var t=[];return i.forEach(function(n){f(e,n)&&t.push({node:n,score:h(e,n)})}),t.length?(t=t.sort(function(e,t){return t.score-e.score}),g(e,t[0].node,n),void i.splice(i.indexOf(t[0].node),1)):(n.push(new m(e,"remove",{excludeNodesFromHints:n.removed})),n.removed.push(e))});i.length;){var c=i.shift(),u=new m(c,"add",{excludeNodesFromHints:i});u.update(c.properties),n.push(u)}return n}},{"./patch":31,"string-stream":72}],17:[function(e,t,n){"use strict";var r=/\s+/,i=Array.prototype.slice;t.exports.on=function(e,t,n){var i,o,s,a,u;if(!t)return this;for(e=e.split(r),i=this._callbacks||(this._callbacks={});o=e.shift();)u=i[o],s=u?u.tail:{},s.next=a={},s.context=n,s.callback=t,i[o]={tail:a,next:u?u.next:s};return this},t.exports.off=function(e,t,n){var i,o,s,a,u,c;if(o=this._callbacks){if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(r):_.keys(o);i=e.shift();)if(s=o[i],delete o[i],s&&(t||n))for(a=s.tail;(s=s.next)!==a;)u=s.callback,c=s.context,(t&&u!==t||n&&c!==n)&&this.on(i,u,c);return this}},t.exports.trigger=function(e){var t,n,o,s,a,u,c;if(!(o=this._callbacks))return this;for(u=o.all,e=e.split(r),c=i.call(arguments,1);t=e.shift();){if(n=o[t])for(s=n.tail;(n=n.next)!==s;)n.callback.apply(n.context||this,c);if(n=u)for(s=n.tail,a=[t].concat(c);(n=n.next)!==s;)n.callback.apply(n.context||this,a)}return this}},{}],18:[function(e,t,n){"use strict";function r(e){var t={};return e.properties.forEach(function(e){t[e.name]||(t[e.name]=[]),t[e.name].push(e)}),t}function i(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)}function o(e){return e.all().filter(function(e){return"section"===e.type}).forEach(function(e){var t=r(e);Object.keys(t).forEach(function(n){for(var r,o=t[n];o.length;){r=o.pop();for(var s=o.length-1;s>=0;s--)o[s].value===r.value&&(i(e.children,o[s]),o.splice(s,1))}})}),e}function s(e){return e.children.some(function(e){return"property"===e.type||e.children.length})}function a(e){e._removed||(e._removed=[]);for(var t=e.all().filter(function(e){return"section"===e.type}),n=t.length-1;n>=0;n--)s(t[n])||(e._removed.push(t[n]),i(t[n].parent.children,t[n]));return e}t.exports=function(e){return e=o(e),a(e)}},{}],19:[function(e,t,n){"use strict";function r(e,t){if(t){var n=String(t.name||"");if("variable"===t.type&&"@"!==n[0])return;if("function"===t.type&&"-"!==n[0])return}v.warn(e)}function i(e){return m.create(e,r)}function o(e){for(var t,n=[],r=h(e),i=[];t=r.next();)if('"'===t||"'"===t)i[i.length-1]===t?i.pop():i.push(t);else if("@"==t&&"{"==r.peek()){if(r.start=r.pos-1,!r.skipToPair("{","}",!0))return[];n.push([r.start,r.pos,!!i.length])}return n}function s(e,t,n,r){if(!e)return e;var s=o(e);if(s.length){var a=i(t);s.reverse().forEach(function(t){var i="@"+e.substring(t[0]+2,t[1]-1),o=c(i,a,r);o=null===o?i:t[2]&&o.quote?o.value:n(o),e=d.replaceSubstring(e,o,t)})}return e}function a(e,t,n,r){"function"==typeof n&&(r=n,n=null);try{return r(e,i(t))}catch(o){var s='Unable to evaluate expression "'+e+'": '+o.message;v.error(n?n.error(s):new Error(s))}return null}function u(e){return"number"==typeof e?e:"string"==typeof e?'"'+e.valueOf().replace(/"/,'\\"')+'"':Array.isArray(e)?e.map(u).join(", "):e+""}function c(e,t,n){return a(e,t,n,p.eval)}function f(e){return Array.isArray(e.value)?"["+e.value.map(l).join(", ")+"]":l(e)}function l(e){return e?e.valueOf():""}var p=e("livestyle-css-expression"),h=e("string-stream"),v=e("../logger"),d=e("../utils"),m=p.Context;t.exports.interpolate=function(e,t,n){return s(e,t,l,n)},t.exports.eval=function(e,t,n){if(!e)return e;var r=i(t);return e=this.interpolate(e,r),c(e,r,n)||e},t.exports.evalBackticks=function(e,t,n){return this.findBackticks(e).reverse().forEach(function(r){var i=e.substring(r[0]+1,r[1]-1);i=s(i,t.variables,f,n);try{i=t.jsInterpreter(i,t)}catch(o){return v.error(new Error("Error while evaluating `"+i+"`:\n"+o.message))}e=d.replaceSubstring(e,u(i),r)}),e},t.exports.findTokens=o,t.exports.findBackticks=function(e){for(var t,n=[],r=h(e);t=r.next();)if("`"===t)for(r.start=r.pos-1;!r.eol();)if("`"===r.next()){n.push([r.start,r.pos]);break}return n}},{"../logger":29,"../utils":57,"livestyle-css-expression":1,"string-stream":72}],20:[function(e,t,n){"use strict";function r(e){return h(e).list.map(function(e){e=e.toString();var t=e.replace(d,"");return{sel:new h.Selector(t),all:t!==e}})}function i(e){return e.fragments.filter(function(e){return v.test(e)})}function o(e){return e.fragments.filter(function(e){return!v.test(e)})}function s(e,t,n,r){return r?u(e,t,n):a(e,t,n)}function a(e,t,n){var r=e.map(function(e){return i(e).join("")}),s=e.map(function(e){return o(e).join("")}),a=[],u=s.indexOf(t.toString());return-1!==u&&(n=o(n).join(""),n=new h.Selector(n+r[u]),a.push(n)),a}function u(e,t,n){var r=[];return e.forEach(function(e){r=r.concat(c(e,t,n))}),r}function c(e,t,n){for(var r,i=o(n).join(""),s=e.fragments,a=t.fragments,u=[],c=[],l=0;r=f(s,a,l);)c.push(r),l=r.to;if(c.length){for(var p,v=s.slice(0),d=c.length-1;d>=0;d--)p=c[d],v.splice(p.from,p.to-p.from,i);u.push(new h.Selector(v.join("")))}return u}function f(e,t,n){if(t.length>e.length)return null;var r=e.indexOf(t[0],n||0);if(-1===r||r+t.length>e.length)return null;for(var i=1,o=t.length;o>i;i++)if(e[r+i]!==t[i])return null;return{from:r,to:r+t.length}}function l(e){return"property"===e.type&&"&"===e.name}function p(e,t){for(var n,i,o=[],s=e.fragments.slice();s.length&&(i=s.pop().toString(),n=i.match(v));)o=o.concat(r(n[1]).reverse());return o.reverse(),t.children.forEach(function(e){l(e)&&e.value.replace(v,function(e,t){o=o.concat(r(t))})}),o}var h=e("livestyle-css-tree/lib/selector"),v=/^:?extend\s*\((.+?)\)/,d=/\s+all\s*$/,m=t.exports.resolve=function(e){var t=[],n=function r(e){return/^@media|@supports/.test(e.name)?(m(e),e.children.forEach(r)):void("section"===e.type&&t.push(e))};return e.children.forEach(n),t.forEach(function(n){n!==e&&t.forEach(function(e){if(e!==n){var t=[];n.selector.list.forEach(function(r){if(r.__fromNode!==e){var i=e.selector.list.filter(function(e){return!e.__fromNode||e.__fromNode!==r.__fromNode});p(r,n).forEach(function(e){t=t.concat(s(i,e.sel,r,e.all))})}}),t.forEach(function(e){e.__fromNode=n}),e.selector.add(t)}})}),t.forEach(function(e){e.name=e.selector.list.map(function(e){return e.fragments.filter(function(e){return!v.test(e)}).join("")}).join(", "),e.children=e.children.filter(function(e){return!l(e)})}),e}},{"livestyle-css-tree/lib/selector":67}],21:[function(e,t,n){"use strict";var r=e("./expression"),i=e("../dependency/import"),o=e("../resolved-node"),s=e("../source-hint"),a=/^@import$/i;t.exports.resolve=function(e,t){return a.test(e.name)?(i.parse(e.value).forEach(function(n){if("css"===n.option||n.mq){var i=new o(e,t);i.value="url("+n.url+")",n.mq&&(i.value+=" "+n.mq);s(t,e.range("value"));i.value=r.interpolate(i.value,t.variables),t.parent.addChild(i)}else"inline"!==n.option&&t.dependency.inject(n.url,t)}),!0):!1}},{"../dependency/import":14,"../resolved-node":35,"../source-hint":56,"./expression":19}],22:[function(e,t,n){"use strict";function r(e,t,n){var r=s(t,n.range("name"));return i.interpolate(e,t.variables,r).replace(/\@[\w\-]+/g,function(e){return i.eval(t.variables[e],t.variables,r)||""}).trim()}var i=e("./expression"),o=e("../resolved-node"),s=e("../source-hint"),a=/@media\s*/i;t.exports.resolve=function(e,t){if(!a.test(e.name))return!1;for(var n,i=[r(e.name.replace(a,""),t,e)],s=e.parent;s;)n=s.name,a.test(n)&&i.unshift(n.replace(a,"")),s=s.parent;var u=new o(e,t);u.name="@media "+i.join(" and "),t.parent.root.addChild(u);for(var c=t.parent;c&&c.name&&a.test(c.name);)c=c.parent;if(c){var f=c.name;c=c.clone(),c.name=f,u.addChild(c)}else c=u;return t.next(e,t.clone({parent:c}))}},{"../resolved-node":35,"../source-hint":56,"./expression":19}],23:[function(e,t,n){"use strict";function r(e){return e.data("mixinDefinition")||e.data("mixinDefinition",i(e))}function i(e,t){var n=s(t||e.name),r=f(n.name,e,n.guards);return r.names=T(r.name).list.map(function(e){return e.toString().replace(/^&+/,"")}).filter(function(e){return M.test(e)}),r}function o(e){return 6===e.type?!1:(e&&(e=e.toPrimitive()),"true"===String(e))}function s(e){var t=e.match(/\swhen\b/),n=null,r=!0;if(t){try{n=u(e.substring(t.index+5))}catch(i){A.error(new Error("Unable to evaluate mixin guard: "+e.substring(t.index+5)+": "+i.message)),r=!1}e=e.substring(0,t.index)}return{name:e.trim(),guards:n,valid:r}}function a(e){for(var t,n=O(e.trim()),r=[];t=n.next();)","===t?(n.backUp(1),r.push(n.current()),n.next(),n.start=n.pos):"("===t&&(n.backUp(1),n.skipToPair("(",")",!0));return r.push(n.current()),r}function u(e){return a(e).map(function(t){for(var n,r=[],i=!1,o=O(t);!o.eol();)if(o.match("not",!0))i=!i;else{if("("==o.peek()){if(o.start=o.pos+1,!o.skipToPair("(",")",!0))throw new Error("Closing brace in mixin guard expression not found: "+e);o.backUp(1),n=o.current(),r.push({negate:i,source:n,expr:S.tokenize(n)}),i=!1,o.next()}o.next()}return r})}function c(e,t){if(!e.guards||!e.guards.length)return!0;var n,r,i,s,a=U.create(t.variables);try{for(var u=0,c=e.guards.length;c>u;u++){r=!0,n=e.guards[u];for(var f=0,l=n.length;l>f;f++)if(i=S.eval(n[f].expr,a),s=o(i),n[f].negate&&(s=!s),!s){r=!1;break}if(r)return!0}}catch(p){return A.error(new Error("Unable to evaluate guard expression for "+e.name+": "+p.message)),!1}return!1}function f(e,t,n){var r=l(e),i=/\.{3}$/,o=0,s=!1,a=!1,u=r.args.map(function(e){return i.test(e.raw)?(s=!0,a=e.raw.replace(i,"")||null,null):(null===e.name&&N.test(e.value)&&(e.name=e.value,e.value=null),null===e.value&&o++,e)}).filter(function(e){return!!e});return u.mandatory=o,u.unlimited=s,u.rest=a,{name:p(r.name),args:u,node:t,guards:n}}function l(e){for(var t,n=O(e),r="";t=n.next();)if("("===t){if(e=n.current(!0),n.start=n.pos,n.backUp(1),n.skipToPair("(",")",!0)){n.backUp(1),r=n.current();break}throw new Error("Invalid mixin definition: "+e)}return{name:e.trim(),args:r?v(r):[]}}function p(e){var t=new E.SelectorDeclaration.Selector(e);return t.parts.map(function(e){return e.toString(!0)}).join("")}function h(e){for(var t,n=O(e.trim());t=n.next();){if(";"===t)return!1;n.skipQuoted()}return!0}function v(e){e=e.trim();for(var t,n=O(e.trim()),r=[],i=0,o=h(e),s=function(e){if(e=e.trim()){var t=null,n=e,o=e.match(/^(@[\w-]+)\s*:\s*(.+)/);o&&(t=o[1].trim(),n=o[2].trim());var s={name:t,value:n,raw:e};r.push(s),null===s.value&&i++}};t=n.next();)"("===t?(n.backUp(1),n.skipToPair("(",")",!0)):";"==t||","==t&&o?(s(e.substring(n.start,n.pos-1)),n.start=n.pos):n.skipQuoted();return s(n.current()),r.mandatory=i,r}function d(e,t,n){var i=[];return n=n||"",t.children.forEach(function(t){if("property"!==t.type){var o=r(t);o.names.forEach(function(r){return r=n+r,r===e?i.push(o):void(r&&0!==e.indexOf(r)||(i=i.concat(d(e,t,r))))})}}),i}function m(e,t){var n=[],r={};return e.forEach(function(e){var i=j.eval(e.value,t.variables);e.name?r[e.name.trim()]=i:n.push(i)}),{positional:n,named:r}}function g(e,t,n){var r={},i=[],o=0;e.args.forEach(function(e,n){var s=e.value;e.name in t.named?s=t.named[e.name]:o<t.positional.length&&(s=t.positional[o++]),r[e.name]=s,i.push(s)});for(var s=[];o<t.positional.length;)s.push(t.positional[o++]);return r["@arguments"]=i.concat(s),r["@arguments"].glue=s.glue=" ",1===r["@arguments"].length&&9===r["@arguments"][0].type&&(r["@arguments"]=r["@arguments"][0].value),N.test(e.args.rest||"")&&(r[e.args.rest]=s),r}function x(e,t){for(var n,r,i=0,o=e.args.length;o>i;i++)if(n=e.args[i],r=t[i],null===n.name&&(!r||n.value!==r.value))return!1;var s=t.length,o=e.args.length,a=e.args.mandatory||0;return s>=a&&(e.args.unlimited||o>=s)}function b(e,t,n){var r=[],i=[],o=[],s=[];return e.forEach(function(e){var a=g(e,t,n),u=n.clone({variables:a});u.localVars=a,u.variables["default"]=function(){return o.push(e),i.push({mixin:e,scope:u}),!1},c(e,u)&&(~o.indexOf(e)&&s.push(e),r.push({mixin:e,scope:u})),delete u.variables["default"]}),{matches:s.length===r.length?[]:r,defaults:i}}function y(e,t,n){return t.data("mixinId")||t.data("mixinId",++I),e+"["+t.data("mixinId")+"]("+Object.keys(n||{}).map(function(e){return e+': "'+n[e]+'"'}).join(", ")+")"}function k(e,t){t.mixinCallStack||(t.mixinCallStack=[]);var n=t.mixinCallStack;if(n.length>=$)return"Maximum mixin call stack size exceeded";var r=y(e.name,e.node,t.localVars),i=0;return n.forEach(function(e){e===r&&i++}),i>=F?'Maximum call stack size exceeded for mixin "'+e.name+'"':(n.push(r),!1)}function w(e,t,n){var r=k(e,t);if(r)return A.error(r);t.next(e.node,t);var i={};Object.keys(t.variables).forEach(function(e){e in i||e in t.localVars||n.variables.hasOwnProperty(e)||(i[e]=t.variables[e])}),C.extend(n.variables,i)}function _(e,t,n){return e.map(function(e){var r=new P(t.parent.root.ref,t),i=new P(t.parent.ref,t);i.name=t.parent.name,r.addChild(i);var o=e.scope.clone({parent:i});o.important=o.important||t.important||n,w(e.mixin,o,t);var s=r.children.slice(1);return i.children.forEach(function(t){e.scope.parent.addChild(t)}),s.forEach(function(t){e.scope.parent.top.addChild(t)}),{mixin:e.mixin,output:i.children.concat(s)}})}var E=e("livestyle-css-tree"),O=e("string-stream"),S=e("livestyle-css-expression"),j=(e("./nesting"),e("./expression")),A=e("../logger"),C=e("../utils"),P=e("../resolved-node"),U=S.Context,T=E.parseSelector,N=/^@/,M=/^([.#][\w-]+)+$/,q=/\s*\!important\s*$/,I=0,$=32,F=10;t.exports.find=function(e,t){for(var n=[],t=p(t||e.name);e.parent;)n=n.concat(d(t,e=e.parent));return n},t.exports.resolve=function(e,t){return"property"===e.type?this.resolveCall(e,t):this.resolveDefinition(e,t)},t.exports.resolveDefinition=function(e,t){var n=j.interpolate(e.name,U.create(t.variables)),r=i(e,n);return e.data("mixinDefinition",r),/^([.#][\s\w-]+)+\s*\(/.test(n)},t.exports.resolveCall=function(e,t){var n=(e.name.trim(),e.name.replace(q,"")),r=e.name!==n;if(n=p(n),!M.test(n.split("(")[0]))return!1;var i=l(n),o=this.find(e,i.name),s=e.root;if(t.mixinsExternal.forEach(function(e){e.ref!==s&&(o=o.concat(d(i.name,e.ref)))}),o=o.filter(function(e){return x(e,i.args)}),!o.length)return!0;try{var a=m(i.args,t)}catch(u){return A.error('Unable to populate "%s" mixin invocation arguments: %s',i.name,u),!0}var f,h=b(o,a,t);if(h.matches.length)f=h.matches;else{var v=function(){return!0};f=h.defaults.filter(function(e){e.scope.variables["default"]=v;var t=c(e.mixin,e.scope);return delete e.scope.variables["default"],t})}return e.data("resolvedMixins",_(f,t,r)),!0}},{"../logger":29,"../resolved-node":35,"../utils":57,"./expression":19,"./nesting":24,"livestyle-css-expression":1,"livestyle-css-tree":59,"string-stream":72}],24:[function(e,t,n){"use strict";function r(e){var t=[];if(-1===e.indexOf("&"))return t;for(var n,r=c(e);n=r.next();)"&"===n?t.push([r.pos-1,r.pos]):r.skipQuoted();return t}function i(e,t){for(var n=[],r=0,i=t.length;i>r;r++)n.push(t[r]+" "+e);return n}function o(e,t){for(var n=Math.pow(t,e),r=[],i=[],o=0;e>o;o++)i[o]=0;for(var s,o=0;n>o;o++)for(r.push(i.slice(0)),s=i.length-1;s>=0&&(i[s]=(i[s]+1)%t,!i[s]&&s);)s--;return r}function s(e,t,n){for(var i=[],s=[],a=0,u=e.length;u>a;a++)if(s=r(e[a]),s.length)for(var c,l,p=o(s.length,t.length),h=0,v=p.length;v>h;h++){c=p[h],l=e[a];for(var d=c.length-1;d>=0;d--)l=f.replaceSubstring(l,t[c[d]],s[d]);i.push(l)}else i.push(n(e[a],t));return i}function a(e){var t=u(e).list.map(function(e){return e.toString()});return t.length?t:[""]}var u=e("livestyle-css-tree/lib/selector"),c=e("string-stream"),f=e("../utils");t.exports.nameForPath=function(e){for(var t,n=0,r=a(e[n++]);n<e.length;)t=a(e[n++]),r=s(t,r,i);return r.map(function(e){return e.toString().trim()}).join(", ")}},{"../utils":57,"livestyle-css-tree/lib/selector":67,"string-stream":72}],25:[function(e,t,n){"use strict";var r=e("../resolved-node"),i=e("./expression"),o=e("../source-hint"),s=/^@/,a=/\s*\!important\s*$/,u=/^font$/i;t.exports.resolve=function(e,t){if("property"!==e.type||s.test(e.name))return!1;if(!t.parent)return!0;var n=t.variables,c=new r(e,t),f=!!t.important;if("&"!==c.name){var l=e.value;a.test(l)&&(f=!0,l=l.replace(a,"")),c.name=i.interpolate(e.name,n,o(t,e.range("name"))),u.test(c.name)&&(n=Object.create(n),n["%magic-div"]=1);var p=o(t,e.range("value"));l=i.evalBackticks(l,t,p),c.value=i.eval(l,n,p).toString(),f&&(c.value+=" !important")}return t.parent.addChild(c),c}},{"../resolved-node":35,"../source-hint":56,"./expression":19}],26:[function(e,t,n){"use strict";function r(e){var t=[],n=["inline","css"];return l.imports(e).forEach(function(e){!~n.indexOf(e.option)&&l.isDependency(e)&&t.push(e.url)}),u.unique(t)}var i=e("livestyle-css-tree"),o=e("../resolved-node"),s=e("../preprocessor-patcher"),a=e("../scope"),u=e("../utils"),c=e("../cache"),f=e("../dependency/resolver"),l=e("../dependency/import"),p=e("./extend"),h=e("./variable"),v=e("./cleanup"),d=e("./mixin"),m=[e("./import"),e("./media-query"),h,d,e("./section"),e("./property")];t.exports=function(e,n,s){if("function"==typeof n&&(s=n,n={}),e instanceof o)return s(null,e);try{e=i(e)}catch(l){return s(l)}n=n||{};var d=new o(e),g=f(d,u.extend({ext:".less",stylesheetResolver:t.exports},n)),x=new a({syntax:"less",parent:d,uri:n.uri,dependency:g,variables:{"true":!0,"false":!1},mixinsExternal:[],jsInterpreter:n.jsInterpreter||function(e,t){var n=new Function("return "+e);return n.call(null)},mixins:{},transform:function(e,t){for(var n=0,r=m.length;r>n&&!m[n].resolve(e,t);n++);return this},next:function(e,t,n){return n=n||this.transform,h.collect(e,t),e.children.forEach(function(e){n.call(this,e,t)}),this}});d.scope=x,c.add(n.uri,d,n.hash),g.fetch(r(e),function(){g.globals().forEach(function(e){g.inject(e,d.scope)});var t=d.scope;t.next(e,d.scope),p.resolve(d,t),s(null,v(d))})},t.exports.applyPatch=function(e,t){return s(e,t)}},{"../cache":12,"../dependency/import":14,"../dependency/resolver":15,"../preprocessor-patcher":34,"../resolved-node":35,"../scope":36,"../utils":57,"./cleanup":18,"./extend":20,"./import":21,"./media-query":22,"./mixin":23,"./property":25,"./section":27,"./variable":28,"livestyle-css-tree":59}],27:[function(e,t,n){"use strict";var r=e("./expression"),i=e("./nesting"),o=e("../resolved-node"),s=e("../source-hint");t.exports.resolve=function(e,t,n){if("section"!==e.type)return!1;t=t.clone({variables:{},mixins:{}});var a=new o(e,t),u=[];t.parent.name&&!/^@media|@supports/.test(t.parent.name)?u.push(t.parent.name):u.push(""),n=n||e.name;var c=s(t,e.range("name"));return u.push(r.interpolate(n,t.variables,c)),a.name=i.nameForPath(u),t.parent.top.addChild(a),t.next(e,t.clone({parent:a}))}},{"../resolved-node":35,"../source-hint":56,"./expression":19,"./nesting":24}],28:[function(e,t,n){"use strict";function r(e){return s.test(e.name)}var i=e("./expression"),o=e("../source-hint"),s=/^@(?!media\b|\{)/;t.exports.collect=function(e,t){var n=t.variables,s={};e.children.forEach(function(e){r(e)&&(n[e.name]=(e.value||"").trim(),s[e.name]=e)}),Object.keys(s).forEach(function(e){if(/`/.test(n[e])){var r=o(t,s[e].range("value"));n[e]=i.evalBackticks(n[e],t,r)}})},t.exports.resolve=function(e,t){return r(e)}},{"../source-hint":56,"./expression":19}],29:[function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(e,0)}var i=e("./event-mixin"),o=e("./utils"),s=!1;t.exports=o.extend({_isAllowed:function(e){return s?!1:"function"==typeof this.filter?this.filter(e):!0},log:function(){var e=r(arguments);this._isAllowed(e)&&console.log.apply(console,e),e.unshift("log"),this.trigger.apply(this,e)},warn:function(){var e=r(arguments);this._isAllowed(e)&&console.warn.apply(console,e),e.unshift("warn"),this.trigger.apply(this,e)},error:function(){var e=r(arguments);this._isAllowed(e)&&console.error.apply(console,e),e.unshift("error"),this.trigger.apply(this,e)},silent:function(e){return"undefined"!=typeof e&&(s=!!e),s}},i)},{"./event-mixin":17,"./utils":57}],30:[function(e,t,n){"use strict";function r(e){return e[e.length-1]}function i(e){for(var t,n,r=[],i=/\|(\d+)$/,s=a(e);n=s.next();)"/"===n?(t=s.current().trim(),r.push(t.substring(0,t.length-1).trim()),s.start=s.pos):s.skipQuoted();return r.push(s.current().trim()),r.filter(function(e){return!!e}).map(function(e){var t=1,n=e.match(i);return n&&(t=+n[1],e=e.substring(0,e.length-n[0].length)),new o(e,t)})}function o(e,t){var n;if(t=t||1,Array.isArray(e))n=e[0],t=e[1];else if("string"==typeof e)n=e;else{n=e.normalName,t=1;for(var r=e.parent.children,i=0,o=r.length;r[i]!==e&&o>i;i++)r[i].normalName===n&&t++}this.name=n,this.pos=t}function s(e){if(!(this instanceof s))return new s(e);if(Array.isArray(e))this.components=e.map(function(e){return e instanceof o||(e=s.createComponent(e)),e});else if("string"==typeof e)this.components=i(e);else{var t=e;for(this.components=[];t.parent;)this.components.unshift(s.createComponent(t)),t=t.parent}}var a=e("string-stream");o.prototype={clone:function(){return new o(this.name,this.pos)},equals:function(e){return this.name===e.name&&this.pos===e.pos},valueOf:function(e){return this.name+(!e||this.pos>1?"|"+this.pos:"")},toString:function(){return this.valueOf()},toJSON:function(){return[this.name,this.pos]}},s.createComponent=function(e){return new o(e)},s.prototype={clone:function(){return new s(this.components.map(function(e){return e.clone()}))},valueOf:function(e){return this.components.map(function(t){return t.valueOf(e)}).join("/")},toString:function(e){return this.valueOf(e)},toJSON:function(){return this.components.map(function(e){return e.toJSON()})},equals:function(e,t){return this.valueOf(t)===e.valueOf(t)},find:function(e){for(var t=e.all().filter(function(e){return"section"===e.type}),n=0,r=t.length;r>n;n++)if(t[n].path.equals(this))return t[n]},guess:function(e){for(var t,n,i,o=function(e,t){return e.children.filter(function(e){return e.name.toLowerCase()===t.name})},a=e,u=this.components.slice(0);t=u.shift();){if(n=o(a,t),i=n[t.pos-1],!i&&n.length&&(u[0]&&(i=r(n.filter(function(e){return o(e,u[0]).length}))),i||(i=r(n))),!i){u.unshift(t);break}a=i}return a!==e?{node:a,rest:u.length?new s(u):null}:null}},t.exports=s},{"string-stream":72}],31:[function(e,t,n){"use strict";function r(e){return{name:e.name,value:e.value}}function i(e){return e[e.length-1]}function o(e,t){if(t)for(var n=0,r=t.length;r>n;n++)e=e.concat(t[n]);return e}function s(e){var t={};return e.forEach(function(e){if(e){var n=e.path.toString();n in t||(t[n]=[]),t[n].push(e)}}),t}function a(e,t,n){"object"==typeof t&&(n=t,t=void 0),t=t||3,n=n||{};var r=e.parent;if(!r)return null;var o,s,a=r.indexOf(e),u=[],c=[],f=r.children.length,l=n.excludeNodesFromHints||[];for(o=a-1;o>=0&&u.length<t;o--)s=r.get(o),~l.indexOf(s)||u.unshift(i(s.path.components));for(o=a+1;f>o&&c.length<t;o++)s=r.get(o),~l.indexOf(s)||c.push(i(s.path.components));return{before:u,after:c}}function u(e,t,n){for(var r=[];e.parent;)r.unshift(a(e,t,n)),e=e.parent;return r}function c(e){return e.map(function(e){return{before:e.before.map(p.createComponent),after:e.after.map(p.createComponent)}})}function f(e,t,n){return this instanceof f?(n=n||{},this._update=[],this._remove=[],this._all=[],this.action=t||"update",this.value=null,this.hints=null,void(e instanceof l?(this.path=e.path,"property"===e.type&&(this.value=e.value),this.hints=u(e,n)):"string"==typeof e?this.path=new p(e):e instanceof p?this.path=e:"object"==typeof e&&(this.path=new p(e.path),this.action=e.action,this._update=e.update,this._remove=e.remove,this._all=e.all||[],e.hints&&(this.hints=c(e.hints))))):new f(e,t,n)}var l=e("./resolved-node"),p=e("./node-path");e("./utils");f.prototype={apply:function(e){if("remove"===this.action)return e.remove();if(null!==this.value)e.parent.property(e.name,this.value);else{var t=/^@/;this.remove().forEach(function(n){e.properties.forEach(function(e){e.name!==n.name||t.test(e.name)&&e.value!==n.value||e.remove()})}),this.update().forEach(function(t){if("@charset"===t.name)return e.property(t.name,t.value,"first");var n="last";if("@import"===t.name){var r=e.properties.filter(function(e){return e.name===t.name});return n=r.length?e.indexOf(i(r))+1:"first",e.addProperty(t.name,t.value,n)}e.property(t.name,t.value)})}},update:function(e){return this._update=o(this._update,arguments)},remove:function(e){return this._remove=o(this._remove,arguments)},all:function(e){return this._all=o(this._all,arguments)},clone:function h(){var h=new f(this.path,this.action);return h.update(this.update().map(r)),h.remove(this.remove().map(r)),h.all(this.all().map(r)),h.value=this.value,this.hints&&(h.hints=this.hints.slice(0)),h},toJSON:function(){var e={path:this.path.toJSON(),action:this.action,update:this._update.map(r),remove:this._remove.map(r)},t=this.all();if(t.length&&(e.all=t.map(r)),this.hints){var n=function(e){return e.toJSON()};e.hints=this.hints.map(function(e){return{before:e.before.map(n),after:e.after.map(n)}})}return e},toString:function(){var e=this.update(),t=this.remove(),n=this.path.toString()+" {\n"+e.map(function(e){return"  "+e.name+": "+e.value+";\n"}).join("")+t.map(function(e){return"  /* "+e.name+": "+e.value+"; */\n"}).join("")+"}";if("remove"===this.action&&(n="/* remove: "+this.path.toString()+" */"),this.hints&&this.hints.length){var r=this.hints[this.hints.length-1],i=(r.before||[]).map(function(e){return e.toString()}).join(" / "),o=(r.after||[]).map(function(e){return e.toString()}).join(" / ");i&&(n="/** before: "+i+" */\n"+n),o&&(n+="\n/** after: "+o+" */\n")}return n.trim()}},f.condense=function(e){e=e.map(function(e){return e instanceof f?e:new f(e)});var t=s(e),n=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n].name===t)return e[n]};return Object.keys(t).map(function(e){
var r=t[e],i=r.shift().clone();return r.forEach(function(e){if("remove"===e.action||"remove"===i.action)return i=e;i.action="update",i._remove=i.remove().filter(function(t){return!n(e.update(),t.name)}),i.update(e.update().filter(function(e){var t=n(i.update(),e.name);return t?(t.value=e.value,!1):!0}));var t=[];i.remove(e.remove().filter(function(e){return t.push(e.name),!n(i.remove(),e.name)})),i._update=i.update().filter(function(e){return-1===t.indexOf(e.name)}),i._all=e.all()}),i})},f.hints=u,t.exports=f},{"./node-path":30,"./resolved-node":35,"./utils":57}],32:[function(e,t,n){"use strict";function r(e){return e[e.length-1]}var i=e("livestyle-pathfinder"),o=e("./patch");t.exports=function(e,n){n instanceof o||(n=new o(n));var s=i.find(e,n.path,n.hints);if(!s.partial||"remove"!==n.action){if(!s.partial){var a=s.node;if("add"===n.action){var u=i.indexForHint(s.parent,r(n.hints));a=s.parent.addSection(a.name,u)}return n.apply(a)}return n.apply(t.exports.setupFromPartialMatch(s))}},t.exports.setupFromPartialMatch=function(e){var t,n,r=e.parent;return e.node?(n=e.node.ref,t=n.parent.indexOf(n)):t="last",e.rest.forEach(function(e){r=r.addSection(e.name,t),t=void 0}),r}},{"./patch":31,"livestyle-pathfinder":71}],33:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.exports.sep="/",t.exports.delimiter=":",t.exports.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:"";if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i.charAt(0))}return e=r(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},t.exports.normalize=function(e){var t=this.isAbsolute(e),n="/"===e.substr(-1);return e=r(e.split("/").filter(function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},t.exports.isAbsolute=function(e){return"/"===e.charAt(0)},t.exports.join=function(){var e=Array.prototype.slice.call(arguments,0);return this.normalize(e.filter(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.exports.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=this.resolve(e).substr(1),t=this.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),s=o,a=0;o>a;a++)if(r[a]!==i[a]){s=a;break}for(var u=[],a=s;a<r.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},t.exports.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.exports.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.exports.extname=function(e){return o(e)[3]}},{}],34:[function(e,t,n){"use strict";function r(e,t){var n=e.properties.filter(function(e){return e.name===t});return n[n.length-1]}function i(e,t){return e.ref.parent===t.ref}function o(e,t){return"remove"===t.action?e.remove():void(null!==t.value?e.parent.property(e.name,t.value):(t.update().forEach(function(t){var n=r(e,t.name),o=t.value;if(n){if(!i(n,e))return e.addProperty(t.name,t.value,"last");try{var a=s.patch(n.ref.value,n.scope.variables,o,n.value);a&&(o=a.expression)}catch(u){c.warn('Unable to patch expression "'+n.ref.value+'": '+u)}}e.property(n||t.name,o)}),t.remove().forEach(function(t){var n=!1,r=!1;e.properties.forEach(function(o){o.name===t.name&&(i(o,e)?(o.remove(),n=!0):r=!0)}),r&&!n&&e.addProperty(t.name,"none","last")})))}var s=e("livestyle-css-expression"),a=e("livestyle-pathfinder"),u=e("./patcher"),c=e("./logger");t.exports=function(e,t){var n=a.find(e,t.path,t.hints);if(!n.partial||"remove"!==t.action){if(!n.partial){var r=n.node;return"add"===t.action&&(r=r.root.addSection(r.name)),o(r,t)}var r=u.setupFromPartialMatch(n,t);return o(r,t)}}},{"./logger":29,"./patcher":32,"livestyle-css-expression":1,"livestyle-pathfinder":71}],35:[function(e,t,n){"use strict";function r(e){return s(e).list.map(function(e){return e.parts.forEach(function(e){var t=e.fragments;t.forEach(function(e,n){t[n]=e.replace(/^([\w+\-]+)/,function(e,t){return t.toLowerCase()})})}),e.valueOf()}).join(", ")}function i(e,t){return t=t||[],e.children.forEach(function(e){t.push(e),i(e,t)}),t}function o(e,t){return this instanceof o?(this.ref=e,e=e||{},"t"in e&&(e={type:e.t,name:e.n,value:e.v}),this.type=e instanceof a?"property":"section",this.name=e.name,this.value="property"===this.type?e.value:null,this.parent=null,this.children=[],this.scope=t,this._normalName=null,void(this._normalNameFor=null)):new o(e,t)}var s=e("livestyle-css-tree/lib/selector"),a=e("livestyle-css-tree/lib/property"),u=e("./node-path"),c=/@media|@supports/;o.prototype={indexOf:function(e){return this.children.indexOf(this.get(e))},get:function(e){if(e instanceof o)return e;if("number"==typeof e)return this.children[e];for(var t=0,n=this.children.length;n>t;t++)if(this.children[t].name===e)return this.children[t]},all:function(){return i(this)},addChild:function(e,t){return e instanceof o||(e=new o(e,t)),e.parent=this,this.children.push(e),e},clone:function(){return new o(this.ref,this.scope)},toCSS:function(e,t){if(t=t||"","property"===this.type){var n=/^@/.test(this.name)?" ":": ";return t+this.name+n+this.value+";"}if(!e||this.children.length){var r="",i="";this.name&&(r=t+this.name+" {\n",i=t+"}",t+="	");var o=r;return this.children.forEach(function(n){var r=n.toCSS(e,t);r&&(o+=r+"\n")}),o+=i}},toJSON:function(){return{t:this.type,n:this.name,v:this.value,c:this.children.map(function(e){return e.toJSON()})}},remove:function(e){if(this.parent){var t=this.parent.indexOf(this);this.parent.children.splice(t,1),this.parent=null}e||this.ref.remove()},property:function(e,t,n){var r;if(e instanceof o)r=e;else{var i=this.properties.filter(function(t){return t.name===e});r=i[i.length-1]}return"undefined"!=typeof t&&(r?(r.value=t,r.ref.value=t):r=this.addProperty(e,t,n)),r?r.value:void 0},section:function(e,t){var n=this.sections.filter(function(t){return t.name===e});return n["undefined"!=typeof t?t:n.length-1]},_inject:function(e){var t=new o(e,this.scope),n=e.parent.indexOf(e);return t.parent=this,this.children.splice(n,0,t),t},addProperty:function(e,t,n){return this._inject(this.ref.addProperty(e,t,n))},addSection:function(e,t){return this._inject(this.ref.addSection(e,t))}},Object.defineProperties(o.prototype,{normalName:{enumerable:!0,get:function(){return this._normalNameFor!==this.name&&(this._normalNameFor=this.name,this._normalName=r(this.name)),this._normalName}},root:{enumerable:!0,get:function(){for(var e=this;e&&e.parent;)e=e.parent;return e}},top:{enumerable:!0,get:function(){for(var e=this;e.parent&&!c.test(e.name);)e=e.parent;return e}},properties:{enumerable:!0,get:function(){return this.children.filter(function(e){return"property"===e.type})}},sections:{enumerable:!0,get:function(){return this.children.filter(function(e){return"property"!==e.type})}},selector:{enumerable:!0,get:function(){var e=this.name;return this._selector&&this._selectorName===e||(this._selector=s(e),this._selectorName=e),this._selector}},path:{enumerable:!0,get:function(){return new u(this)}}}),t.exports=o},{"./node-path":30,"livestyle-css-tree/lib/property":62,"livestyle-css-tree/lib/selector":67}],36:[function(e,t,n){"use strict";function r(e){return this instanceof r?void this.extend(e):new r(e)}var i=e("./utils");r.inheritProps={variables:!0,mixins:!0},r.prototype={clone:function o(e){var o=new r(this);return o.extend(e)},extend:function(e){if(!e)return this;var t=this;return Object.keys(e).forEach(function(n){var o=e[n];return n in r.inheritProps&&n in t&&"object"==typeof o?t[n]=i.extend(Object.create(t[n]),o):void(t[n]=o)}),this}},t.exports=r},{"./utils":57}],37:[function(e,t,n){"use strict";function r(e){for(var t,n=i(e.trim()),r=[],s=0,a=function(e){if(e=e.trim()){var t=null,n=e,i=e.match(o);i&&(t=i[1],n=e.substr(i[0].length));var a={name:t,value:n||null,raw:e};r.push(a),null===a.value&&s++}};t=n.next();)","===t?(a(e.substring(n.start,n.pos-1)),n.start=n.pos):n.skipQuoted();return a(n.current()),r.mandatory=s,r}var i=e("string-stream"),o=/(\$[\w\-]+)\s*(\:\s*)?/;t.exports.extract=function(e){for(var t,n=i(e),o="";t=n.next();)if("("==t){if(n.start=n.pos,n.backUp(1),n.skipToPair("(",")",!0)){n.backUp(1),o=n.current();break}throw new Error("Invalid mixin definition: "+e)}return o?r(o):[]},t.exports.split=r},{"string-stream":72}],38:[function(e,t,n){"use strict";function r(e){var t={};return e=e.replace(u,"").trim(),e=e.replace(/\(\s*(with|without)\s*:\s*(.+?)\)/,function(e,n,r){return t[n]=r.trim(),""}),t.name=e.trim(),t}function i(e,t){var n=/^@(\w+)/;if(e.without){if("all"==e.without)return t.root;for(;t.parent;){var r=t.name.match(n);if(!r)break;if(!~e.without.indexOf(r[1]))break;t=t.parent.top}return t}return"rule"===e["with"]?t.root:t}var o=e("./section"),s=e("./nesting"),a=e("../resolved-node"),u=/^@at\-root\b/;t.exports.resolve=function(e,t){if(!u.test(e.name))return!1;var n=t.parent.top,c=n.root,f=r(e.name);if(f.name)return o.resolve(e,t.clone({parent:n}),f.name),!0;n=i(f,n);var l=t.parent,p=new a(e.parent,t),h=t.clone({parent:p});return t.next(e,t.clone({parent:n}),function(e,t){if("property"===e.type)p.parent||n.addChild(p),t.transform(e,h);else if("rule"===f["with"]){var r=[l.name,e.name];o.resolve(e,t.clone({parent:c}),s.nameForPath(r))}else o.resolve(e,t)})}},{"../resolved-node":35,"./nesting":49,"./section":53}],39:[function(e,t,n){"use strict";function r(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function i(e){return e.children.some(function(e){return"property"===e.type||e.children.length})}t.exports=function(e){e._removed||(e._removed=[]);for(var t=e.all().filter(function(e){return"section"===e.type}),n=t.length-1;n>=0;n--)i(t[n])||(e._removed.push(t[n]),r(t[n].parent.children,t[n]));return e}},{}],40:[function(e,t,n){"use strict";function r(e){var t=u.parse(e);return Array.isArray(t)?t:[t]}function i(e,t,n){if(Array.isArray(e))return e.map(function(e){return i(e,t,n)});if("object"==typeof e){var r={};return Object.keys(e).forEach(function(o){var s=e[o];r[u.interpolate(o,t,n)]=i(s,t,n)}),r}return u.eval(e,t,n)}function o(e,t,n,r){Object.keys(t).forEach(function(i){var o=t[i];1==e.length?r.variables[e[0]]=i+" "+o:(r.variables[e[0]]=i,r.variables[e[1]]=o),n.children.forEach(function(e){r.transform(e,r)})})}function s(e,t,n,r){t.forEach(function(t){Array.isArray(t)||(t=[t]);for(var i=0,o=e.length;o>i;i++)r.variables[e[i]]=t[i]||"";n.children.forEach(function(e){r.transform(e,r)})})}function a(e,t,n){var r=u.parse(e);if("string"==typeof r&&h.test(r)){if(r=t.variables[r],!r)return c.error(new Error("Unable to resolve expression for @each section: "+e)),[];r=u.parse(r)}return"object"!=typeof r&&(r=[r]),i(r,t.variables,n)}var u=e("./expression"),c=e("../logger"),f=e("../source-hint"),l=/^@each\s/,p=/^@each\s+(.+?)\s*in\s*([^]+)$/,h=/^\$/;t.exports.resolve=function(e,t){if(!l.test(e.name))return!1;var n=e.name.match(p);if(!n)return!0;var i=f(t,e.range("name")),u=r(n[1]),c=a(n[2],t,i),h=t.clone({variables:{},rawVariables:{}});return Array.isArray(c)?s(u,c,e,h):o(u,c,e,h),!0}},{"../logger":29,"../source-hint":56,"./expression":41}],41:[function(e,t,n){"use strict";function r(e,t){if(t){var n=String(t.name||"");if("variable"===t.type&&"$"!==n[0])return;if("function"===t.type&&"-"!==n[0])return}f.warn(e)}function i(e){return p.create(e,r)}function o(e,t,n,r){"function"==typeof n&&(r=n,n=null);try{return r(e,i(t))}catch(o){var s='Unable to evaluate expression "'+e+'": '+o.message;f.error(n?n.error(s):new Error(s))}return null}function s(e,t,n){return o(e,t,n,u.eval)}function a(e,t,n){return o(e,t,n,u)}var u=e("livestyle-css-expression"),c=e("string-stream"),f=e("../logger"),l=e("../utils"),p=u.Context,h=/[\s,\(]/,v=/[\-\+\*\/=\!<>]/;t.exports.interpolate=function(e,t,n){if(!e)return e;var r=this.findTokens(e);if(!r.length)return e;var o=i(t);return r.reverse().forEach(function(t){var r=e.substring(t[0]+2,t[1]-1),i=s(r,o,n);i=null==i?r:t[2]&&i.quote?i.value:i.valueOf(),e=l.replaceSubstring(e,i,t)}),e},t.exports.eval=function(e,t,n){if(!e)return e;var r=i(t);e=this.interpolate(e,r);var o=a(e,r,n);return null===o?e:o},t.exports.findTokens=function(e){for(var t,n=[],r=c(e),i=[];t=r.next();)if('"'===t||"'"===t)i[i.length-1]===t?i.pop():i.push(t);else if("#"==t&&"{"==r.peek()){if(r.start=r.pos-1,!r.skipToPair("{","}",!0))return[];n.push([r.start,r.pos,!!i.length])}return n},t.exports.parse=function(e){if(e=e.trim(),!h.test(e))return[e];e=e.replace(/\s+/g," ");for(var t,n,r=[],i=[],o=c(e),s=function(e){var t=o.current(e).trim();t&&i.push(t),o.start=o.pos},a=function(){i.length&&r.push(1===i.length?i[0]:i),i=[]};n=o.next();)if(" "==n)if(v.test(o.peek())){for(;v.test(o.peek());)o.next();o.eatSpace()}else","===i.sep&&a(),s(!0),i.sep=" ";else if(","==n)" "!==i.sep&&(i.sep=","),s(!0),a(),o.eatSpace();else if("("==n){if(o.start=o.pos,o.backUp(1),!o.skipToPair("(",")",!0))throw new Error("Missing closing brace for opening one at pos:"+o.pos+' in "'+e+'"');t=o.current(!0),i.push(this.parseMap(t)||this.parse(t)),o.start=o.pos}else o.skipQuoted();return s(),a(),1===r.length?r[0]:r},t.exports.parseMap=function(e){for(var t,n,r=null,i=null,o=c(e.trim()),s=function(){r&&null!==i&&(t||(t={}),t[r]=i),r=i=null,o.start=o.pos};n=o.next();)if(":"===n)r=o.current(!0).trim(),i=null,o.start=o.pos;else if(","===n)i=o.current(!0).trim(),s();else if("("==n){if(o.backUp(1),o.start=o.pos,!o.skipToPair("(",")",!0))throw new Error("Missing closing brace for opening one at pos:"+o.pos+' in "'+e+'"');i=this.parse(o.current()),s(),o.start=o.pos}else o.skipQuoted();return i=o.current().trim(),s(),t}},{"../logger":29,"../utils":57,"livestyle-css-expression":1,"string-stream":72}],42:[function(e,t,n){"use strict";function r(e,t){var n=e.op||" ",r=t.op||" ";if(n!==r)return!1;var i=e.fragments,o=t.fragments,s=l.test(i[0])?i[0]:null,a=l.test(o[0])?o[0]:null;if(a&&s!==a)return!1;for(var u=a?1:0,c=o.length;c>u;u++)if(!~i.indexOf(o[u]))return!1;return!0}function i(e,t){for(var n=e.parts,i=t.parts[0],o=0,s=n.length;s>o;o++)if(r(n[o],i))return o;return null}function o(e,t,n){var r=e.clone();r.removeFragments(t),r.op=n.op;var i=r.fragments,o=n.fragments.slice(0),s=/^:/;l.test(o[0])&&(l.test(i[0])?i[0]=o.shift():i.unshift(o.shift()));for(var a=i.length,u=0,c=i.length;c>u;u++)if(s.test(i[u])){a=u;break}return o.forEach(function(e){~i.indexOf(e)||(s.test(e)?i.push(e):i.splice(a++,0,e))}),r.order()}function s(e,t){for(var n=0,r=Math.min(e.length,t.length);r>n;n++)if(!e[n].equals(t[n]))return e.slice(n);return[]}function a(e,t,n){var r={};e.forEach(function(e){r[e.toString()]=!0});var a=n.parts.slice(0),u=a.pop();a.length&&!a[0].op&&(a[0].op=" ");var f=[];return e.forEach(function(e){var n=i(e,t);if(null!==n){var l=e.parts.slice(0),p=o(l[n],t.parts[0],u);p.op||(p.op=" "),l[0].op||(l[0].op=" ");var h=[[].concat(l.slice(0,n),s(a,l),[p],l.slice(n+1))];a.push(p);for(var v=-1,d=a.length-1;d>=0;d--)if(" "===a[d].op){v=d;break}v>0&&h.push([].concat(a.slice(0,v),s(l.slice(0,n),a),a.slice(v),l.slice(n+1))),h.forEach(function(e){e=e.map(function(e){return e.toString()}).join(" "),e=new c.Selector(e);var t=e.toString();t in r||(r[t]=!0,f.push(e))})}}),e.concat(f)}function u(e){var t=/^%/;return e.fragments.some(function(e){return t.test(e)})}var c=e("livestyle-css-tree/lib/selector"),f=/\s+\!optional\s*$/,l=/^[a-z\-_]/i;t.exports.resolve=function(e,t){if("@extend"!==e.name)return!1;var n=c(t.parent.name).list,r=e.value.replace(f,"").trim();return c(r).list.forEach(function(e){e.parts.length>1||n.forEach(function(n){t.toExtend.push({selector:e,extendWith:n,node:t.parent})})}),!0},t.exports.postProcess=function(e,t){t.toExtend.forEach(function(e){e.node.top.sections.forEach(function(t){if(!/^@/.test(t.name)){var n=c(t.name).list,r=a(n,e.selector,e.extendWith);t.name=r.join(", ")}})}),this.removeExtendOnly(e)},t.exports.removeExtendOnly=function(e){var t=this,n=function(e){return!u(e)};e.sections.reverse().forEach(function(e){var r=c(e.name).list.filter(n);return r.length?(e.name=r.map(function(e){return e.toString()}).join(", "),void t.removeExtendOnly(e)):e.remove(!0)})}},{"livestyle-css-tree/lib/selector":67}],43:[function(e,t,n){"use strict";var r=e("./expression"),i=e("../source-hint"),o=e("../logger"),s=/^@for\s+(\$\w+)\s+from\s+(.+?)\s+(through|to)\s+(.+)$/;t.exports.resolve=function(e,t){var n=e.name.match(s);if(!n)return!1;var a,u,c;try{a=n[1];var f=i(t,e.range("name"));u=parseFloat(r.eval(n[2],t.variables,f)),c=parseFloat(r.eval(n[4],t.variables,f))}catch(l){return o.error(l),!0}if(isNaN(u))return o.error(new Error("Start condition in @for loop is not a number")),!0;if(isNaN(c))return o.error(new Error("Start condition in @for loop is not a number")),!0;for(var p=t.clone({variables:{},rawVariables:{}});"to"===n[3]?c>u:c>=u;)p.variables[a]=u,t.next(e,p),u++;return!0}},{"../logger":29,"../source-hint":56,"./expression":41}],44:[function(e,t,n){"use strict";function r(e,t,n,r){return function(){var i=a.extend(Object.create(this._scope),n),o=a.toArray(arguments);return t.some(function(e){return"..."===e.value?i[e.name]=o:void(i[e.name]=o.length?o.shift():e.value)}),s.eval(e,i,r)}}var i=e("./arguments"),o=e("./variable"),s=e("./expression"),a=e("../utils"),u=e("../source-hint"),c=/^@function\s+([\w\-]+)/;t.exports.resolve=function(e,t){var n=e.name.match(c);if(!n)return!1;var s=n[1].trim(),a=i.extract(e.name),f=t.clone({variables:{}}),l=null;return e.children.forEach(function(e){if("@return"===e.name){var n=u(t,e.range("value"));l=r(e.value,a,f.variables,n)}else o.resolve(e,f)}),l&&[s,s.replace(/\-/g,"_"),s.replace(/_/g,"-")].forEach(function(e){t.variables[e]=l}),!0}},{"../source-hint":56,"../utils":57,"./arguments":37,"./expression":41,"./variable":54}],45:[function(e,t,n){"use strict";function r(e){var t={"if":[],"else":null};t["if"].push({expr:e.name.replace(a,"").trim(),node:e});for(var n,r,i=e.parent.children,o=i.indexOf(e)+1,s=i.length;s>o;o++){if(n=i[o],r=n.name,!u.test(r)){if(c.test(r)){t["else"]=n;break}break}t["if"].push({expr:r.replace(u,"").trim(),node:n})}return t}function i(e,t){for(var n,i=r(e),a=s(t,e.range("name")),u=0,c=i["if"].length;c>u;u++)if(n=o.eval(i["if"][u].expr,t.variables,a),t.isTrue(n))return i["if"][u].node;return i["else"]}var o=e("./expression"),s=e("../source-hint"),a=(e("../logger"),/^@if\b/),u=/^@else\s+if\b/,c=/^@else\b/;t.exports.resolve=function(e,t){var n=e.name;if(u.test(n)||c.test(n))return!0;if(!a.test(n))return!1;var r=i(e,t);return r&&t.next(r,t),!0}},{"../logger":29,"../source-hint":56,"./expression":41}],46:[function(e,t,n){"use strict";var r=e("./expression"),i=e("../source-hint"),o=e("../dependency/import"),s=e("../resolved-node"),a=e("../path"),u=/^@import$/i;t.exports.resolve=function(e,t){if(!u.test(e.name))return!1;var n=this,a=i(t,e.range("value"));return o.parse(e.value).forEach(function(i){if(i.mq||/\.css$/i.test(i.url)){var o=new s(e,t);o.value="url("+i.url+")",i.mq&&(o.value+=" "+i.mq),o.value=r.interpolate(o.value,t.variables,a),t.parent.addChild(o)}else t.dependency.inject([i.url,n.altUrl(i.url)],t)}),!0},t.exports.altUrl=function(e){return/\.\w+$/.test(e)?void 0:(a.dirname(e),"_"+a.basename(e))}},{"../dependency/import":14,"../path":33,"../resolved-node":35,"../source-hint":56,"./expression":41}],47:[function(e,t,n){"use strict";function r(e,t,n){return-1===e.indexOf("$")?e:i.interpolate(e,t.variables,n).replace(/\$[\w\-]+/g,function(e){return t.variables[e]||""}).trim()}var i=e("./expression"),o=e("../source-hint"),s=e("../resolved-node"),a=/@media\s*/i;t.exports.resolve=function(e,t){if(!a.test(e.name))return!1;for(var n,i=o(t,e.range("name")),u=[r(e.name.replace(a,""),t,i)],c=e.parent;c;)n=c.name,a.test(n)&&u.unshift(n.replace(a,"")),c=c.parent;var f=new s(e,t);f.name="@media "+u.join(" and "),t.parent.root.addChild(f);for(var l=t.parent;l&&l.name&&a.test(l.name);)l=l.parent;if(l){var p=l.name;l=l.clone(),l.name=p,f.addChild(l)}else l=f;return t.next(e,t.clone({parent:l}))}},{"../resolved-node":35,"../source-hint":56,"./expression":41}],48:[function(e,t,n){"use strict";function r(e,t){var n=Object.create(t),r=[];return Object.keys(e.context).forEach(function(i){var o=e.context[i];o&&(o=s.eval(Array.isArray(o)?o.join(", "):o,t)),n[i]=o,r.push({name:i,value:o})}),n.$args=r,n}function i(e,t){if(t.mixinContent){var n=t.mixinContentScope.clone({parent:t.parent});t.mixinContent.forEach(function(e){t.transform(e,n)})}}function o(e,t){var n=new u(t.parent.root.ref,t),i=new u(t.parent.ref,t);i.name=t.parent.name,n.addChild(i);var o=t.clone({variables:r(e,t.variables),rawVariables:{},mixinContent:e.content,mixinContentScope:t});t.next(e.node,o.clone({parent:i}));var s=n.children.slice(1);return i.children.forEach(function(e){o.parent.addChild(e)}),s.forEach(function(e){o.parent.top.addChild(e)}),{mixin:e,output:i.children.concat(s)}}var s=e("./expression"),a=e("./arguments"),u=e("../resolved-node"),c=/^@mixin\s+([\w\-]+)/,f=/^@include/;t.exports.resolve=function(e,t){var n=e.name;if(c.test(n)){var r=this.parse(e);return t.mixins[r.name]=r,!0}if("@content"===n)return i(e,t),!0;if(f.test(n)){var r=this.mixinForInclude(e,t.mixins);return r&&e.data("resolvedMixins",[o(r,t)]),!0}return!1},t.exports.mixinForInclude=function(e,t){var n="section"===e.type?e.name:e.value;n=n.replace(/^@include\s*/,"");var r=n.split("(",1)[0].trim(),i=t[r];if(!i)return null;var o=a.extract(n),s={};o.forEach(function(e){e.name&&(s[e.name]=e.value)});var u={};return i.args.forEach(function(e,t){var n=e.value;"..."===n?n=o.slice(t).map(function(e){return e.value}):e.name in s?n=s[e.name]:o[t]&&(n=o[t].name||o[t].value),u[e.name]=n}),{name:i.name,args:i.args,node:i.node,context:u,content:"section"===e.type?e.children:null}},t.exports.parse=function(e){var t=c.exec(e.name);return{name:t[1].trim(),args:a.extract(e.name),node:e}}},{"../resolved-node":35,"./arguments":37,"./expression":41}],49:[function(e,t,n){"use strict";function r(e){var t=[];if(-1===e.indexOf("&"))return t;for(var n,r=l(e);n=r.next();)"&"===n?t.push([r.pos-1,r.pos]):r.skipQuoted();return t}function i(e,t){for(var n=[],r=0,i=t.length;i>r;r++)n.push(t[r]+" "+e);return n}function o(e){var t=[];return e.forEach(function(e){~t.indexOf(e)||t.push(e)}),t}function s(e,t){var n=function r(n,i){for(var o,s=0,a=t.length;a>s;s++)o=i.slice(0),o.unshift(s),i.length<e.length?r(n,o):n.push(i);return n};return n([],[])}function a(e){if(e=e.map(function(e){return o(e)}),1==e.length)return e[0];var t=0;e.forEach(function(e){e.length>t&&(t=e.length)});for(var n=[],r=0;t>r;r++)for(var i=0,s=e.length;s>i;i++)e[i][r]&&n.push(e[i][r]);return n}function u(e,t,n){for(var o=[],u=[],c=0,f=e.length;f>c;c++)if(u=r(e[c]),u.length){var l=s(u,t);o[c]=[];for(var h,v,d=0,m=l.length;m>d;d++){h=l[d],v=e[c];for(var g=h.length-1;g>=0;g--)v=p.replaceSubstring(v,t[h[g]],u[g]);o[c].push(v)}}else o[c]=i(e[c],t);return a(o)}function c(e){var t=f(e).list.map(function(e){return e.toString()});return t.length?t:[""]}var f=e("livestyle-css-tree/lib/selector"),l=e("string-stream"),p=e("../utils");t.exports.nameForPath=function(e){for(var t,n=0,r=c(e[n++]);n<e.length;)t=c(e[n++]),r=u(t,r);return r.map(function(e){return e.toString().trim()}).join(", ")}},{"../utils":57,"livestyle-css-tree/lib/selector":67,"string-stream":72}],50:[function(e,t,n){"use strict";var r=e("./expression"),i=e("./property"),o=e("../source-hint"),s=/:$/;t.exports.resolve=function(e,t){if("section"!==e.type||!s.test(e.name))return!1;var n=o(t,e.range("name")),a=e.name.replace(/\s*:$/,"-");return a=r.interpolate(a,t.variables,n),t.next(e,t,function(e){if("property"===e.type){var n=i.resolve(e,t);n.name=a+n.name}})}},{"../source-hint":56,"./expression":41,"./property":51}],51:[function(e,t,n){"use strict";var r=e("../resolved-node"),i=e("./expression"),o=e("../source-hint");t.exports.resolve=function(e,t){if("property"!==e.type)return!1;var n=Object.create(t.variables);n["%magic-div"]=2;var s=new r(e,t);return s.name=i.interpolate(e.name,n,o(t,e.range("name"))),s.value=i.eval(e.value,n,o(t,e.range("value"))),t.parent.addChild(s),s}},{"../resolved-node":35,"../source-hint":56,"./expression":41}],52:[function(e,t,n){"use strict";function r(e){var t=[];return f.imports(e).forEach(function(e){if(!/\.css$/i.test(e.url)&&f.isDependency(e)){t.push(e.url);var n=v.altUrl(e.url);n&&t.push(n)}}),u.unique(t)}var i=e("livestyle-css-tree"),o=e("../resolved-node"),s=e("../preprocessor-patcher"),a=e("../scope"),u=(e("../path"),e("../utils")),c=e("../cache"),f=e("../dependency/import"),l=e("../dependency/resolver"),p=e("./extend"),h=e("./cleanup"),v=e("./import"),d=[e("./variable"),v,p,e("./function"),e("./mixin"),e("./property-set"),e("./media-query"),e("./at-root"),e("./if"),e("./for"),e("./while"),e("./each"),e("./section"),e("./property")];t.exports=function(e,n,s){if("function"==typeof n&&(s=n,n={}),e instanceof o)return s(null,e);try{e=i(e)}catch(f){return s(f)}n=n||{};var v=new o(e),m=l(v,u.extend({ext:".scss",stylesheetResolver:t.exports},n));return v.scope=new a({syntax:"scss",parent:v,uri:n.uri,dependency:m,variables:{"true":!0,"false":!1},rawVariables:{},mixins:{},toExtend:[],isTrue:function(e){return e!==!1&&"false"!==e&&null!==e&&"null"!==e},transform:function(e,t){for(var n=0,r=d.length;r>n&&!d[n].resolve(e,t);n++);return this},next:function(e,t,n){return n=n||this.transform,e.children.forEach(function(e){n.call(this,e,t)}),this}}),c.add(n.uri,v,n.hash),m.fetch(r(e),function(){m.globals().forEach(function(e){m.inject(e,v.scope)}),v.scope.next(e,v.scope),p.postProcess(v,v.scope),s(null,h(v))}),v},t.exports.applyPatch=function(e,t){return s(e,t)}},{"../cache":12,"../dependency/import":14,"../dependency/resolver":15,"../path":33,"../preprocessor-patcher":34,"../resolved-node":35,"../scope":36,"../utils":57,"./at-root":38,"./cleanup":39,"./each":40,"./extend":42,"./for":43,"./function":44,"./if":45,"./import":46,"./media-query":47,"./mixin":48,"./property":51,"./property-set":50,"./section":53,"./variable":54,"./while":55,"livestyle-css-tree":59}],53:[function(e,t,n){"use strict";var r=e("./expression"),i=e("./nesting"),o=e("../resolved-node"),s=e("../source-hint");t.exports.resolve=function(e,t,n){if("section"!==e.type)return!1;var a=new o(e,t),u=[];return t.parent.name&&!/^@media|@supports/.test(t.parent.name)&&u.push(t.parent.name),n=n||e.name,u.push(r.interpolate(n,t.variables,s(t,e.range("name")))),a.name=i.nameForPath(u),t.parent.top.addChild(a),t.next(e,t.clone({parent:a}))}},{"../resolved-node":35,"../source-hint":56,"./expression":41,"./nesting":49}],54:[function(e,t,n){"use strict";var r=e("./expression"),i=e("../source-hint"),o=/^\$/;t.exports.resolve=function(e,t){if(o.test(e.name)){i(t,e.range("value"));return t.variables[e.name]=r.eval(e.value,t.variables),t.rawVariables[e.name]=e.value,!0}}},{"../source-hint":56,"./expression":41}],55:[function(e,t,n){"use strict";var r=e("./expression"),i=e("../logger"),o=/^@while\s+/;t.exports.resolve=function(e,t){if(!o.test(e.name))return!1;var n=e.name.replace(o,"").trim(),s=1e4;try{for(var a;s--&&(a=r.eval(n,t.variables),t.isTrue(a));)t.next(e,t)}catch(u){i.error("Unable eval to @while expression: "+n,u)}return!0}},{"../logger":29,"./expression":41}],56:[function(e,t,n){"use strict";function r(e,t,n,r,i){Error.call(this,e,t,n),this.name=this.constructor.name,this.message=e,this.fileName=t,this.lineNumber=n,this.columnNumber=r,this.hint=i}function i(e){return e.parent.root.ref._source}function o(e,t){return this instanceof o?(this.scope=e,this.range=t,void(this._location=null)):new o(e,t)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.toString=function(){var e=this.message+"\n";return this.fileName&&(e+="in "+this.fileName+" "),e+"at line: "+this.lineNumber+", column: "+this.columnNumber+"\n"+this.hint},o.EvaluationError=r,o.prototype={error:function(e){var t=this.location;return new r(e,this.scope.uri||"",t.line,t.col,t.hint)}},Object.defineProperties(o.prototype,{location:{enumerable:!0,get:function(){return this._location||(this._location=i(this.scope).location(this.range.start)),this._location}}}),t.exports=o},{}],57:[function(e,t,n){"use strict";var r=e("string-stream"),i={"(":")","{":"}","[":"]"};t.exports.replaceSubstring=function(e,t,n,r){return Array.isArray(n)&&(r=n[1],n=n[0]),"undefined"==typeof r&&(r=n),0>n||n>e.length?e:e.substring(0,n)+t+e.substring(r)},t.exports.toArray=function(e,t){return Array.prototype.slice.call(e,t||0)},t.exports.extend=function(e){for(var t,n=1,r=arguments.length;r>n;n++)arguments[n]&&(t=arguments[n],Object.keys(t).forEach(function(n){e[n]=t[n]}));return e},t.exports.unique=function(e){var t=[];return e.filter(function(e){return~t.indexOf(e)?!1:(t.push(e),!0)})},t.exports.split=function(e){for(var t,n=[],o=r(e);t=o.next();)","!==t?t in i?(o.backUp(1),o.skipToPair(t,i[t],!0)):o.skipQuoted():(n.push(o.current(!0).trim()),o.start=o.pos);return n.push(o.current().trim()),n.filter(function(e){return!!e})}},{"string-stream":72}],58:[function(e,t,n){"use strict";function r(e){return"string"==typeof e&&(e={syntax:e}),a.extend({},l,e)}function i(e){if(!(e in f))throw new Error('Syntax "'+e+'" is not supported')}var o=(e("./lib/resolved-node"),e("./lib/patch")),s=e("./lib/diff"),a=e("./lib/utils"),u=e("./lib/cache"),c=e("./lib/logger"),f={css:e("./lib/css/resolver"),less:e("./lib/less/resolver"),scss:e("./lib/scss/resolver")},l={syntax:"css"};t.exports.resolve=function(e,t,n){return"function"==typeof t&&(n=t,t={}),t=r(t),i(t.syntax),this.resolver(t.syntax)(e,t,n)},t.exports.diff=function(e,t){return s(e,t)},t.exports.patch=function(e,t,n){return n=r(n),i(n.syntax),t instanceof o||(t=new o(t)),this.resolver(n.syntax).applyPatch(e,t),e},t.exports.condensePatches=function(e){return o.condense(e)},t.exports.resolver=function(e){return f[e]},t.exports.supports=function(e){return e in f},t.exports.syntaxes=function(){return Object.keys(f)},t.exports.cache=u,t.exports.logger=c},{"./lib/cache":12,"./lib/css/resolver":13,"./lib/diff":16,"./lib/less/resolver":26,"./lib/logger":29,"./lib/patch":31,"./lib/resolved-node":35,"./lib/scss/resolver":52,"./lib/utils":57}],59:[function(e,t,n){"use strict";function r(e){for(var t,n=m.lex(e),r=0,i=0,o=n.length;o>i;i++)t=n[i],t.range=g(r,t.value),r=t.range.end;return n}function i(e,t,n){n=n||E|O;var r,i=t.substring(e);return n&E&&(r=i.match(k))&&(e.start+=r[0].length),n&O&&(r=i.match(w))&&(e.end-=r[0].length),e.end<e.start&&(e.end=e.start),e}function o(e){for(var t;(t=e.current())&&(t.type in _||";"===t.type);)e.next();return e}function s(e,t){var n,r,s,a,u=e.current();if(!u||!o(e).hasNext())return null;u=e.current(),n=u.range.clone();for(var c="@"===u.type;u=e.next();)if(n.end=u.range.end,"white"===u.type&&e.hasNext()&&":"===e.peek().type&&(u=e.next()),":"===u.type||"white"===u.type){if(n.end=u.range.start,e.next(),":"==u.type||c)break}else if(";"==u.type||"line"==u.type){n.end=u.range.start,r=g(u.range.start,0),";"===u.type&&(s=g(u.range.start,u.value)),e.next();break}if(u=e.current(),!r&&u)for("line"==u.type&&(a=u),r=u.range.clone();u=e.next();)if(r.end=u.range.end,"line"==u.type)a=u;else{if("}"==u.type||";"==u.type){r.end=u.range.start,";"==u.type&&(s=u.range.clone()),e.next();break}if(":"==u.type&&a){r.end=a.range.start,e._i=e.tokens.indexOf(a);break}}return r||(r=g(n.end,0)),{name:i(n,t),value:i(r,t,E|(s?O:0)),end:s||g(r.end,0)}}function a(e,t){var n=e.substring(t).replace(w,"");if(!n)return[];for(var i,o,a=b(r(n,t)),u=x(n),c=[];i=s(a,u);)o=new h(e,{name:i.name.shift(t.start),value:i.value.shift(t.start),between:g.fromIndex(i.name.end,i.value.start),after:i.end.shift(t.start)}),c.push(o);return c}function u(e,t,n){
for(var r=t.end-1,i=n.valueOf();r>0&&/\s/.test(i[r-1]);)r--;var o=new p(n,{name:g.fromIndex(t.start,t._selectorEnd),between:g.fromIndex(t._selectorEnd,t._contentStart+1),value:g.fromIndex(t._contentStart+1,r),after:g.fromIndex(r,t.end)});return o.parent=e,e.children.push(o),o}function c(e){for(var t,n=e._source,r=0,i=e.children.length;i>r;r++)if(t=e.children[r],t.children.length)c(t);else{t.children=a(n,t.range("value"));for(var o=0,s=t.children.length;s>o;o++)t.children[o].parent=t}var u="root"===e.type?e.range("full"):e._ranges.value,f=u.start,l=e.children.map(function(e){var t=e.range("self"),n=g.fromIndex(f,t.start);return f=t.end,n});l.push(g.fromIndex(f,u.end));for(var p,r=l.length-1;r>=0;r--){p=a(n,l[r]);for(var o=p.length-1;o>=0;o--)p[o].parent=e,e.children.splice(r,0,p[o])}return e.children.sort(function(e,t){return e.range("name").start-t.range("name").start}),e}function f(e){var t=x(e.src),n=function r(e){var n={};if(e.r)for(var i in e.r)n[i]=g(e.r[i]);var o;if("root"===e.t)o=new l(t);else if("section"===e.t)o=new p(t,n);else{if("property"!==e.t)throw new Error("Unknown node type: "+e.t);o=new h(t,n)}return e.c&&e.c.forEach(function(e){e=r(e),e.parent=o,o.children.push(e)}),o};return n(e)}var l=e("./lib/root"),p=e("./lib/section"),h=e("./lib/property"),v=e("./lib/node"),d=e("./lib/selector"),m=e("./lib/css-tokenizer"),g=e("./lib/range"),x=e("./lib/source"),b=e("./lib/token-iterator"),y=e("./lib/section-parser"),k=/^\s+/,w=/\s+$/,_={white:1,line:1,comment:1},E=1,O=2;t.exports=function(e){if(e instanceof v)return e;if("object"==typeof e)return f(e);e=e||"";var t=x(e),n=new l(t),r=function(e,r){for(;r;){if(r.range("self").contains(e))return u(r,e,t);r=r.parent}return u(n,e,t)},i=y.sections(e),o=n;return i.forEach(function(e){o=r(e,o)}),c(n)},t.exports.Source=x,t.exports.SelectorDeclaration=d,t.exports.parseSelector=function(e){return new d(e)}},{"./lib/css-tokenizer":60,"./lib/node":61,"./lib/property":62,"./lib/range":63,"./lib/root":64,"./lib/section":66,"./lib/section-parser":65,"./lib/selector":67,"./lib/source":68,"./lib/token-iterator":69}],60:[function(e,t,n){"use strict";function r(e){return 1e7<r.count++&&u("Infinite loop detected"),e}function i(e,t){return t=t||e.charCodeAt(0),t>=97&&122>=t||t>=65&&90>=t||t>=1024&&1279>=t||"&"===e||"_"===e||"<"===e||">"===e||"="===e||"-"===e}function o(e,t){return t=t||e.charCodeAt(0),t>=48&&57>=t}function s(e,t){y.tokens.push({value:e,type:t||e,range:null})}function a(e,t){var n=e.substring(0,t+1).replace(/\r\n?/g,"\n");e=e.replace(/\r\n?/g,"\n");for(var r=n.split("\n"),i=(r[r.length-1]||"").length,o=e.split("\n")[r.length-1]||"",s=100,a=Math.max(0,i-s),u=o.substr(a,2*s)+"\n",c=0;i-a-1>c;c++)u+="-";return u+="^",{line:r.length,ch:i,text:o,hint:u}}function u(e){var t=c(e),n=new Error(t.message,"",t.line);throw n.line=t.line,n.ch=t.ch,n.name=t.name,n.hint=t.hint,n}function c(e){var t=k.posStack.length?k.popToken():k.chnum,n=a(k.source,t+k.offset);y.tokens;y.tokens=null;var r="CSS parsing error at line "+n.line+", char "+n.ch+": "+e;return r+="\n"+n.hint,{name:"ParseError",message:r,hint:n.hint,line:n.line,ch:n.ch}}function f(){for(var e=k.ch,t="";r(" "===e||"	"===e);)t+=e,e=k.nextChar();r.count=0,s(t,"white")}function l(){var e,t=k,n=t.ch,i=n;if(e=t.nextChar(),"/"===e){for(;r(n&&!("\n"===e||"\r"===e));)i+=e,n=e,e=t.nextChar();r.count=0}else{if("*"!==e)return s(i,i);for(;r(n&&!("*"===n&&"/"===e));)i+=e,n=e,e=t.nextChar();r.count=0}i+=e,t.nextChar(),s(i,"comment")}function p(){var e,t=k,n=t.ch,i=n,o=n;t.chnum;for(t.pushToken(),n=t.nextChar();r(n!==i);)n||u("Unterminated string"),"\n"===n?(e=t.nextChar(),"\\"===e?o+=n+e:u("Unterminated string")):o+="\\"===n?n+t.nextChar():n,n=t.nextChar();return r.count=0,o+=n,t.popToken(),o}function h(){var e=p();k.nextChar(),s(e,"string")}function v(){var e,t=k.ch;for(k.pushToken(),e=k.nextChar();"`"!==e;)e||u("Unterminated backtick"),t+=e,e=k.nextChar();t+=e,k.popToken(),k.nextChar(),s(t,"backtick")}function d(){var e=k,t=e.ch,n=1,i=t,o=!1;for(e.pushToken(),t=e.nextChar();r(t&&!o);)"("===t?n++:")"===t?(n--,n||(o=!0)):'"'===t||"'"===t?t=p():""===t&&u("Unterminated brace"),i+=t,t=e.nextChar();r.count=0,n&&u("Unterminated brace"),e.popToken(),s(i,"brace")}function m(e){var t=k.ch,n=e?e+t:t;t=k.nextChar();for(var a=t.charCodeAt(0);r(i(t,a)||o(t,a));)n+=t,t=k.nextChar(),a=t.charCodeAt(0);r.count=0,s(n,"identifier")}function g(){var e,t=k,n=t.ch,i=n,a="."===i;if(n=t.nextChar(),e=!o(n),a&&e)return s(i,".");if("-"===i&&e)return m("-");for(;r(""!==n&&(o(n)||!a&&"."===n));)"."===n&&(a=!0),i+=n,n=t.nextChar();r.count=0,s(i,"number")}function x(){var e=k,t=e.ch,n=t,r=e.nextChar();return"="===r&&w(n,!0)?(n+=r,s(n,"match"),void e.nextChar()):void s(n,n)}function b(){var e=k.ch;return" "===e||"	"===e?f():"/"===e?l():'"'===e||"'"===e?h():"`"===e?v():"("===e?d():"-"===e||"."===e||o(e)?g():i(e)?m():w(e)?x():"\r"===e?("\n"===k.peek()&&(e+=k.nextChar()),s(e,"line"),void k.nextChar()):"\n"===e?(s(e,"line"),void k.nextChar()):void u("Unrecognized character '"+e+"'")}var y={tokens:null},k={init:function(e,t){this.source=e,this.ch="",this.chnum=-1,this.posStack=[],this.offset=t||0,this.nextChar()},pushToken:function(){this.posStack.push(this.chnum)},popToken:function(){return this.posStack.pop()},nextChar:function(){return this.ch=this.source[++this.chnum]||""},peek:function(){return this.source[this.chnum+1]||""}};r.count=0;var w=function(){for(var e="{}[]()+*=.,;:>~|\\%$#@^!".split(""),t="*^|$~".split(""),n={},r={},i=0;i<e.length;i+=1)n[e[i]]=!0;for(i=0;i<t.length;i+=1)r[t[i]]=!0;return function(e,t){return t?e in r:e in n}}();t.exports.lex=function(e,t){if(k.init(e,t),y.tokens=[],e)for(;k.ch;)r.count=0,b();else y.tokens.push(this.white());var n=y.tokens;return y.tokens=null,n},t.exports.parse=function(e,t){for(var n,r=this.lex(e,t),i=0,o=0,s=r.length;s>o;o++)n=r[o],n.start=i,n.end=i+=n.value.length;return r},t.exports.white=function(){return{value:"",type:"white",start:0,end:0}},t.exports.toSource=function(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r},t.exports.getPosInfo=a},{}],61:[function(e,t,n){"use strict";function r(e){var t=[];return e.forEach(function(e){e&&!~t.indexOf(e)&&t.push(e)}),t}function i(e){for(var t=[],n=e;n=n.parent;)t.push(n._ranges.value,n._ranges.full);return r(t)}function o(e,t,n){"string"==typeof t&&(t=e.range(t));var r=u(e),i=-1;return r.some(function(e,n){return e.equal(t)?(i=n,!0):void 0}),~i?r.slice(i+1):n?r.filter(function(e){return e.start>=t.start}):[]}function s(e,t){var n=e.parent;if(n)for(var r=n.indexOf(e)+1,i=n.children.length;i>r;r++)t(n.children[r],r)}function a(e,t){var n=[];t&&(n=n.concat(o(e,t,!0))),s(e,function(e){n=n.concat(c(e))});for(var i=e.parent,a=function(e){n=n.concat(c(e))};i;)n=n.concat(o(i,"value")),s(i,a),i=i.parent;return r(n)}function u(e){return"root"===e.type?[]:v.map(function(t){return e.range(t)})}function c(e){var t=u(e);return e.all().forEach(function(e){t=t.concat(u(e))}),t}function f(e,t){return t=t||[],e.children.forEach(function(e){t.push(e),f(e,t)}),t}function l(e,t,n){this._ranges=t||{},this._source=e,this.children=[],this.type=n||"node",this.parent=null,this._data={}}var p=e("./range"),h=e("./source"),v=["before","name","between","value","after"];l.prototype={range:function(e){var t,n,r,i;if(!this._ranges[e])switch(e){case"full":return t=this.range("before"),n=this.range("after"),p.fromIndex(t.start,n.end);case"self":return t=this.range("name"),n=this.range("after"),p.fromIndex(t.start,n.end);case"before":var o=this.parent.indexOf(this);return r=0===o?this.parent===this.root?0:this.parent.range("between").end:this.parent.children[o-1].range("after").end,i=this.range("name").start,this._ranges[e]=p.fromIndex(r,i)}return this._ranges[e]},data:function(e,t){return arguments.length>1&&(this._data[e]=t),this._data[e]},indexOf:function(e){return this.children.indexOf(this.get(e))},get:function(e){if(e instanceof l)return e;if("number"==typeof e)return this.children[e];for(var t=0,n=this.children.length;n>t;t++)if(this.children[t].name===e)return this.children[t]},all:function(){return f(this)},clone:function(){var e={},t=Number.POSITIVE_INFINITY;return v.forEach(function(n){e[n]=this.range(n).clone(),e[n].start<t&&(t=e[n].start)},this),v.forEach(function(n){e[n].shift(-t)}),new this.constructor(h(this.valueOf()),e,this.type)},insert:function(e,t){t=this._resolveIndex(t||0);var n=this.children.length;if(0>t||t>n)throw new Error("Index "+t+" is out of range");var r=-1;r=this.children[t]?this.children[t].range("full").start:this.range("value").end;var i=e.valueOf();e._source!==this._source&&(c(e).forEach(function(e){e.shift(r)}),e._source=this._source),this._replaceRange(p(r,0),i);for(var o=function(e){e.shift(i.length)},s=t,a=this.children.length;a>s;s++)c(this.children[s]).forEach(o);return this.children.splice(t,0,e),e.parent=this,e},remove:function(){if(!this.parent)return this;var e=this.parent,t=e.indexOf(this);return~t?(this._replaceRange(this.range("full"),""),e.children.splice(t,1),this):this},valueOf:function(e){var t=this._rangeValue("full");return e&&(t=t.trim()),t},toString:function(){return this.valueOf()},toJSON:function(){var e={},t=this;return v.forEach(function(n){t._ranges[n]&&(e[n]=t._ranges[n].toJSON())}),{r:e,t:this.type,c:this.children.map(function(e){return e.toJSON()})}},_resolveIndex:function(e){var t=this.children.length;return"first"===e?0:"last"===e?t:0>e?e+t:e},_rangeValue:function(e){return"string"==typeof e&&(e=this.range(e)),this._source.substring(e)},_replaceRange:function(e,t){t=t||"","string"==typeof e&&(e=this.range(e)),this._source.update(e,t);var n=t.length-e.length;n&&(i(this).forEach(function(e){e&&(e.end+=n)}),a(this,e).forEach(function(t){t.start>=e.start?(t.start+=n,t.end+=n):t.end>=e.start&&(t.end+=n)}))},_dumpRanges:function(){var e=this._ranges,t=this;return Object.keys(e).map(function(n){return n+" ("+e[n].start+":"+e[n].end+') "'+t._rangeValue(n)+'"'}).join("\n")}};var d={root:{enumerable:!0,get:function(){for(var e=this;e&&e.parent;)e=e.parent;return e}},source:{enumerable:!0,get:function(){return this._source}}};v.forEach(function(e){d[e]={enumerable:!0,get:function(){return this._rangeValue(e)},set:function(t){var n=this.range(e);this._replaceRange(n,t),n.end=n.start+t.length}}}),Object.defineProperties(l.prototype,d),t.exports=l},{"./range":63,"./source":68}],62:[function(e,t,n){"use strict";function r(e,t){return this instanceof i?void i.call(this,e,t,"property"):new r(e,t)}var i=e("./node"),o=e("./utils");t.exports=o.inherit(r,i)},{"./node":61,"./utils":70}],63:[function(e,t,n){"use strict";function r(e,t,n){switch(n){case"eq":case"==":return e===t;case"lt":case"<":return t>e;case"lte":case"<=":return t>=e;case"gt":case">":return e>t;case"gte":case">=":return e>=t}}function i(e,t){"object"==typeof e&&"start"in e?(this.start=Math.min(e.start,e.end),this.end=Math.max(e.start,e.end)):Array.isArray(e)?(this.start=e[0],this.end=e[1]):(t="string"==typeof t?t.length:+t,this.start=e,this.end=e+t)}i.prototype={equal:function(e){return this.cmp(e,"eq","eq")},shift:function(e){return this.start+=e,this.end+=e,this},overlap:function(e){return e.start<=this.end&&e.end>=this.start},intersection:function(e){if(this.overlap(e)){var t=Math.max(e.start,this.start),n=Math.min(e.end,this.end);return new i(t,n-t)}return null},union:function(e){if(this.overlap(e)){var t=Math.min(e.start,this.start),n=Math.max(e.end,this.end);return new i(t,n-t)}return null},inside:function(e){return this.cmp(e,"lte","gt")},contains:function(e){return this.cmp(e,"lt","gt")},include:function(e){return this.cmp(e,"lte","gte")},cmp:function(e,t,n){var o,s;return e instanceof i?(o=e.start,s=e.end):o=s=e,r(this.start,o,t||"<=")&&r(this.end,s,n||">")},substring:function(e){return this.length>0?e.substring(this.start,this.end):""},clone:function(){return new i(this.start,this.length)},toArray:function(){return[this.start,this.end]},toJSON:function(){return this.toArray()},toString:function(){return this.valueOf()},valueOf:function(){return"{"+this.start+", "+this.length+"}"}},Object.defineProperty(i.prototype,"length",{enumerable:!0,get:function(){return Math.abs(this.end-this.start)}}),t.exports=function(e,t){return"undefined"==typeof e||null===e?null:e instanceof i?e:(Array.isArray(e)?(t=e[1]-e[0],e=e[0]):"object"==typeof e&&"start"in e&&"end"in e&&(t=e.end-e.start,e=e.start),new i(e,t))},t.exports.isRange=function(e){return e instanceof i},t.exports.fromIndex=function(e,n){return"number"==typeof e&&"number"==typeof n&&(n-=e),t.exports(e,n)},t.exports.sort=function(e,t){return e=e.sort(function(e,t){return e.start-t.start||t.end-e.end}),t&&e.reverse(),e}},{}],64:[function(e,t,n){"use strict";function r(e){return this instanceof r?(i.call(this,e,{},"root"),void(this._ranges={})):new r(e)}var i=e("./section"),o=e("./utils"),s=e("./range");o.inherit(r,i,{range:function(e){return"full"===e||"self"===e||"value"===e?s(0,this._source.length):i.prototype.range.apply(this,arguments)},toJSON:function(){return{src:this._source.valueOf(),t:this.type,c:this.children.map(function(e){return e.toJSON()})}}}),Object.defineProperties(r.prototype,{name:{enumerable:!0,value:""},value:{enumerable:!0,value:""},selector:{get:function(){return null}}}),t.exports=r},{"./range":63,"./section":66,"./utils":70}],65:[function(e,t,n){"use strict";function r(e){return'"'==e||"'"==e}function i(e,t){for(var n="";t--;)n+=e;return n}function o(e,t,n,r){if(t.length){var o=0,s=[];t.forEach(function(t){var a=r?n:i(n,t.length);s.push(e.substring(o,t.start),a),o=t.end}),e=s.join("")+e.substring(o)}return e}function s(e){return f.fromIndex(e.start,e.pos)}function a(e,t){if(!/\/\*/.test(e))return e;for(var n,r=c(e),i=[];n=r.next();)"/"===n&&"*"===r.peek()?(r.start=r.pos-1,r.skipTo("*/")?r.pos+=2:r.skipToEnd(),i.push(s(r))):r.skipQuoted();return o(e,i,t)}function u(e,t){if(!/\/\//.test(e))return e;for(var n,r,i,a=c(e),u=/\burl\s*\($/,f=[];n=a.next();)if("("===n){if(i=e.substring(Math.max(0,a.pos-50),a.pos),u.test(i)&&(a.start=a.pos,a.eatSpace(),a.skipQuoted(),a.eatSpace(),!a.skipTo(")")))throw new Error("Invalid url() at character "+a.start)}else if("/"===n&&"/"===a.peek()){for(a.start=a.pos-1;(r=a.next())&&"\n"!==r&&"\r"!=r;);f.push(s(a))}else a.skipQuoted();return o(e,f,t)}var c=e("string-stream"),f=e("./range"),l=e("./css-tokenizer"),p=/^(\s*).+?(\s*)$/,h=/\s/g;t.exports.sections=function(e){e=this.sanitize(e);for(var t,n,i=c(e),o=[],s=this,a=function(t){var n=s.extractSelector(e,t.start),r=f.fromIndex(n.start,t.end);r._selectorEnd=n.end,r._contentStart=t.start,o.push(r)};n=i.next();)if(r(n)){if(!i.skipString(n))throw new Error("Unterminated string literal at "+i.pos)}else"{"===n&&(t=this.matchBracesRanges(e,i.pos-1),t.forEach(a),t.length)&&(i.pos=t[t.length-1].end);return o.sort(function(e,t){return e.start-t.start})},t.exports.sanitize=function(e){e=this.stripComments(e);for(var t,n,r=c(e),i=[];t=r.next();)if("#"===t||"@"===t){if(n=r.peek(),"{"===n){if(r.start=r.pos-1,!r.skipTo("}"))throw new Error("Invalid string interpolation at "+r.start);r.pos+=1,i.push(s(r))}}else r.skipQuoted();return o(e,i,"a")},t.exports.stripComments=function(e,t){return t=t||" ",e=a(e,t),e=u(e,t)},t.exports.matchBracesRanges=function(e,t,n){n&&(e=this.sanitize(e));var r=c(e);r.start=r.pos=t;for(var i,o=[],s=[];i=r.next();)if("{"===i)o.push(r.pos-1);else if("}"===i){if(!o.length)throw new Error("Invalid source structure (check for curly braces)");if(s.push(f.fromIndex(o.pop(),r.pos)),!o.length)break}else if("`"===i)for(var a=r.pos;i=r.next();){if(!i){var u=l.getPosInfo(r.string,a);throw new Error("Unterminated backtick at line "+u.line+", column "+(u.ch+1)+"\n"+u.hint)}if("`"===i)break}else r.skipQuoted();return s},t.exports.extractSelector=function(e,t,n){n&&(e=this.sanitize(e));for(var i,o=t,s=function(){var n=e[t];if(r(n)){for(;--t>=0&&(e[t]!==n||"\\"===e[t-1]););return!0}};--t>=0;)if(!s())if(i=e[t],")"!=i){if("{"==i||"}"==i||";"==i){t++;break}}else for(;--t>=0&&(s()||"("!=e[t]););0>t&&(t=0);var a=e.substring(t,o),u=a.replace(h," ").match(p);return u&&(t+=u[1].length,o-=u[2].length),f.fromIndex(t,o)}},{"./css-tokenizer":60,"./range":63,"string-stream":72}],66:[function(e,t,n){"use strict";function r(e){return"@charset"===e||"@import"===e}function i(e,t){var n={},r="",i=0;return t.forEach(function(e){r+=e[1],n[e[0]]=g(i,e[1]),i+=e[1].length}),new e(m(r),n)}function o(e,t){var n=t?t.clone():i(p,b);return n.value="",n.name=e,n}function s(e,t,n){var o;return o=r(e)?i(v,w):n?n.clone():i(v,k),o.value=t,o.name=e,o}function a(e){var t=0;return e.value&&/^[a-z\-]/.test(e.name)?(e.between&&t++,e.after&&t++,t):0}function u(e){var t=[],n=function(e,t){return t.score-e.score};if(e.properties.forEach(function(e){var n=a(e);n&&t.push({node:e,score:n})}),t.sort(n),t[0]&&t[0].score>1)return t[0].node;var r=t[0]&&t[0].node;return e.root.all().some(function(e){return"property"===e.type&&/^[a-z]/.test(e.name)&&a(e)>=1?r=e:void 0}),r}function c(e){if("section"===e.type)return e;var t=e.root.sections;return t[t.length-1]}function f(e){return e&&"property"===e.type&&-1===e.after.indexOf(";")&&(e.after+=";"),e}function l(e){for(var t=0,n=e.children.length;n>t;t++)if(e.children[t]instanceof p)return t;return"last"}function p(e,t,n){return this instanceof p?void h.call(this,e,t,n||"section"):new p(e,t,n)}var h=e("./node"),v=e("./property"),d=e("./utils"),m=e("./source"),g=e("./range"),x=e("./selector"),b=[["before",""],["name","a"],["between"," {"],["value"," "],["after","\n}\n"]],y=": ",k=[["before","\n	"],["name","a"],["between",y],["value","b"],["after",";"]],w=[["before","\n"],["name","@import"],["between"," "],["value","url()"],["after",";"]];d.inherit(p,h,{range:function(e){switch(e){case"value":if(this.children.length){var t=this.children[0].range("full").start,n=this.children[this.children.length-1].range("full").end;return g.fromIndex(t,n)}}return h.prototype.range.apply(this,arguments)},property:function(e,t,n){var r;if(e instanceof h)r=e;else{var i=this.properties.filter(function(t){return t.name===e});r=i[i.length-1]}if("undefined"!=typeof t){if(!r)return this.addProperty(e,t,n).value;if(!r.between){var o=u(this);r.between=o&&o.between?o.between:y}r.value=t,f(r)}return r?r.value:void 0},addProperty:function(e,t,n){"undefined"==typeof n&&(n=l(this));var r=s(e,t,u(this));return f(r),f(this.get(this._resolveIndex(n)-1)),this.insert(r,n)},section:function(e,t){var n=this.sections.filter(function(t){return t.name===e});return n["undefined"!=typeof t?t:n.length-1]},addSection:function(e,t){"undefined"==typeof t&&(t="last");var n=c(this),r=o(e,n);this.insert(r,t);var i=this.indexOf(r);if(i>0){var s=this.children[i-1],a=/\n\s*$/;"section"===s.type&&~r.after.indexOf("\n")&&!a.test(s.after)&&(s.after+="\n")}else if(this.indexOf(n)>0){var u=/^\s*/,f=/\s*$/,l=this.children[1],p=function(e,t){var n=t.match(e);return n?n[0]:""};r.before=r.before.replace(u,p(u,l.before)),r.after=r.after.replace(f,p(f,l.after)),l.before=l.before.replace(u,p(u,n.before)),l.after=l.after.replace(f,p(f,n.after))}return r}}),Object.defineProperties(p.prototype,{properties:{enumerable:!0,get:function(){return this.children.filter(function(e){return"property"===e.type})}},sections:{enumerable:!0,get:function(){return this.children.filter(function(e){return"section"===e.type})}},selector:{enumerable:!0,get:function(){return this._selector||(this._selector=x(this.name)),this._selector}},name:{enumerable:!0,get:function(){return this._rangeValue("name")},set:function(e){var t=this.range("name");this._replaceRange(t,e),t.end=t.start+e.length,this._selector=null}}}),t.exports=p},{"./node":61,"./property":62,"./range":63,"./selector":67,"./source":68,"./utils":70}],67:[function(e,t,n){"use strict";function r(e){return g.stripComments(i(e),"")}function i(e){return e.trim().replace(k," ")}function o(e){return"["==e.charAt(0)&&(e=s(e)),e=e.trim(),"["+e.replace(/^([\w\-]+)\s*(\W?=)\s*/,"$1$2")+"]"}function s(e){return e.substring(1,e.length-1)}function a(e){for(var t,n=m(e),r="";t=n.next();)"["==t?(n.backUp(1),n.start=n.pos,n.skipToPair("[","]",!0),r+=o(n.current())):r+=t;return r}function u(e){return e?(e=e.replace(/\s+/g," ")," "!==e&&(e=e.trim()),e):""}function c(e){return e.map(function(e){return e.toString()}).join(" ").trim()}function f(e){var t=[],n=function(e){return e&&e.trim()&&t.push(new v(e)),t};if(!x.test(e))return n(e);for(var r,i=m(e);r=i.next();)if("("==r){if(i.backUp(1),!i.skipToPair("(",")",!0)){i.backUp(-1);continue}}else if("["==r){if(i.backUp(1),!i.skipToPair("[","]",!0)){i.backUp(-1);continue}}else","==r?(n(i.current(!0)),i.start=i.pos):i.skipQuoted();return n(i.current())}function l(e){for(var t,n=m(e),r=[],i="",o=function(e,t,n){return e&&r.push(new d(e,t,n)),r};t=n.next();)if(b.test(t))o(n.current(!0),i,n.start),n.start=n.pos-1,n.eatWhile(b),i=n.current(),n.start=n.pos;else if("["==t){if(n.backUp(1),!n.skipToPair("[","]",!0))break}else if("("==t&&(n.backUp(1),!n.skipToPair("(",")",!0)))break;return o(n.current(),i,n.start)}function p(e){var t=[];e=a(e);for(var n,r=m(e);n=r.next();)if(y.test(n))t.push(r.current(!0)),r.start=r.pos-1,":"==n&&":"==r.peek()&&r.next();else if("["==n){if(t.push(r.current(!0)),r.backUp(1),r.start=r.pos,!r.skipToPair("[","]",!0))break;t.push(r.current()),r.start=r.pos}else if("("==n&&(r.backUp(1),!r.skipToPair("(",")",!0)))throw new Error("Unable to parse "+e);return t.push(r.current()),t.filter(function(e){return!!e})}function h(e){return this instanceof h?(this._decl=r(e),void(this._list=null)):new h(e)}function v(e){this._sel=e.trim(),this._parts=null}function d(e,t){this.op=u(t),this._part=e.trim(),this._fragments=null}var m=e("string-stream"),g=e("./section-parser"),x=/,/,b=/[>\+\~\s]/,y=/[\.#%:]/,k=/[ \t\n]+/g;h.prototype={add:function(e){Array.isArray(e)||(e=[e]);var t=this.list;return e.forEach(function(e){e instanceof v||(e=new v(e)),t.push(e)}),t},clone:function(){return new h(this.valueOf())},valueOf:function(){return this.list.map(function(e){return e.valueOf()}).join(", ")},toString:function(){return this.valueOf()}},Object.defineProperties(h.prototype,{list:{enumerable:!0,get:function(){return this._list||(this._list=f(this._decl)),this._list}},length:{enumerable:!0,get:function(){return this.valueOf().length}}}),v.prototype={removePart:function(e,t){var n=this.parts;e instanceof d?this._parts=n.filter(function(t){return t!==e}):this._parts=n.filter(function(n){return!(n.toString()===e&&("undefined"==typeof t||n.op===t))})},clone:function(){return new v(this.valueOf())},valueOf:function(){return c(this.parts)},toString:function(){return this.valueOf()}},Object.defineProperties(v.prototype,{length:{enumerable:!0,get:function(){return this.valueOf().length}},parts:{enumerable:!0,get:function(){return this._parts||(this._parts=l(this._sel)),this._parts}},fragments:{enumerable:!0,get:function(){var e=[];return this.parts.forEach(function(t){t.op&&e.push(" "==t.op?t.op:" "+t.op+" "),e=e.concat(t.fragments)}),e}}}),d.prototype={equals:function(e){return this.op===e.op&&this.valueOf()===e.valueOf()},clone:function(){return new d(this.valueOf(),this.op)},removeFragments:function(e){for(var t,n=this.fragments,r=e.fragments,i=r.length-1;i>=0;i--)t=n.indexOf(r[i]),-1!==t&&n.splice(t,1);return this},order:function(){var e=/^::/,t=/^:/,n=[],r=[],i=[];return this.fragments.forEach(function(o){e.test(o)?r.push(o):t.test(o)?i.push(o):n.push(o)}),this.fragments=n.concat(i,r),this},valueOf:function(e){var t=this.fragments;return e&&(t=t.filter(function(t){return!e.test(t)})),t.join("")},toString:function(e){var t="";return e||(t=this.op&&" "!==this.op?this.op+" ":this.op),(t+this.valueOf()).trim()}},Object.defineProperties(d.prototype,{length:{enumerable:!0,get:function(){return this.valueOf().length}},fragments:{enumerable:!0,get:function(){return this._fragments||(this._fragments=p(this._part)),this._fragments},set:function(e){this._fragments=e}}}),h.Selector=v,h.SelectorPart=d,t.exports=h},{"./section-parser":65,"string-stream":72}],68:[function(e,t,n){"use strict";function r(e,t){return this instanceof r?(this.recordChanges=!t,this.changeset=[],void(this._code=e)):new r(e,t)}r.prototype={update:function(e,t){var n,r;return Array.isArray(e)?(n=e[0],r=e[1]):(n=e.start,r=e.end),n>=0&&n<=this.length&&(this._code=this._code.substring(0,n)+t+this._code.substring(r),this.recordChanges&&this.changeset.push([n,r,t||""])),this},substring:function(e){return e.substring(this._code)},location:function(e){for(var t=/\r\n?/g,n=this._code.replace(t,"\n"),r=this._code.substring(0,e).replace(t,"\n"),i=r.split("\n"),o=(i[i.length-1]||"").length+1,s=n.split("\n")[i.length-1]||"",a=50,u=Math.max(0,o-a),c=s.substr(u,2*a)+"\n",f=0;o-u-1>f;f++)c+="-";return c+="^",{line:i.length,col:o,text:s,hint:c}},applyChangeset:function(e,t){var n=this.recordChanges;t&&(this.recordChanges=!1),e.forEach(function(e){this.update(e,e[2])},this),this.recordChanges=n},resetChangeset:function(){this.changeset=[]},valueOf:function(){return this._code}},Object.defineProperty(r.prototype,"length",{enumerable:!0,get:function(){return this._code.length}}),t.exports=r},{}],69:[function(e,t,n){"use strict";function r(e){return this instanceof r?(this.tokens=e,this._position=0,void this.reset()):new r(e)}r.prototype={next:function(){if(this.hasNext()){var e=this.tokens[++this._i];return this._position=e.start,e}return this._i=this._il,null},current:function(){return this.tokens[this._i]},peek:function(){return this.tokens[this._i+1]},position:function(){return this._position},hasNext:function(){return this._i<this._il-1},reset:function(){this._i=0,this._il=this.tokens.length},item:function(){return this.tokens[this._i]},itemNext:function(){return this.tokens[this._i+1]},itemPrev:function(){return this.tokens[this._i-1]},nextUntil:function(e,t){for(var n,r="string"==typeof e?function(t){return t.type==e}:e;(n=this.next())&&(t&&t.call(this,n),!r.call(this,n)););}},t.exports=r},{}],70:[function(e,t,n){"use strict";t.exports.extend=function(e){for(var t,n=1,r=arguments.length;r>n;n++)(t=arguments[n])&&Object.keys(t).forEach(function(n){e[n]=t[n]});return e},t.exports.inherit=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__super__=t.prototype;for(var n=2,r=arguments.length;r>n;n++)this.extend(e.prototype,arguments[n]);return e}},{}],71:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e[e.length-1]}function o(e,t){return t=t||[],e.forEach(function(e){Array.isArray(e)?o(e,t):t.push(e)}),t}function s(e){return e?e.normalName||e.name:null}function a(e,t,n){var r=e.children.filter(function(e){return s(e)===t.name});return r.map(function(e,r){var i=0;return n?(i+=c(e,n.before)?.5:0,i+=f(e,n.after)?.5:0):r===t.pos-1&&(i+=.1),{node:e,index:r,score:i}})}function u(e,t){return 1e4*t.score+t.index-(1e4*e.score+e.index)}function c(e,t){var n=e.parent.children,r=n.indexOf(e);if(!t||t.length-1>r)return!1;if(t.length===r===0)return!0;for(var i,o=t.length-1;o>=0;o--)if(i=n[--r],!i||s(i)!==t[o].name)return!1;return!0}function f(e,t){var n=e.parent.children,r=n.indexOf(e);if(!t||r+t.length>n.length-1)return!1;if(0===t.length&&r===n.length-1)return!0;for(var i,o=0,a=t.length;a>o;o++)if(i=n[++r],!i||s(i)!==t[o].name)return!1;return!0}function l(e,t){var n=[];if(!t||!t.length)return n;var r=t.length;return e.forEach(function(i,o){if(t[0].name===s(i)){for(var a=1;r>a;a++)if(!e[o+a]||s(e[o+a])!==t[a].name)return!1;n.push(o)}}),n}var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=(t.exports.find=function(e,t,n){if(""===t.toString())return new v(e);n=(n||[]).slice(0);for(var r,s,c,f,l=[e],p=t.components.slice(0);s=p.shift();){if(c=n.shift(),r=o(l.map(function(e){return a(e,s,c)})).sort(u),r=r.filter(function(e){return e.score===r[0].score}).map(function(e){return e.node}),!r.length)return p.unshift(s),f=i(l),new v(f,h(f,c),p);l=r}return f=i(l),new v(f.parent,f.parent.indexOf(f))},t.exports.indexForHint=function(e,t){var n=e.children;if(!t)return e.children.length;var r=l(n,t.before).map(function(e){return e+t.before.length}),i=l(n,t.after),o=[];return t.before.length&&t.after.length?r.forEach(function(e){for(var t=0,n=i.length;n>t;t++)if(i[t]>=e)return o.push(i[t])}):t.before.length?o=r:t.after.length&&(o=i),o.length?o[0]:n.length}),v=function(){function e(t,n,i){r(this,e),this.parent=t,this.index=n,this.partial=!!i,this.rest=i}return p(e,[{key:"node",get:function(){return"undefined"==typeof this.index?this.parent:this.parent.children[this.index]}}]),e}()},{}],72:[function(e,t,n){"use strict";if("object"==typeof t&&"function"!=typeof r)var r=function(r){t.exports=r(e,n,t)};r(function(e,t,n){function r(e){this.pos=this.start=0,this.string=e,this._length=e.length}return r.prototype={eol:function(){return this.pos>=this._length},sol:function(){return 0===this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this._length?this.string.charAt(this.pos++):void 0},eat:function(e){var t,n=this.string.charAt(this.pos);return t="string"==typeof e?n==e:n&&(e.test?e.test(n):e(n)),t?(++this.pos,n):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this._length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},skipToPair:function(e,t,n){for(var r,i=0,o=this.pos,s=this._length;s>o;)if(r=this.string.charAt(o++),r==e)i++;else if(r==t){if(i--,1>i)return this.pos=o,!0}else!n||'"'!=r&&"'"!=r||this.skipString(r);return!1},skipQuoted:function(e){var t=this.string.charAt(e?this.pos:this.pos-1);return'"'===t||"'"===t?(e&&this.pos++,this.skipString(t)):void 0},skipString:function(e){for(var t,n=this.pos,r=this._length;r>n;)if(t=this.string.charAt(n++),"\\"!=t&&t==e)return this.pos=n,!0;return!1},backUp:function(e){this.pos-=e},match:function i(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&t!==!1&&(this.pos+=i[0].length),i}var r=n?function(e){return e.toLowerCase()}:function(e){return e};return r(this.string).indexOf(r(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(e){return this.string.slice(this.start,this.pos-(e?1:0))}},n.exports=function(e){return new r(e)},n.exports.create=n.exports,n.exports})},{}]},{},[58])(58)});
},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _livestylePatcherLibWorker = require('livestyle-patcher/lib/worker');

var _livestylePatcherLibWorker2 = _interopRequireDefault(_livestylePatcherLibWorker);

exports['default'] = _livestylePatcherLibWorker2['default'];
module.exports = exports['default'];
},{"livestyle-patcher/lib/worker":4}]},{},[6])(6)
});