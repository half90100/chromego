/*! 2014-12-19 11:12:26 */
KISSY.add("haitaoConvert",function(a,b,c,d,e){function f(){f.superclass.constructor.apply(this,arguments),this.init()}return a.extend(f,b,{init:function(){var a=this;a._initSelect(),a._bindEvents()},_bindEvents:function(){var b=this,c=a.one("#haitao_convert_input1"),d=a.one("#haitao_convert_input2");b.set("input1",c),b.set("input2",d),b._unbindEvents(),c.on("click",b._convertCal,b),c.on("keyup",b._convertCal,b),d.on("click",b._convertCalTrue,b),d.on("keyup",b._convertCalTrue,b)},_unbindEvents:function(){var a=this,b=a.get("input1"),c=a.get("input2");b.detach("click",a._convertCal,a),b.on("keyup",a._convertCal,a),c.detach("click",a._convertCalTrue,a),c.detach("keyup",a._convertCalTrue,a)},_initSelect:function(){var a=this,b=a.get("selConfig"),c=a.get("select1Rate"),d=a.get("select2Rate"),f=e.Select.decorate("#haitao_convert_sel1",b);f.on("click",function(){c=parseFloat(f.get("value")),a.set("select1Rate",c),a._convertCal()});var g=e.Select.decorate("#haitao_convert_sel2",b);g.on("click",function(){d=parseFloat(g.get("value")),a.set("select2Rate",d),a._convertCal()})},_convertCalTrue:function(){var a=this,b=a.get("input1"),c=a.get("input2"),d=a.get("select1Rate"),e=a.get("select2Rate"),f=(b.val(),c.val());""!=f&&b.val(isNaN(f)?"请输入数字":parseFloat(f)*d/e)},_convertCal:function(){{var a=this,b=a.get("input1"),c=a.get("input2"),d=a.get("select1Rate"),e=a.get("select2Rate"),f=b.val();c.val()}""!=f&&c.val(isNaN(f)?"请输入数字":parseFloat(f)*e/d)}},{ATTRS:{select1Rate:{value:100},select2Rate:{value:39.37},selConfig:{value:{width:70,prefixCls:"haitao-",menuAlign:{offset:[0,2]},menuCfg:{width:72,align:{offset:[0,-1]},elStyle:{overflow:"auto",overflowX:"hidden"}}}}},input1:{value:null},input2:{value:null}}),f},{requires:["base","node","event","menubutton"]});