/*! 2014-12-19 11:12:26 */
KISSY.add("haitaoListPrice",function(a,b,c,d,e,f,g){function h(a,b){var c=this;h.superclass.constructor.apply(c),c.set("data",a),c.set("destroy",b),c.init()}var i="#haitao_totalPrice_tip";return a.extend(h,b,{init:function(){var a=this,b=a.get("data"),c=a.get("destroy"),d=KISSY.one(i);if(d&&(d.hasClass("haitao_unfold")&&(b.unfold="haitao_unfold"),d.remove()),!c&&b){var e=new g,f=e.generateData(KISSY.clone(b));a._render(f),a._bindEvents(),e.initSelect(i+" select",f,function(b){a.repaintPricePanel(b)})}},_bindEvents:function(){var a="#haitao_totalPrice_tip";KISSY.one(a+" .haitao_tips_title").on("click",function(){KISSY.one(a).toggleClass("haitao_unfold")}),KISSY.one(document).on("click",function(b){if(KISSY.one(a)){var c=KISSY.one(b.target).parent(a),d=KISSY.one(b.target).parent(".haitao-menu");if(c||d)return;KISSY.one(a).removeClass("haitao_unfold")}})},repaintPricePanel:function(a){KISSY.all(i+" .haiao_totalPrice_PlusShipPrice").html(a.totalPrice),KISSY.one(i+" .haitao_totalPrice_shipPrice").html(a.shippingCompanyCost),KISSY.one(i+" .haitao_totalPrice_calShippingWeight").html(a.shippingCompanyWeight)},_render:function(a){a.website=getMatchedWebSiteDomain();var b=f.to_html(window.Ali_Haitao.template.priceTotal,a);KISSY.one("body").append(b)}}),h},{requires:["base","node","event","menubutton","mu","haitaoTransShip"]});