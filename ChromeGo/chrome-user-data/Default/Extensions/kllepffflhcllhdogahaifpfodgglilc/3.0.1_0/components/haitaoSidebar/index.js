/*! 2014-12-19 11:12:26 */
KISSY.add("haitaoSidebar",function(a,b,c,d,e,f,g,h,i){function j(){j.superclass.constructor.apply(this,arguments),this.init()}return a.extend(j,b,{init:function(){var a=this,b=a.get("template"),c=KISSY.one("#haitao_sidebar");c||KISSY.one("body").append(b),a.initEvent(),a.initHoverTip()},initEvent:function(){a.one(document).delegate("click",".haitao_chk",function(a){var b=KISSY.one(a.currentTarget);b&&(b.toggleClass("haitao_chk_checked"),b.hasClass("haitao_chk_checked")?b.hasClass("haitao_switch_tips")?(window.Ali_Haitao.isShowTips="true",HaitaoUtils.setBackgroundLocalStore({isShowTips:"true"}),"true"==window.Ali_Haitao.isLoadTips?(KISSY.one("body").fire("haitaoRepaint"),KISSY.all(".haitao_tips").removeClass("haitao_hidden")):dealWebsite()):b.hasClass("haitao_switch_trans")?(window.Ali_Haitao.isTranslate="true",KISSY.all(".haitao_trans_tips").removeClass("haitao_hidden"),HaitaoUtils.setBackgroundLocalStore({isTranslate:"true"})):b.hasClass("haitao_switch_pushnotify")&&(window.Ali_Haitao.isShowPushNotify="true",HaitaoUtils.setBackgroundLocalStore({isShowPushNotify:"true"})):b.hasClass("haitao_switch_tips")?(window.Ali_Haitao.isShowTips="false",KISSY.all(".haitao_tips").addClass("haitao_hidden"),HaitaoUtils.setBackgroundLocalStore({isShowTips:"false"})):b.hasClass("haitao_switch_trans")?(window.Ali_Haitao.isTranslate="false",KISSY.all(".haitao_trans_tips").addClass("haitao_hidden"),HaitaoUtils.setBackgroundLocalStore({isTranslate:"false"})):b.hasClass("haitao_switch_pushnotify")&&(window.Ali_Haitao.isShowPushNotify="false",HaitaoUtils.setBackgroundLocalStore({isShowPushNotify:"false"})))}),KISSY.one(document).delegate("mouseenter",".haitao_sidebar_logo",function(){var a=KISSY.one("#haitao_sidebar");a&&(a.addClass("haitao_sidebar_hover"),KISSY.one("body").fire("haitaoHideShopIntro"))}),KISSY.one(document).delegate("mouseleave","#haitao_sidebar",function(){var a=KISSY.one("#haitao_sidebar");a&&a.removeClass("haitao_sidebar_hover")}),KISSY.one(document).delegate("click",".haitao_sidebar_top",function(){KISSY.one(document).scrollTop(0)}),KISSY.one(document).on("scroll",function(){var a=KISSY.one("#haitao_sidebar"),b=KISSY.one("#haitao_sidebar_scrollTop");if(a&&b){var c=KISSY.one(document).scrollTop();c>0?(a.addClass("haitao_sidebar_showtop"),b.addClass("haitao_sidebar_showtop")):(a.removeClass("haitao_sidebar_showtop"),b.removeClass("haitao_sidebar_showtop"))}}),KISSY.one(document).delegate("click",".haitao_newuser",function(){new f(window.Ali_Haitao.template.guide)}),KISSY.one(document).delegate("click",".haitao_chima",function(){new g}),KISSY.one(document).delegate("click",".haitao_transPage",function(){new h}),KISSY.one(document).delegate("click",".haitao_transaddress",function(){function a(){HaitaoUtils.checkIsLogin()&&HaitaoUtils.getShipAddress()}function b(){new i(window.Ali_Haitao.template.transaddress,window.Ali_Haitao.shipAddress),KISSY.one("body").detach("getShipAddressCallback",b),KISSY.one("body").detach("loginStatusChanged",a)}KISSY.one("body").detach("loginStatusChanged",a),KISSY.one("body").on("loginStatusChanged",a),KISSY.one("body").detach("getShipAddressCallback",b),KISSY.one("body").on("getShipAddressCallback",b),HaitaoUtils.checkIsLogin()?window.Ali_Haitao.shipAddress?b():HaitaoUtils.getShipAddress():HaitaoUtils.popupLogin()}),KISSY.one(document).delegate("click",".haitao_sidebar_feedback",function(a){a.preventDefault(),KISSY.one("#haitao_feedback_dialog")&&KISSY.one("#haitao_feedback_dialog").show(),new e})},initHoverTip:function(){for(var a=[{trigger:".haitao_si_card",srcNode:".haitao_si_tip_card"},{trigger:".haitao_si_fee",srcNode:".haitao_si_tip_fee"},{trigger:".haitao_si_tax",srcNode:".haitao_si_tip_tax"}],b=0;b<a.length;b++){var c=a[b];new d.Popup({srcNode:c.srcNode,trigger:c.trigger,triggerType:"mouse",align:{node:c.trigger,points:["tc","bc"],offset:[0,55]}})}}},{ATTRS:{template:{value:null}}}),j},{requires:["base","node","overlay","haitaoSidebarFeedback","haitaoGuideDialog","haitaoSizeDialog","haitaoTransPageDialog","haitaoAddressNewDialog"]});