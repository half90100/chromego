/*! 2014-12-19 11:12:26 */
KISSY.add("haitaoSizeDialog",function(a,b,c,d,e,f,g,h){function i(){i.superclass.constructor.apply(this,arguments),this.init()}return a.extend(i,b,{init:function(){var a=this;a._destroySizeDialog(),Ali_Haitao.template&&Ali_Haitao.template.size&&(a._initSizeDialog(),a._scrollPosition(),a._initSizeTabs(),new h)},_destroySizeDialog:function(){var a=window.Ali_Haitao.sizeDialog;a&&a.destroy&&(a.destroy(),a=null)},_initSizeDialog:function(){var b=this,c=b.get("dialogConfig"),d=b.get("className"),f=window.Ali_Haitao;if(a.one("."+d))return null;var g={width:550,elCls:"haitao_dialog haitao_font "+d,mask:!1,bodyContent:f.template.size};g=a.merge(c,g);var h=new e.Dialog(g);window.Ali_Haitao.sizeDialog=h;var i=a.one("#haitao_size_tip_1");i&&i.hasClass("haitao_unfold")&&h.set("align",{node:"#haitao_size_tip_1",points:["bc","tc"]}),h.show()},_initSizeTabs:function(){function a(a){var b=KISSY.all("#haitao_size_tab > .tab-content > .tab-pannel").item(a),c=b.children(".haitao_tab");c&&c.length>0&&!c.attr("isInitTab")&&(c.attr("isInitTab",!0),new f(c.attr("id"),{navClass:"second-tab-nav",contentClass:"second-tab-content",pannelClass:"second-tab-pannel"}))}var b=this,c=(b._getDefaultTabIndex(),new f("haitao_size_tab"));a(0),c.on("switch",function(b){a(b.index)})},_scrollPosition:function(){var b=a.one("#haitao_size_tip_1");if(b&&b.hasClass("haitao_unfold")){var c=b.offset().top,d=a.one(window).height(),e=a.one(document).scrollTop(),f=d-(c-e)-500;0>f&&a.one(document).scrollTop(e-f)}},_getDefaultTabIndex:function(){var b=this,c=0,d=a.all(".bucket h2");try{for(var e=0,f=d.length;f>e;e++)if("Look for Similar Items by Category"==d[e].innerHTML){var g=a.one(d[e]).siblings(".content");if(g)for(var h=g.text().replace(/\s/g,"").toLowerCase().split("\n"),i=0;i<h.length;i++){var j=h[i];if(c=b._getIndex(j))return c}}}catch(k){console.log("error, getDefaultTabIndex error")}return c},_getIndex:function(a){if(a.indexOf("clothing&accessories")>=0){if(a.indexOf("bras")>=0)return 6;if(a.indexOf("women")>=0)return 1;if(a.indexOf("men")>=0)return 0;if(a.indexOf("girls")>=0)return 2;if(a.indexOf("boys")>=0)return 2;if(a.indexOf("baby")>=0)return 2}else if(a.indexOf("shoes")>=0){if(a.indexOf("women")>=0)return 4;if(a.indexOf("men")>=0)return 3;if(a.indexOf("girls")>=0)return 5;if(a.indexOf("boys")>=0)return 5;if(a.indexOf("baby")>=0)return 5}}},{ATTRS:{dialogConfig:{value:{draggable:!0,elCls:"haitao_dialog haitao_font ",prefixCls:"haitao-ks-",headerContent:"提示",bodyContent:'<div class="haitao_empty_div"></div>',mask:!1,closeAction:"destroy",align:{overflow:{adjustX:1,adjustY:1},offset:[0,-80],points:["cc","cc"]},aria:!0}},className:{value:"haitao_dialog_size"}}}),i},{requires:["base","node","event","overlay","gallery/slide/1.2/index","dd","haitaoConvert"]});