/*! 2014-12-19 11:12:26 */
KISSY.add("haitaoWeightInput",function(a,b){function c(a,b){var c=this;c.set("inputQuery",a),c.set("callback",b),c.init()}return a.extend(c,b,{query:"",callbackFunc:null,init:function(a,b){var c=this,a=c.get("inputQuery"),b=c.get("callback");KISSY.one(a)&&(c.query=a,c.callbackFunc=b,c.initEvent(),c.recalWeightInputWidth())},syncWeight:function(a){var b=this,c=KISSY.one(b.query);a&&(""==c.val()&&c.val(0),c.val(parseInt(100*c.val())/100),b.callbackFunc&&b.callbackFunc(c.val())),this.recalWeightInputWidth()},recalWeightInputWidth:function(){var a=this,b=KISSY.one(a.query);b.width(6.9*b.val().length+4)},unbindEvent:function(){var a=this;KISSY.Event.undelegate(document,"focusout",a.query,a.blur,a),KISSY.Event.undelegate(document,"keydown",a.query,a.keydown),KISSY.Event.undelegate(document,"keyup",a.query,a.keyup,a)},initEvent:function(){var a=this;a.unbindEvent(),KISSY.Event.delegate(document,"focusout",a.query,a.blur,a),KISSY.Event.delegate(document,"keydown",a.query,a.keydown),KISSY.Event.delegate(document,"keyup",a.query,a.keyup,a)},blur:function(){var a=this;a.syncWeight(!0)},keydown:function(a){return a.keyCode>=48&&a.keyCode<=57||190==a.keyCode||8==a.keyCode||37==a.keyCode||39==a.keyCode||13==a.keyCode?void 0:!1},keyup:function(a){var b=this;13==a.keyCode?b.syncWeight(!0):b.syncWeight()}}),c},{requires:["base","node","event"]});