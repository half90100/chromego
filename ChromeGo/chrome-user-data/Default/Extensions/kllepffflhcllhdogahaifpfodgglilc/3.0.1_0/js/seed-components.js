/*! 2014-12-19 11:12:26 */
KISSY.add("event",["event/dom","event/custom"],function(a,b){var c=b("event/dom"),d=b("event/custom"),e=a.Event=a.merge(c,{DomEvent:c,CustomEvent:d});return e.global=d.global,a.EventTarget=e.Target=d.Target,e}),KISSY.add("event/custom/observer",["event/base"],function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=b("event/base");return a.extend(c,d.Observer,{keys:["fn","context","groups"]}),c}),KISSY.add("event/custom/object",["event/base"],function(a,b){function c(b){c.superclass.constructor.call(this),a.mix(this,b)}var d=b("event/base");return a.extend(c,d.Object),c}),KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(a,b){function c(){var a=this;c.superclass.constructor.apply(a,arguments),a.defaultFn=null,a.defaultTargetOnly=!1,a.bubbles=!0}var d=b("event/base"),e=b("./observer"),f=b("./object"),g=d.Utils;return a.extend(c,d.Observable,{on:function(b){var c=new e(b);a.Config.debug&&(c.fn||a.error("lack event handler for "+this.type)),-1===this.findObserver(c)&&this.observers.push(c)},fire:function(a){a=a||{};var b,c,d,e,g,h=this,i=h.bubbles,j=h.currentTarget,k=h.type,l=h.defaultFn,m=a;if(a.type=k,m instanceof f||(m.target=j,m=new f(m)),m.currentTarget=j,g=h.notify(m),e!==!1&&void 0!==g&&(e=g),i&&!m.isPropagationStopped())for(b=j.getTargets(),c=b&&b.length||0,d=0;c>d&&!m.isPropagationStopped();d++)g=b[d].fire(k,m),e!==!1&&void 0!==g&&(e=g);if(l&&!m.isDefaultPrevented()){var n=m.target,o=n.getCustomEventObservable(m.type);(!h.defaultTargetOnly&&!o.defaultTargetOnly||j===n)&&(e=l.call(j,m))}return e},notify:function(a){var b,c,d,e=[].concat(this.observers),f=e.length;for(d=0;f>d&&!a.isImmediatePropagationStopped();d++)b=e[d].notify(a,this),c!==!1&&void 0!==b&&(c=b);return c},detach:function(a){var b,c=this,d=a.fn,e=a.context,f=c.currentTarget,h=c.observers,i=a.groups;if(h.length){i&&(b=g.getGroupsRe(i));var j,k,l,m,n,o=h.length;if(d||b){for(e=e||f,j=0,k=0,l=[];o>j;++j)m=h[j],n=m.context||f,(e!==n||d&&d!==m.fn||b&&!m.groups.match(b))&&(l[k++]=m);c.observers=l}else c.reset()}}}),c}),KISSY.add("event/custom/target",["event/base","./observable"],function(a,b){var c=b("event/base"),d=b("./observable"),e=c.Utils,f=e.splitAndRun,g="__~ks_bubble_targets",h="__~ks_custom_events";return{isTarget:1,getCustomEventObservable:function(a,b){var c,e=this,f=e.getCustomEvents();return c=f&&f[a],!c&&b&&(c=f[a]=new d({currentTarget:e,type:a})),c},fire:function(a,b){var c,g=this,h=g.getTargets(),i=h&&h.length;return b=b||{},f(a,function(a){var f,h;if(e.fillGroupsForEvent(a,b),a=b.type,h=g.getCustomEventObservable(a),h||i){if(h){if(!h.hasObserver()&&!h.defaultFn&&(h.bubbles&&!i||!h.bubbles))return}else h=new d({currentTarget:g,type:a});f=h.fire(b),c!==!1&&void 0!==f&&(c=f)}}),c},publish:function(b,c){var d,e=this;return f(b,function(b){d=e.getCustomEventObservable(b,!0),a.mix(d,c)}),e},addTarget:function(b){var c=this,d=c.getTargets();return a.inArray(b,d)||d.push(b),c},removeTarget:function(b){var c=this,d=c.getTargets(),e=a.indexOf(b,d);return-1!==e&&d.splice(e,1),c},getTargets:function(){return this[g]||(this[g]=[])},getCustomEvents:function(){return this[h]||(this[h]={})},on:function(a,b,c){var d=this;return e.batchForType(function(a,b,c){var f,g=e.normalizeParam(a,b,c);a=g.type,f=d.getCustomEventObservable(a,!0),f&&f.on(g)},0,a,b,c),d},detach:function(b,c,d){var f=this;return e.batchForType(function(b,c,d){var g,h,i=e.normalizeParam(b,c,d);b=i.type,b?(h=f.getCustomEventObservable(b,!0),h&&h.detach(i)):(g=f.getCustomEvents(),a.each(g,function(a){a.detach(i)}))},0,b,c,d),f}}}),KISSY.add("event/custom",["./custom/target"],function(a,b){var c=b("./custom/target");return{Target:c,global:a.mix({},c)}}),KISSY.add("io/form-serializer",["dom"],function(a,b){function c(a){return a.replace(g,"\r\n")}var d,e=b("dom"),f=/^(?:select|textarea)/i,g=/\r?\n/g,h=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return d={serialize:function(b,c){return a.param(d.getFormData(b),void 0,void 0,c||!1)},getFormData:function(b){var d=[],g={};return a.each(e.query(b),function(b){var c=b.elements?a.makeArray(b.elements):[b];d.push.apply(d,c)}),d=a.filter(d,function(a){return a.name&&!a.disabled&&(a.checked||f.test(a.nodeName)||h.test(a.type))}),a.each(d,function(b){var d,f=e.val(b);if(null!==f){if(f=a.isArray(f)?a.map(f,c):c(f),d=g[b.name],!d)return void(g[b.name]=f);d&&!a.isArray(d)&&(d=g[b.name]=[d]),d.push.apply(d,a.makeArray(f))}}),g}}}),KISSY.add("io/base",["event/custom","promise"],function(a,b){function c(b){var c=b.context;delete b.context,b=a.mix(a.clone(p),b,{deep:!0}),b.context=c||b;var d,e,f=b.type,g=b.dataType;return e=b.uri=m.resolve(b.url),b.uri.setQuery(""),"crossDomain"in b||(b.crossDomain=!b.uri.isSameOriginAs(m)),f=b.type=f.toUpperCase(),b.hasContent=!j.test(f),b.processData&&(d=b.data)&&"string"!=typeof d&&(b.data=a.param(d,void 0,void 0,b.serializeArray)),g=b.dataType=a.trim(g||"*").split(h),"cache"in b||!a.inArray(g[0],["script","jsonp"])||(b.cache=!1),b.hasContent||(b.data&&e.query.add(a.unparam(b.data)),b.cache===!1&&e.query.set("_ksTS",a.now()+"_"+a.guid())),b}function d(b){var e=this;if(!(e instanceof d))return new d(b);f.call(e),b=c(b),a.mix(e,{responseData:null,config:b||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null}),f.Defer(e);var g,h;d.fire("start",{ajaxConfig:b,io:e}),g=o[b.dataType[0]]||o["*"],h=new g(e),e.transport=h,b.contentType&&e.setRequestHeader("Content-Type",b.contentType);var i,j=b.dataType[0],k=b.timeout,l=b.context,m=b.headers,n=b.accepts;e.setRequestHeader("Accept",j&&n[j]?n[j]+("*"===j?"":", */*; q=0.01"):n["*"]);for(i in m)e.setRequestHeader(i,m[i]);if(b.beforeSend&&b.beforeSend.call(l,e,b)===!1)return e;e.readyState=1,d.fire("send",{ajaxConfig:b,io:e}),b.async&&k>0&&(e.timeoutTimer=setTimeout(function(){e.abort("timeout")},1e3*k));try{e.state=1,h.send()}catch(p){e.state<2?(a.log(p.stack||p,"error"),setTimeout(function(){throw p},0),e._ioReady(-1,p.message)):a.error(p)}return e}var e=b("event/custom"),f=b("promise"),g=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,h=/\s+/,i=function(a){return a},j=/^(?:GET|HEAD)$/,k=a.Env.host,l=k.location||{},m=new a.Uri(l.href),n=m&&g.test(m.getScheme()),o={},p={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},converters:{text:{json:a.parseJson,html:i,text:i,xml:a.parseXML}},headers:{"X-Requested-With":"XMLHttpRequest"},contents:{xml:/xml/,html:/html/,json:/json/}};return p.converters.html=p.converters.text,a.mix(d,e.Target),a.mix(d,{isLocal:n,setupConfig:function(b){a.mix(p,b,{deep:!0})},setupTransport:function(a,b){o[a]=b},getTransport:function(a){return o[a]},getConfig:function(){return p}}),d}),KISSY.add("io/xhr-transport-base",["./base"],function(a,b){function c(a,b){try{return new(b||j).XMLHttpRequest}catch(c){}return void 0}function d(a,b){try{return new(b||j).ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return void 0}function e(a){return k&&a instanceof k}function f(a){var b,c=a.ifModified;return c&&(b=a.uri,a.cache===!1&&(b=b.clone(),b.query.remove("_ksTS")),b=b.toString()),b}var g=b("./base"),h=a.getLogger("s/io"),i=200,j=a.Env.host,k=a.UA.ieMode>7&&j.XDomainRequest,l=204,m=404,n=1223,o={proto:{}},p={},q={};g.__lastModifiedCached=p,g.__eTagCached=q,o.nativeXhr=j.ActiveXObject?function(a,b){return!r&&a&&k?new k:!g.isLocal&&c(a,b)||d(a,b)}:c,o.XDomainRequest_=k;var r=o.supportCORS="withCredentials"in o.nativeXhr();return a.mix(o.proto,{sendInternal:function(){var b,c,d,g,i=this,j=i.io,k=j.config,l=i.nativeXhr,m=k.files,n=m?"post":k.type,o=k.async,s=j.mimeType,t=j.requestHeaders||{},u=j._getUrlForSend(),v=f(k);v&&((d=p[v])&&(t["If-Modified-Since"]=d),(d=q[v])&&(t["If-None-Match"]=d)),(b=k.username)?l.open(n,u,o,b,k.password):l.open(n,u,o),c=k.xhrFields||{},"withCredentials"in c&&(r||delete c.withCredentials);for(g in c)try{l[g]=c[g]}catch(w){h.error(w)}s&&l.overrideMimeType&&l.overrideMimeType(s);var x=t["X-Requested-With"];if(x===!1&&delete t["X-Requested-With"],"undefined"!=typeof l.setRequestHeader)for(g in t)l.setRequestHeader(g,t[g]);var y=k.hasContent&&k.data||null;if(m){var z=y,A={};z&&(A=a.unparam(z)),A=a.mix(A,m),y=new FormData,a.each(A,function(b,c){a.isArray(b)?a.each(b,function(a){y.append(c+(k.serializeArray?"[]":""),a)}):y.append(c,b)})}l.send(y),o&&4!==l.readyState?e(l)?(l.onload=function(){l.readyState=4,l.status=200,i._callback()},l.onerror=function(){l.readyState=4,l.status=500,i._callback()}):l.onreadystatechange=function(){i._callback()}:i._callback()},abort:function(){this._callback(0,1)},_callback:function(b,c){var d,j,k,o,r,s=this,t=s.nativeXhr,u=s.io,v=u.config;try{if(c||4===t.readyState)if(e(t)?(t.onerror=a.noop,t.onload=a.noop):t.onreadystatechange=a.noop,c)4!==t.readyState&&t.abort();else{d=f(v);var w=t.status;e(t)||(u.responseHeadersString=t.getAllResponseHeaders()),d&&(j=t.getResponseHeader("Last-Modified"),k=t.getResponseHeader("ETag"),j&&(p[d]=j),k&&(q[k]=k)),r=t.responseXML,r&&r.documentElement&&(u.responseXML=r);var x=u.responseText=t.responseText;if(v.files&&x){var y,z;-1!==(y=x.indexOf("<body>"))&&(z=x.lastIndexOf("</body>"),-1===z&&(z=x.length),x=x.slice(y+6,z)),u.responseText=a.unEscapeHtml(x)}try{o=t.statusText}catch(A){h.error("xhr statusText error: "),h.error(A),o=""}w||!g.isLocal||v.crossDomain?w===n&&(w=l):w=u.responseText?i:m,u._ioReady(w,o)}}catch(A){a.log(A.stack||A,"error"),setTimeout(function(){throw A},0),t.onreadystatechange=a.noop,c||u._ioReady(-1,A)}}}),o}),KISSY.add("io/xdr-flash-transport",["./base","dom"],function(a,b){function c(a,b,c){if(!l){l=!0;var d='<object id="'+j+'" type="application/x-shockwave-flash" data="'+a+'" width="0" height="0"><param name="movie" value="'+a+'" /><param name="FlashVars" value="yid='+b+"&uid="+c+'&host=KISSY.IO" /><param name="allowScriptAccess" value="always" /></object>',e=k.createElement("div");g.prepend(e,k.body||k.documentElement),e.innerHTML=d}}function d(a){h.info("use XdrFlashTransport for: "+a.config.url),this.io=a}var e,f=b("./base"),g=b("dom"),h=a.getLogger("s/io"),i={},j="io_swf",k=a.Env.host.document,l=!1;return a.augment(d,{send:function(){var b=this,d=b.io,f=d.config,g=f.xdr||{};return c(g.src||a.Config.base+"io/assets/io.swf",1,1),e?(b._uid=a.guid(),i[b._uid]=b,void e.send(d._getUrlForSend(),{id:b._uid,uid:b._uid,method:f.type,data:f.hasContent&&f.data||{}})):void setTimeout(function(){b.send()},200)},abort:function(){e.abort(this._uid)},_xdrResponse:function(a,b){var c,d,e=this,f=b.id,g=b.c,h=e.io;switch(g&&(d=g.responseText)&&(h.responseText=decodeURI(d)),a){case"success":c={status:200,statusText:"success"},delete i[f];break;case"abort":delete i[f];break;case"timeout":case"transport error":case"failure":delete i[f],c={status:"status"in g?g.status:500,statusText:g.statusText||a}}c&&h._ioReady(c.status,c.statusText)}}),f.applyTo=function(b,c,d){var e=c.split(".").slice(1),g=f;a.each(e,function(a){g=g[a]}),g.apply(null,d)},f.xdrReady=function(){e=k.getElementById(j)},f.xdrResponse=function(a,b){var c=i[b.uid];c&&c._xdrResponse(a,b)},d}),KISSY.add("io/sub-domain-transport",["event/dom","dom","./xhr-transport-base"],function(a,b){function c(a){var b=this,c=a.config;b.io=a,c.crossDomain=!1,h.info("use SubDomainTransport for: "+c.url)}function d(){var a=this,b=a.io.config,c=b.uri,f=c.getHostname(),g=k[f];g.ready=1,e.detach(g.iframe,"load",d,a),a.send()}var e=b("event/dom"),f=b("dom"),g=b("./xhr-transport-base"),h=a.getLogger("s/io"),i="/sub_domain_proxy.html",j=a.Env.host.document,k={};return a.augment(c,g.proto,{send:function(){var b,c,h=this,l=h.io.config,m=l.uri,n=m.getHostname(),o=k[n],p=i;return l.xdr&&l.xdr.subDomain&&l.xdr.subDomain.proxy&&(p=l.xdr.subDomain.proxy),o&&o.ready?(h.nativeXhr=g.nativeXhr(0,o.iframe.contentWindow),void(h.nativeXhr?h.sendInternal():a.error("document.domain not set correctly!"))):(o?b=o.iframe:(o=k[n]={},b=o.iframe=j.createElement("iframe"),f.css(b,{position:"absolute",left:"-9999px",top:"-9999px"}),f.prepend(b,j.body||j.documentElement),c=new a.Uri,c.setScheme(m.getScheme()),c.setPort(m.getPort()),c.setHostname(n),c.setPath(p),b.src=c.toString()),void e.on(b,"load",d,h))}}),c}),KISSY.add("io/xhr-transport",["./base","./xhr-transport-base","./xdr-flash-transport","./sub-domain-transport"],function(a,b){function c(b){return k.domain&&a.endsWith(b,k.domain)}function d(a){var b,d=a.config,e=d.crossDomain,j=this,k=d.xdr||{},m=k.subDomain=k.subDomain||{};if(j.io=a,e&&!f.supportCORS){if(c(d.uri.getHostname())&&m.proxy!==!1)return new h(a);if("flash"===String(k.use)||!l)return new g(a)}b=j.nativeXhr=f.nativeXhr(e);var n="crossDomain: "+e+", use "+(l&&b instanceof l?"XDomainRequest":"XhrTransport")+" for: "+d.url;return i.debug(n),j}var e=b("./base"),f=b("./xhr-transport-base"),g=b("./xdr-flash-transport"),h=b("./sub-domain-transport"),i=a.getLogger("s/io"),j=a.Env.host,k=j.document,l=f.XDomainRequest_;return a.augment(d,f.proto,{send:function(){this.sendInternal()}}),e.setupTransport("*",d),e}),KISSY.add("io/script-transport",["./base"],function(a,b){function c(a){var b=a.config,c=this;return b.crossDomain?(c.io=a,e.info("use ScriptTransport for: "+b.url),c):new(d.getTransport("*"))(a)}var d=b("./base"),e=a.getLogger("s/io"),f=200,g=500;return d.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(b){return a.globalEval(b),b}}}}),a.augment(c,{send:function(){var b=this,c=b.io,d=c.config;b.script=a.getScript(c._getUrlForSend(),{charset:d.scriptCharset,success:function(){b._callback("success")},error:function(){b._callback("error")}})},_callback:function(a,b){var c=this,d=c.script,e=c.io;d&&(c.script=void 0,b||("error"!==a?e._ioReady(f,"success"):"error"===a&&e._ioReady(g,"script error")))},abort:function(){this._callback(0,1)}}),d.setupTransport("script",c),d}),KISSY.add("io/jsonp",["./base"],function(a,b){var c=b("./base"),d=a.Env.host;return c.setupConfig({jsonp:"callback",jsonpCallback:function(){return a.guid("jsonp")}}),c.on("start",function(b){var c=b.io,e=c.config,f=e.dataType;if("jsonp"===f[0]){delete e.contentType;var g,h,i=e.jsonpCallback,j="function"==typeof i?i():i,k=d[j];e.uri.query.set(e.jsonp,j),d[j]=function(b){arguments.length>1&&(b=a.makeArray(arguments)),g=[b]},c.fin(function(){if(d[j]=k,void 0===k)try{delete d[j]}catch(a){}else g&&k(g[0])}),h=e.converters,h.script=h.script||{},h.script.json=function(){return g||a.error(" not call jsonpCallback: "+j),g[0]},f.length=2,f[0]="script",f[1]="json"}}),c}),KISSY.add("io/form",["./base","dom","./form-serializer"],function(a,b){var c=b("./base"),d=b("dom"),e=b("./form-serializer"),f=a.Env.host,g=Array.prototype.slice,h=f.FormData;return c.on("start",function(b){var c,f,i,j,k,l=b.io,m=l.config,n=m.form;if(n){c=d.get(n),k=m.data;for(var o=!1,p={},q=d.query("input",c),r=0,s=q.length;s>r;r++){var t=q[r];if("file"===t.type.toLowerCase()){if(o=!0,!h)break;var u=g.call(t.files,0);p[d.attr(t,"name")]=u.length>1?u:u[0]||null}}o&&h&&(m.files=m.files||{},a.mix(m.files,p),delete m.contentType),!o||h?(j=e.getFormData(c),m.hasContent?(j=a.param(j,void 0,void 0,m.serializeArray),k?m.data+="&"+j:m.data=j):m.uri.query.add(j)):(i=m.dataType,f=i[0],"*"===f&&(f="text"),i.length=2,i[0]="iframe",i[1]=f)}}),c}),KISSY.add("io/iframe-transport",["dom","./base","event/dom"],function(a,b){function c(b){var c,d=a.guid("io-iframe"),e=g.getEmptyIframeSrc();return c=b.iframe=g.create("<iframe "+(e?' src="'+e+'" ':"")+' id="'+d+'" name="'+d+'" style="position:absolute;left:-9999px;top:-9999px;"/>'),g.prepend(c,k.body||k.documentElement),c}function d(b,c,d){var e,f,h,i,j=[];return a.each(b,function(b,l){for(e=a.isArray(b),f=a.makeArray(b),h=0;h<f.length;h++)i=k.createElement("input"),i.type="hidden",i.name=l+(e&&d?"[]":""),i.value=f[h],g.append(i,c),j.push(i)}),j}function e(a){g.remove(a)}function f(a){this.io=a,j.info("use IframeTransport for: "+a.config.url)}var g=b("dom"),h=b("./base"),i=b("event/dom"),j=a.getLogger("s/io"),k=a.Env.host.document,l=200,m=500,n=30,o=a.clone(h.getConfig().converters.text);return o.json=function(b){return a.parseJson(a.unEscapeHtml(b))},h.setupConfig({converters:{iframe:o,text:{iframe:function(a){return a}},xml:{iframe:function(a){return a}}}}),a.augment(f,{send:function(){function b(){i.on(f,"load error",j._callback,j),n.submit()}var e,f,h,j=this,k=j.io,l=k.config,m=l.data,n=g.get(l.form);j.attrs={target:g.attr(n,"target")||"",action:g.attr(n,"action")||"",encoding:g.attr(n,"encoding"),enctype:g.attr(n,"enctype"),method:g.attr(n,"method")},j.form=n,f=c(k),g.attr(n,{target:f.id,action:k._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"}),m&&(h=a.unparam(m)),h&&(e=d(h,n,l.serializeArray)),j.fields=e,6===a.UA.ie?setTimeout(b,0):b()},_callback:function(b){var c,d=this,f=d.form,h=d.io,j=b.type,k=h.iframe;if(k)if("abort"===j&&6===a.UA.ie?setTimeout(function(){g.attr(f,d.attrs)},0):g.attr(f,d.attrs),e(this.fields),i.detach(k),setTimeout(function(){g.remove(k)},n),h.iframe=null,"load"===j)try{c=k.contentWindow.document,c&&c.body&&(h.responseText=g.html(c.body),a.startsWith(h.responseText,"<?xml")&&(h.responseText=void 0)),h.responseXML=c&&c.XMLDocument?c.XMLDocument:c,c?h._ioReady(l,"success"):h._ioReady(m,"parser error")}catch(o){h._ioReady(m,"parser error")}else"error"===j&&h._ioReady(m,"error")},abort:function(){this._callback({type:"abort"})}}),h.setupTransport("iframe",f),h}),KISSY.add("io/methods",["promise","./base"],function(a,b){function c(b){var c,d,e,f=b.responseText,g=b.responseXML,h=b.config,i=h.converters,j=h.contents,k=h.dataType;if(f||g){for(d=b.mimeType||b.getResponseHeader("Content-Type");"*"===k[0];)k.shift();if(!k.length)for(c in j)if(j[c].test(d)){k[0]!==c&&k.unshift(c);break}k[0]=k[0]||"text";for(var l=0;l<k.length;l++){if("text"===k[l]&&void 0!==f){e=f;break}if("xml"===k[l]&&void 0!==g){e=g;break}}if(!e){var m={text:f,xml:g};a.each(["text","xml"],function(a){var b=k[0],c=i[a]&&i[a][b];return c&&m[a]?(k.unshift(a),e="text"===a?f:g,!1):void 0})}}for(var n=k[0],o=1;o<k.length;o++){c=k[o];var p=i[n]&&i[n][c];if(!p)throw"no covert for "+n+" => "+c;e=p(e),n=c}b.responseData=e}var d=b("promise"),e=b("./base"),f=200,g=300,h=304,i=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm;a.extend(e,d,{setRequestHeader:function(a,b){var c=this;return c.requestHeaders[a]=b,c},getAllResponseHeaders:function(){var a=this;return 2===a.state?a.responseHeadersString:null},getResponseHeader:function(a){var b,c,d=this;if(a=a.toLowerCase(),2===d.state){if(!(c=d.responseHeaders))for(c=d.responseHeaders={};b=i.exec(d.responseHeadersString);)c[b[1].toLowerCase()]=b[2];b=c[a]}return void 0===b?null:b},overrideMimeType:function(a){var b=this;return b.state||(b.mimeType=a),b},abort:function(a){var b=this;return a=a||"abort",b.transport&&b.transport.abort(a),b._ioReady(0,a),b},getNativeXhr:function(){var a=this.transport;return a?a.nativeXhr:null},_ioReady:function(b,d){var i=this;if(2!==i.state){i.state=2,i.readyState=4;var j;if(b>=f&&g>b||b===h)if(b===h)d="not modified",j=!0;else try{c(i),d="success",j=!0}catch(k){a.log(k.stack||k,"error"),setTimeout(function(){throw k},0),d="parser error"}else 0>b&&(b=0);i.status=b,i.statusText=d;var l,m=i.defer,n=i.config;(l=i.timeoutTimer)&&(clearTimeout(l),i.timeoutTimer=0);var o,p=j?"success":"error",q=[i.responseData,d,i],r=n.context,s={ajaxConfig:n,io:i};(o=n[p])&&o.apply(r,q),(o=n.complete)&&o.apply(r,q),e.fire(p,s),e.fire("complete",s),m[j?"resolve":"reject"](q)}},_getUrlForSend:function(){var b=this.config,c=b.uri,d=a.Uri.getComponents(b.url).query||"",e=c.toString.call(c,b.serializeArray);return e+(d?(c.query.has()?"&":"?")+d:d)}})}),KISSY.add("io",["io/form-serializer","io/base","io/xhr-transport","io/script-transport","io/jsonp","io/form","io/iframe-transport","io/methods"],function(a,b){function c(a,b,c,d,f){return"function"==typeof b&&(d=c,c=b,b=void 0),e({type:f||"get",url:a,data:b,success:c,dataType:d})}var d=b("io/form-serializer"),e=b("io/base");return b("io/xhr-transport"),b("io/script-transport"),b("io/jsonp"),b("io/form"),b("io/iframe-transport"),b("io/methods"),a.mix(e,{serialize:d.serialize,get:c,post:function(a,b,d,e){return"function"==typeof b&&(e=d,d=b,b=void 0),c(a,b,d,e,"post")},jsonp:function(a,b,d){return"function"==typeof b&&(d=b,b=void 0),c(a,b,d,"jsonp")},getScript:a.getScript,getJSON:function(a,b,d){return"function"==typeof b&&(d=b,b=void 0),c(a,b,d,"json")},upload:function(a,b,c,d,f){return"function"==typeof c&&(f=d,d=c,c=void 0),e({url:a,type:"post",dataType:f,form:b,data:c,success:d})}}),a.mix(a,{Ajax:e,IO:e,ajax:e,io:e,jsonp:e.jsonp}),e}),KISSY.add("stat",function(a){var b=a.DOM,c=function(a,b,c,d){var e="taobao",f=navigator.userAgent.toLowerCase().indexOf("taobrowser")>0?e:"chrome";a=a.replace(new RegExp("{{browser}}","gm"),f);var g=(new Date).getTime(),h="log_"+g,i=window[h]=new Image;if(i.onload=i.onerror=function(){window[h]=null},c)i.src=c;else{var j=b?"":"sfrom=etao&";d=d?d:"http://log.mmstat.com/search?",i.src=d+j+"t="+g+"&"+encodeURIComponent(a)}i=null};c.pv=function(c,d,e,f){var g=document.referrer?"&pre="+escape(document.referrer):"",c=c?c:"#J_PvStat";if(c){var h=b.attr(c,"data-stat")+g;a.Stat(h,d,e,f)}},c.orderForm=function(c,d,e){var f=a.Cookie.get("pid");a.Event.on(document,"click",function(g){var h=g.target;if("A"==h.tagName.toUpperCase()||(h=b.parent(h,"a"))){for(var i=a.trim(b.attr(h,"data-stat")),j=i,k=h.href,l=["s.etao.com","s.taobao.com","search.taobao.com","taobao.etao.com"],m=l.length,n=!1;m--;)if(k.indexOf(l[m])>-1){n=!0;break}if(i&&n){if(f){for(var o=i.split("."),p=(o.length,7),q=0;p>q;q++)o[q]||"0"===o[q]||o.push("0");o[p-1]=f,i=o.join(".")}if(i="stp="+i,-1!==k.indexOf("stp=")){var r=new RegExp("[&?]stp=[^&]*(&|$)","i");h.href=k.replace(r,"$1")}h.href=-1===h.href.indexOf("?")?h.href+"?":h.href+"&",h.href+=i}if(j&&a.Stat){var s=document.referrer?"&pre="+escape(document.referrer):"",j="click="+j+s;a.Stat(j,c,d,e)}}})},c.init=function(a,b,c,d){KISSY.Stat.pv(a,b,c,d),KISSY.Stat.orderForm(b,c,d)},a.mix(a,{Stat:c})}),KISSY.add("node/base",["dom","event/dom"],function(a,b){function c(b,e,f){var g,l=this;if(!(l instanceof c))return new c(b,e,f);if(!b)return l;if("string"==typeof b){if(g=d.create(b,e,f),g.nodeType===h.DOCUMENT_FRAGMENT_NODE)return i.apply(this,j(g.childNodes)),l}else{if(a.isArray(b)||k(b))return i.apply(l,j(b)),l;g=b}return l[0]=g,l.length=1,l}var d=b("dom"),e=b("event/dom"),f=Array.prototype,g=f.slice,h=d.NodeType,i=f.push,j=a.makeArray,k=d.isDomNodeList;return c.prototype={constructor:c,isNodeList:!0,length:0,item:function(a){var b=this;return"number"==typeof a?a>=b.length?null:new c(b[a]):new c(a)},add:function(a,b,d){"number"==typeof b&&(d=b,b=void 0);var e=c.all(a,b).getDOMNodes(),g=new c(this);if(void 0===d)i.apply(g,e);else{var h=[d,0];h.push.apply(h,e),f.splice.apply(g,h)}return g},slice:function(){return new c(g.apply(this,arguments))},getDOMNodes:function(){return g.call(this)},each:function(b,d){var e=this;return a.each(e,function(a,f){return a=new c(a),b.call(d||a,a,f,e)}),e},getDOMNode:function(){return this[0]},end:function(){var a=this;return a.__parent||a},filter:function(a){return new c(d.filter(this,a))},all:function(a){var b,d=this;return b=d.length>0?c.all(a,d):new c,b.__parent=d,b},one:function(a){var b=this,c=b.all(a),d=c.length?c.slice(0,1):null;return d&&(d.__parent=b),d}},a.mix(c,{all:function(b,e){return"string"==typeof b&&(b=a.trim(b))&&b.length>=3&&a.startsWith(b,"<")&&a.endsWith(b,">")?(e&&(e.getDOMNode&&(e=e[0]),e=e.ownerDocument||e),new c(b,void 0,e)):new c(d.query(b,e))},one:function(a,b){var d=c.all(a,b);return d.length?d.slice(0,1):null}}),c.NodeType=h,c.KeyCode=e.KeyCode,c.Gesture=e.Gesture,c.REPLACE_HISTORY=e.REPLACE_HISTORY,c}),KISSY.add("node/attach",["dom","event/dom","./base"],function(a,b){function c(a,b,c){c.unshift(b);var d=f[a].apply(f,c);return void 0===d?b:d}function d(a,b,c){c.unshift(b);var d=f[a].apply(f,c);return void 0===d?b:null===d?null:new h(d)}function e(b,d,e,g){return void 0!==g[e]||a.isObject(g[0])?c(b,d,g):(g.unshift(d),f[b].apply(f,g))}var f=b("dom"),g=b("event/dom"),h=b("./base"),i=h.prototype,j=a.makeArray,k=["nodeName","isCustomDomain","getEmptyIframeSrc","equals","contains","index","scrollTop","scrollLeft","height","width","innerHeight","innerWidth","outerHeight","outerWidth","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","scrollIntoView","remove","empty","removeData","hasData","unselectable","wrap","wrapAll","replaceWith","wrapInner","unwrap"],l=["getWindow","getDocument","filter","first","last","parent","closest","next","prev","clone","siblings","contents","children"],m={attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},n=["on","detach","delegate","undelegate"],o=["fire","fireHandler"];h.KeyCode=g.KeyCode,a.each(k,function(a){i[a]=function(){var b=j(arguments);return c(a,this,b)}}),a.each(l,function(a){i[a]=function(){var b=j(arguments);return d(a,this,b)}}),a.each(m,function(a,b){i[b]=function(){var c=j(arguments);return e(b,this,a,c)}}),a.each(n,function(a){i[a]=function(){var b=this,c=j(arguments);return c.unshift(b),g[a].apply(g,c),b}}),a.each(o,function(a){i[a]=function(){var b=this,c=j(arguments);return c.unshift(b),g[a].apply(g,c)}})}),KISSY.add("node/override",["dom","./base","./attach"],function(a,b){var c=b("dom"),d=b("./base");b("./attach");var e=d.prototype;a.each(["append","prepend","before","after"],function(a){e[a]=function(b){var d=b,e=this;return"string"==typeof d&&(d=c.create(d)),d&&c[a](d,e),e}}),a.each(["wrap","wrapAll","replaceWith","wrapInner"],function(a){var b=e[a];e[a]=function(a){var c=this;return"string"==typeof a&&(a=d.all(a,c[0].ownerDocument)),b.call(c,a)}})}),KISSY.add("node/anim",["./base","dom","anim"],function(a,b){function c(a,b,c){for(var d=[],e={},f=c||0;b>f;f++)d.push.apply(d,g[f]);for(f=0;f<d.length;f++)e[d[f]]=a;return e}var d=b("./base"),e=b("dom"),f=b("anim"),g=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];a.augment(d,{animate:function(){var b=this,c=a.makeArray(arguments);return a.each(b,function(b){var d=a.clone(c),e=d[0];e.to?(e.node=b,new f(e).run()):f.apply(void 0,[b].concat(d)).run()}),b},stop:function(b,c,d){var e=this;return a.each(e,function(a){f.stop(a,b,c,d)}),e},pause:function(b,c){var d=this;return a.each(d,function(a){f.pause(a,c)}),d},resume:function(b,c){var d=this;return a.each(d,function(a){f.resume(a,c)}),d},isRunning:function(){for(var a=this,b=0;b<a.length;b++)if(f.isRunning(a[b]))return!0;return!1},isPaused:function(){for(var a=this,b=0;b<a.length;b++)if(f.isPaused(a[b]))return!0;return!1}}),a.each({show:c("show",3),hide:c("hide",3),toggle:c("toggle",3),fadeIn:c("show",3,2),fadeOut:c("hide",3,2),fadeToggle:c("toggle",3,2),slideDown:c("show",1),slideUp:c("hide",1),slideToggle:c("toggle",1)},function(b,c){d.prototype[c]=function(d,g,h){var i=this;return e[c]&&!d?e[c](i):a.each(i,function(a){new f(a,b,d,h,g).run()}),i}})}),KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(a,b){var c=b("node/base");return b("node/attach"),b("node/override"),b("node/anim"),a.mix(a,{Node:c,NodeList:c,one:c.one,all:c.all}),c}),KISSY.add("dom/base/api",[],function(a){var b=a.Env.host||{},c=b.document,d=a.UA,e=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,f={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},g={isCustomDomain:function(a){a=a||b,a=g.get(a);var c=a.document.domain,d=a.location.hostname;return c!==d&&c!=="["+d+"]"},getEmptyIframeSrc:function(a){return a=a||b,a=g.get(a),d.ie&&g.isCustomDomain(a)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+a.document.domain+'";document.close();')+"}())":""},NodeType:f,getWindow:function(c){if(!c)return b;if(c=g.get(c),a.isWindow(c))return c;var d=c;return d.nodeType!==f.DOCUMENT_NODE&&(d=c.ownerDocument),d.defaultView||d.parentWindow},getDocument:function(b){return b?(b=g.get(b),a.isWindow(b)?b.document:b.nodeType===f.DOCUMENT_NODE?b:b.ownerDocument):c},isDomNodeList:function(a){return a&&!a.nodeType&&a.item&&!a.setTimeout},nodeName:function(a){var b=g.get(a),c=b.nodeName.toLowerCase();if(d.ie){var e=b.scopeName;e&&"HTML"!==e&&(c=e.toLowerCase()+":"+c)}return c},_RE_NUM_NO_PX:new RegExp("^("+e+")(?!px)[a-z%]+$","i")};return a.mix(g,f),g}),KISSY.add("dom/base/attr",["./api"],function(a,b){function c(a){return null==a?"":a+""}function d(a,b){b=s[b]||b;var c=u[b];return c&&c.get?c.get(a,b):a[b]}var e=b("./api"),f=a.Env.host.document,g=e.NodeType,h=f&&f.documentElement,i="",j=e.nodeName,k=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,l=/^(?:button|input|object|select|textarea)$/i,m=/^a(?:rea)?$/i,n=/:|^on/,o=/\r/g,p={},q={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},r={tabindex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):l.test(a.nodeName)||m.test(a.nodeName)&&a.href?0:void 0}}},s={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},t={get:function(a,b){return e.prop(a,b)?b.toLowerCase():void 0},set:function(a,b,c){var d;return b===!1?e.removeAttr(a,c):(d=s[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},u={},v={},w={select:{get:function(a){var b,c,d,f=a.selectedIndex,g=a.options,h="select-one"===String(a.type);if(0>f)return null;if(h)return e.val(g[f]);for(b=[],c=0,d=g.length;d>c;++c)g[c].selected&&b.push(e.val(g[c]));return b},set:function(b,c){var d=a.makeArray(c),f=b.options;return a.each(f,function(b){b.selected=a.inArray(e.val(b),d)}),d.length||(b.selectedIndex=-1),d}}};return a.each(["radio","checkbox"],function(b){w[b]={get:function(a){return null===a.getAttribute("value")?"on":a.value},set:function(b,c){return a.isArray(c)?(b.checked=a.inArray(e.val(b),c),1):void 0}}}),r.style={get:function(a){return a.style.cssText}},a.mix(e,{_valHooks:w,_propFix:s,_attrHooks:r,_propHooks:u,_attrNodeHook:v,_attrFix:p,prop:function(b,c,f){var g,h,i,j=e.query(b);if(a.isPlainObject(c))return void a.each(c,function(a,b){e.prop(j,b,a)});if(c=s[c]||c,i=u[c],void 0!==f)for(g=j.length-1;g>=0;g--)h=j[g],i&&i.set?i.set(h,f,c):h[c]=f;else if(j.length)return d(j[0],c);return void 0},hasProp:function(a,b){var c,f,g=e.query(a),h=g.length;for(c=0;h>c;c++)if(f=g[c],void 0!==d(f,b))return!0;return!1},removeProp:function(a,b){b=s[b]||b;var c,d,f=e.query(a);for(c=f.length-1;c>=0;c--){d=f[c];try{d[b]=void 0,delete d[b]}catch(g){}}},attr:function(b,c,d,f){var h,l,m,o=e.query(b),s=o[0];if(a.isPlainObject(c)){f=d;for(var u in c)e.attr(o,u,c[u],f);return void 0}if(f&&q[c])return e[c](b,d);if(c=c.toLowerCase(),f&&q[c])return e[c](b,d);if(c=p[c]||c,h=k.test(c)?t:n.test(c)?v:r[c],void 0===d){if(s&&s.nodeType===g.ELEMENT_NODE){if("form"===j(s)&&(h=v),h&&h.get)return h.get(s,c);if(m=s.getAttribute(c),""===m){var w=s.getAttributeNode(c);if(!w||!w.specified)return void 0}return null===m?void 0:m}}else for(l=o.length-1;l>=0;l--)s=o[l],s&&s.nodeType===g.ELEMENT_NODE&&("form"===j(s)&&(h=v),h&&h.set?h.set(s,d,c):s.setAttribute(c,i+d));
return void 0},removeAttr:function(a,b){b=b.toLowerCase(),b=p[b]||b;var c,d,f,h=e.query(a);for(f=h.length-1;f>=0;f--)d=h[f],d.nodeType===g.ELEMENT_NODE&&(d.removeAttribute(b),k.test(b)&&(c=s[b]||b)in d&&(d[c]=!1))},hasAttr:h&&!h.hasAttribute?function(a,b){b=b.toLowerCase();var c,d,f,g=e.query(a);for(c=0;c<g.length;c++)if(d=g[c],f=d.getAttributeNode(b),f&&f.specified)return!0;return!1}:function(a,b){var c,d=e.query(a),f=d.length;for(c=0;f>c;c++)if(d[c].hasAttribute(b))return!0;return!1},val:function(b,d){var f,g,h,i,k,l;if(void 0===d)return h=e.get(b),h?(f=w[j(h)]||w[h.type],f&&"get"in f&&void 0!==(g=f.get(h,"value"))?g:(g=h.value,"string"==typeof g?g.replace(o,""):null==g?"":g)):void 0;for(i=e.query(b),k=i.length-1;k>=0;k--){if(h=i[k],1!==h.nodeType)return void 0;l=d,null==l?l="":"number"==typeof l?l+="":a.isArray(l)&&(l=a.map(l,c)),f=w[j(h)]||w[h.type],f&&"set"in f&&void 0!==f.set(h,l,"value")||(h.value=l)}return void 0},text:function(a,b){var c,d,f,h;if(void 0===b)return c=e.get(a),e._getText(c);for(d=e.query(a),f=d.length-1;f>=0;f--)c=d[f],h=c.nodeType,h===g.ELEMENT_NODE?(e.cleanData(c.getElementsByTagName("*")),"textContent"in c?c.textContent=b:c.innerText=b):(h===g.TEXT_NODE||h===g.CDATA_SECTION_NODE)&&(c.nodeValue=b);return void 0},_getText:function(a){return a.textContent}}),e}),KISSY.add("dom/base/class",["./api"],function(a,b){function c(b){b=a.trim(b||"");for(var c,d=b.split(i),e=[],f=d.length,g=0;f>g;g++)(c=d[g])&&e.push(c);return e}function d(a){return function(b,c){var d,e,f,h=b.classList,i=g.call(arguments,2);for(d=0,e=c.length;e>d;d++)(f=c[d])&&h[a].apply(h,[f].concat(i))}}function e(a){return function(b,d){var e=c(d),i=g.call(arguments,2);f.query(b).each(function(b){b.nodeType===h.ELEMENT_NODE&&f[a].apply(f,[b,e].concat(i))})}}var f=b("./api"),g=[].slice,h=f.NodeType,i=/[\.\s]\s*\.?/;return a.mix(f,{_hasClass:function(a,b){var c,d,e,f=a.classList;if(f.length){for(c=0,d=b.length;d>c;c++)if(e=b[c],e&&!f.contains(e))return!1;return!0}return!1},_addClass:d("add"),_removeClass:d("remove"),_toggleClass:d("toggle"),hasClass:function(a,b){var d=!1;return b=c(b),f.query(a).each(function(a){return a.nodeType===h.ELEMENT_NODE&&f._hasClass(a,b)?(d=!0,!1):void 0}),d},replaceClass:function(a,b,c){f.removeClass(a,b),f.addClass(a,c)},addClass:e("_addClass"),removeClass:e("_removeClass"),toggleClass:e("_toggleClass")}),f}),KISSY.add("dom/base/create",["./api"],function(a,b){function c(a,b){return a.getElementsByTagName(b)}function d(a){var b=a&&a!==n?a.createElement(r):t;return b===t&&(b.innerHTML=""),b}function e(a,b){var c=d(b);return c.innerHTML="m<div>"+a+"</div>",c.lastChild}function f(a){try{return void(a.innerHTML="")}catch(b){}for(var c;c=a.lastChild;)g(c,a)}function g(a,b){b&&(y&&b.canHaveChildren&&"removeNode"in a?(a.firstChild&&f(a),a.removeNode(!1)):b.removeChild(a))}function h(a,b,d){var e=b.nodeType;if(e===o.DOCUMENT_FRAGMENT_NODE)for(var f=b.childNodes,g=d.childNodes,i=0;f[i];)g[i]&&h(a,f[i],g[i]),i++;else if(e===o.ELEMENT_NODE)for(var j=c(b,"*"),k=c(d,"*"),l=0;j[l];)k[l]&&a(j[l],k[l]),l++}function i(b,c){var d,e,f=a.require("event/dom");if(c.nodeType!==o.ELEMENT_NODE||l.hasData(b)){d=l.data(b);for(e in d)l.data(c,e,d[e]);f&&f.clone(b,c)}}function j(b,c){return a.isPlainObject(c)&&(b.nodeType===o.ELEMENT_NODE?l.attr(b,c,!0):b.nodeType===o.DOCUMENT_FRAGMENT_NODE&&l.attr(b.childNodes,c,!0)),b}function k(b){var c,d,e,f=null;if(b&&(b.push||b.item)&&b[0])for(d=b[0].ownerDocument,f=d.createDocumentFragment(),b=a.makeArray(b),c=0,e=b.length;e>c;c++)f.appendChild(b[c]);else m.error("Unable to convert "+b+" to fragment.");return f}var l=b("./api"),m=a.getLogger("s/dom"),n=a.Env.host.document,o=l.NodeType,p=a.UA,q=p.ieMode,r="div",s="parentNode",t=n&&n.createElement(r),u=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/<([\w:]+)/,w=/^\s+/,x=/\s+$/,y=!!(q&&9>q),z=y,A=/<|&#?\w+;/,B=n&&"outerHTML"in n.documentElement,C=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;a.mix(l,{create:function(b,c,d,f){var g=null;if(!b)return g;if(b.nodeType)return l.clone(b);if("string"!=typeof b)return g;void 0===f&&(f=!0),f&&(b=a.trim(b));var h,i,m,o,p,q=l._creators,t=d||n,y=r;return A.test(b)?(m=C.exec(b))?g=t.createElement(m[1]):(b=b.replace(u,"<$1></$2>"),(m=v.exec(b))&&(o=m[1])&&(y=o.toLowerCase()),h=(q[y]||e)(b,t),z&&(i=b.match(w))&&h.insertBefore(t.createTextNode(i[0]),h.firstChild),z&&/\S/.test(b)&&(i=b.match(x))&&h.appendChild(t.createTextNode(i[0])),p=h.childNodes,1===p.length?g=p[0][s].removeChild(p[0]):p.length?g=k(p):a.error(b+" : create node error")):g=t.createTextNode(b),j(g,c)},_fixCloneAttributes:function(a,b){"textarea"===l.nodeName(a)&&(b.defaultValue=a.defaultValue,b.value=a.value)},_creators:{div:e},_defaultCreator:e,html:function(a,b,e){var f,g,h,i=l.query(a),j=i[0],k=!1;if(!j)return null;if(void 0===b){if(j.nodeType===o.ELEMENT_NODE)return j.innerHTML;if(j.nodeType===o.DOCUMENT_FRAGMENT_NODE){var m=d(j.ownerDocument);return m.appendChild(j),m.innerHTML}return null}if(b+="",!(b.match(/<(?:script|style|link)/i)||z&&b.match(w)||G[(b.match(v)||["",""])[1].toLowerCase()]))try{for(g=i.length-1;g>=0;g--)h=i[g],h.nodeType===o.ELEMENT_NODE&&(l.cleanData(c(h,"*")),h.innerHTML=b);k=!0}catch(n){}return void(k||(f=l.create(b,0,j.ownerDocument,0),l.empty(i),l.append(f,i,e)))},outerHtml:function(a,b,c){var e,f,g,h=l.query(a),i=h.length,j=h[0];if(!j)return null;if(void 0===b)return B&&j.nodeType!==l.DOCUMENT_FRAGMENT_NODE?j.outerHTML:(e=d(j.ownerDocument),e.appendChild(l.clone(j,!0)),e.innerHTML);if(b+="",!b.match(/<(?:script|style|link)/i)&&B)for(f=i-1;f>=0;f--)j=h[f],j.nodeType===o.ELEMENT_NODE&&(l.cleanData(j,1),j.outerHTML=b);else g=l.create(b,0,j.ownerDocument,0),l.insertBefore(g,h,c),l.remove(h);return void 0},remove:function(b,d){var e,f,h,i=l.query(b),j=a.require("event/dom");for(h=i.length-1;h>=0;h--)e=i[h],d||e.nodeType!==o.ELEMENT_NODE||(f=a.makeArray(c(e,"*")),f.push(e),l.removeData(f),j&&j.detach(f)),g(e,e.parentNode)},clone:function(a,b,c,d){"object"==typeof b&&(d=b.deepWithDataAndEvent,c=b.withDataAndEvent,b=b.deep);var e,f,g=l.get(a),j=l._fixCloneAttributes;return g?(f=g.nodeType,e=g.cloneNode(b),(f===o.ELEMENT_NODE||f===o.DOCUMENT_FRAGMENT_NODE)&&(j&&f===o.ELEMENT_NODE&&j(g,e),b&&j&&h(j,g,e)),c&&(i(g,e),b&&d&&h(i,g,e)),e):null},empty:function(a){var b,c,d=l.query(a);for(c=d.length-1;c>=0;c--)b=d[c],l.remove(b.childNodes)},_nodeListToFragment:k}),l.outerHTML=l.outerHtml;var D,E=l._creators,F=l.create,G={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"};for(D in G)!function(a){E[D]=function(b,c){return F("<"+a+">"+b+"</"+a+">",void 0,c)}}(G[D]);return E.option=E.optgroup=function(a,b){return F('<select multiple="multiple">'+a+"</select>",void 0,b)},l}),KISSY.add("dom/base/data",["./api"],function(a,b){var c=b("./api"),d=a.Env.host,e="_ks_data_"+a.now(),f={},g={},h={applet:1,object:1,embed:1},i={hasData:function(b,c){if(b)if(void 0!==c){if(c in b)return!0}else if(!a.isEmptyObject(b))return!0;return!1}},j={hasData:function(a,b){if(a==d)return j.hasData(g,b);var c=a[e];return i.hasData(c,b)},data:function(a,b,c){if(a==d)return j.data(g,b,c);var f=a[e];return void 0===c?void 0!==b?f&&f[b]:f=a[e]=a[e]||{}:(f=a[e]=a[e]||{},void(f[b]=c))},removeData:function(b,c){if(b==d)return j.removeData(g,c);var f=b[e];if(void 0!==c)delete f[c],a.isEmptyObject(f)&&j.removeData(b);else try{delete b[e]}catch(h){b[e]=void 0}}},k={hasData:function(a,b){var c=a[e];if(!c)return!1;var d=f[c];return i.hasData(d,b)},data:function(b,c,d){if(h[b.nodeName.toLowerCase()])return void 0;var g,i=b[e];if(!i){if(void 0!==c&&void 0===d)return void 0;i=b[e]=a.guid()}return g=f[i],void 0===d?void 0!==c?g&&g[c]:g=f[i]=f[i]||{}:(g=f[i]=f[i]||{},void(g[c]=d))},removeData:function(b,c){var d,g=b[e];if(g)if(d=f[g],void 0!==c)delete d[c],a.isEmptyObject(d)&&k.removeData(b);else{delete f[g];try{delete b[e]}catch(h){b[e]=void 0}b.removeAttribute&&b.removeAttribute(e)}}};return a.mix(c,{__EXPANDO:e,hasData:function(a,b){for(var d=!1,e=c.query(a),f=0;f<e.length;f++){var g=e[f];if(d=g.nodeType?k.hasData(g,b):j.hasData(g,b))return d}return d},data:function(b,d,e){var f=c.query(b),g=f[0];if(a.isPlainObject(d)){for(var h in d)c.data(f,h,d[h]);return void 0}if(void 0===e){if(g)return g.nodeType?k.data(g,d):j.data(g,d)}else for(var i=f.length-1;i>=0;i--)g=f[i],g.nodeType?k.data(g,d,e):j.data(g,d,e);return void 0},removeData:function(a,b){var d,e,f=c.query(a);for(e=f.length-1;e>=0;e--)d=f[e],d.nodeType?k.removeData(d,b):j.removeData(d,b)},cleanData:function(b,d){var e,f,g=c.query(b),h=a.require("event/dom");for(f=g.length-1;f>=0;f--)if(e=g[f],e.nodeType){var i=d&&a.makeArray(e.getElementsByTagName("*"))||[];i.push(e);for(var l=0,m=i.length;m>l;l++)k.removeData(i[l]);h&&h.detach(i)}else j.removeData(e)}}),c}),KISSY.add("dom/base/insertion",["./api"],function(a,b){function c(a){return!a.type||o.test(a.type)}function d(a,b){var e,f,g,h=[];for(e=0;a[e];e++)if(f=a[e],g=k(f),f.nodeType===i.DOCUMENT_FRAGMENT_NODE)h.push.apply(h,d(l(f.childNodes),b));else if("script"===g&&c(f))f.parentNode&&f.parentNode.removeChild(f),b&&b.push(f);else{if(f.nodeType===i.ELEMENT_NODE&&!j.test(g)){var n,o,p=[],q=f.getElementsByTagName("script");for(o=0;o<q.length;o++)n=q[o],c(n)&&p.push(n);m.apply(a,[e+1,0].concat(p))}h.push(f)}return h}function e(b){if(b.src)a.getScript(b.src);else{var c=a.trim(b.text||b.textContent||b.innerHTML||"");c&&a.globalEval(c)}}function f(b,c,f,h){b=g.query(b),h&&(h=[]),b=d(b,h),g._fixInsertionChecked&&g._fixInsertionChecked(b),c=g.query(c);var i,j,k,l,m,n=b.length,o=c.length;if((n||h&&h.length)&&o)for(i=g._nodeListToFragment(b),o>1&&(m=g.clone(i,!0),c=a.makeArray(c)),j=0;o>j;j++)k=c[j],i&&(l=j>0?g.clone(m,!0):i,f(l,k)),h&&h.length&&a.each(h,e)}var g=b("./api"),h="parentNode",i=g.NodeType,j=/^(?:button|input|object|select|textarea)$/i,k=g.nodeName,l=a.makeArray,m=[].splice,n="nextSibling",o=/\/(java|ecma)script/i;return a.mix(g,{_fixInsertionChecked:null,insertBefore:function(a,b,c){f(a,b,function(a,b){b[h]&&b[h].insertBefore(a,b)},c)},insertAfter:function(a,b,c){f(a,b,function(a,b){b[h]&&b[h].insertBefore(a,b[n])},c)},appendTo:function(a,b,c){f(a,b,function(a,b){b.appendChild(a)},c)},prependTo:function(a,b,c){f(a,b,function(a,b){b.insertBefore(a,b.firstChild)},c)},wrapAll:function(a,b){b=g.clone(g.get(b),!0),a=g.query(a),a[0].parentNode&&g.insertBefore(b,a[0]);for(var c;(c=b.firstChild)&&1===c.nodeType;)b=c;g.appendTo(a,b)},wrap:function(b,c){b=g.query(b),c=g.get(c),a.each(b,function(a){g.wrapAll(a,c)})},wrapInner:function(b,c){b=g.query(b),c=g.get(c),a.each(b,function(a){var b=a.childNodes;b.length?g.wrapAll(b,c):a.appendChild(c)})},unwrap:function(b){b=g.query(b),a.each(b,function(a){var b=a.parentNode;g.replaceWith(b,b.childNodes)})},replaceWith:function(a,b){var c=g.query(a);b=g.query(b),g.remove(b,!0),g.insertBefore(b,c),g.remove(c)}}),a.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(a,b){g[b]=g[a]}),g}),KISSY.add("dom/base/offset",["./api"],function(a,b){function c(a){var b,c,d,e=a.ownerDocument,f=e.body;return a.getBoundingClientRect?(b=a.getBoundingClientRect(),c=b[y],d=b[z],c-=l.clientLeft||f.clientLeft||0,d-=l.clientTop||f.clientTop||0,{left:c,top:d}):{left:0,top:0}}function d(a){var b=c(a),d=m(a);return b.left+=g[A](d),b.top+=g[B](d),b}function e(a,b){var e,f={left:0,top:0},g=m(a),h=a;b=b||g;do e=g==b?d(h):c(h),f.left+=e.left,f.top+=e.top;while(g&&g!=b&&(h=g.frameElement)&&(g=g.parent));return f}function f(a,b){"static"===g.css(a,q)&&(a.style[q]=r);var c,d,f=e(a),h={};for(d in b)c=parseFloat(g.css(a,d))||0,h[d]=c+b[d]-f[d];g.css(a,h)}var g=b("./api"),h=a.Env.host,i=a.UA,j=h.document,k=g.NodeType,l=j&&j.documentElement,m=g.getWindow,n="CSS1Compat",o="compatMode",p=Math.max,q="position",r="relative",s="document",t="body",u="documentElement",v="viewport",w="scroll",x="client",y="left",z="top",A=w+"Left",B=w+"Top";return a.mix(g,{offset:function(a,b,c){var d;if(void 0===b){d=g.get(a);var h;return d&&(h=e(d,c)),h}var i,j=g.query(a);for(i=j.length-1;i>=0;i--)d=j[i],f(d,b);return void 0},scrollIntoView:function(b,c,d,e){var f,h;if(f=g.get(b)){c&&(c=g.get(c)),c||(c=f.ownerDocument),c.nodeType===k.DOCUMENT_NODE&&(c=m(c)),a.isPlainObject(d)&&(e=d.allowHorizontalScroll,h=d.onlyScrollIfNeeded,d=d.alignWithTop),e=void 0===e?!0:e;var i,j,l,n,o,p,q,r,s,t,u=a.isWindow(c),v=g.offset(f),w=g.outerHeight(f),x=g.outerWidth(f);u?(q=c,t=g.height(q),s=g.width(q),r={left:g.scrollLeft(q),top:g.scrollTop(q)},o={left:v[y]-r[y],top:v[z]-r[z]},p={left:v[y]+x-(r[y]+s),top:v[z]+w-(r[z]+t)},n=r):(i=g.offset(c),j=c.clientHeight,l=c.clientWidth,n={left:g.scrollLeft(c),top:g.scrollTop(c)},o={left:v[y]-(i[y]+(parseFloat(g.css(c,"borderLeftWidth"))||0)),top:v[z]-(i[z]+(parseFloat(g.css(c,"borderTopWidth"))||0))},p={left:v[y]+x-(i[y]+l+(parseFloat(g.css(c,"borderRightWidth"))||0)),top:v[z]+w-(i[z]+j+(parseFloat(g.css(c,"borderBottomWidth"))||0))}),h?(o.top<0||p.top>0)&&(d===!0?g.scrollTop(c,n.top+o.top):d===!1?g.scrollTop(c,n.top+p.top):o.top<0?g.scrollTop(c,n.top+o.top):g.scrollTop(c,n.top+p.top)):(d=void 0===d?!0:!!d,d?g.scrollTop(c,n.top+o.top):g.scrollTop(c,n.top+p.top)),e&&(h?(o.left<0||p.left>0)&&(d===!0?g.scrollLeft(c,n.left+o.left):d===!1?g.scrollLeft(c,n.left+p.left):o.left<0?g.scrollLeft(c,n.left+o.left):g.scrollLeft(c,n.left+p.left)):(d=void 0===d?!0:!!d,d?g.scrollLeft(c,n.left+o.left):g.scrollLeft(c,n.left+p.left)))}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0}),a.each(["Left","Top"],function(a,b){var c=w+a;g[c]=function(d,e){if("number"==typeof d)return arguments.callee(h,d);d=g.get(d);var f,i,j,l,n;return d&&d.nodeType===k.ELEMENT_NODE?void 0!==e?d[c]=parseFloat(e):f=d[c]:(l=m(d),void 0!==e?(e=parseFloat(e),i="Left"===a?e:g.scrollLeft(l),j="Top"===a?e:g.scrollTop(l),l.scrollTo(i,j)):(f=l["page"+(b?"Y":"X")+"Offset"],"number"!=typeof f&&(n=l[s],f=n[u][c],"number"!=typeof f&&(f=n[t][c])))),f}}),a.each(["Width","Height"],function(a){g["doc"+a]=function(b){b=g.get(b);var c=g.getDocument(b);return p(c[u][w+a],c[t][w+a],g[v+a](c))},g[v+a]=function(b){b=g.get(b);var c=m(b),d=c["inner"+a];if(i.mobile&&d)return d;var e=x+a,f=c[s],h=f[t],j=f[u],k=j[e];return f[o]===n&&k||h&&h[e]||k}}),g}),KISSY.add("dom/base/style",["./api"],function(a,b){function c(){return arguments[1].toUpperCase()}function d(a){return a.replace(A,"ms-").replace(H,c)}function e(a){var b,c,d=G[a];return G[a]||(b=s.body||s.documentElement,c=s.createElement(a),m.prepend(c,b),d=m.css(c,"display"),b.removeChild(c),G[a]=d),d}function f(a,b,c){var d,e={},f=a.style;for(d in b)e[d]=f[d],f[d]=b[d];c.call(a);for(d in b)f[d]=e[d]}function g(a,b,c){var e,f,g;if(3===a.nodeType||8===a.nodeType||!(e=a.style))return void 0;if(b=d(b),g=E[b],b=F[b]||b,void 0!==c){if(null===c||c===B?c=B:isNaN(Number(c))||z[b]||(c+=C),g&&g.set&&(c=g.set(a,c)),void 0!==c){try{e[b]=c}catch(h){n.warn("css set error:"+h)}c===B&&e.removeAttribute&&e.removeAttribute(b)}return void(e.cssText||(p.webkit&&(e=a.outerHTML),a.removeAttribute("style")))}return g&&"get"in g&&void 0!==(f=g.get(a,!1))||(f=e[b]),void 0===f?"":f}function h(a){var b,c=arguments;return 0!==a.offsetWidth?b=i.apply(void 0,c):f(a,L,function(){b=i.apply(void 0,c)}),b}function i(b,c,d){if(a.isWindow(b))return c===u?m.viewportWidth(b):m.viewportHeight(b);if(9===b.nodeType)return c===u?m.docWidth(b):m.docHeight(b);var e=c===u?["Left","Right"]:["Top","Bottom"],f=c===u?b.offsetWidth:b.offsetHeight;return f>0?("border"!==d&&a.each(e,function(a){d||(f-=parseFloat(m.css(b,"padding"+a))||0),"margin"===d?f+=parseFloat(m.css(b,d+a))||0:f-=parseFloat(m.css(b,"border"+a+"Width"))||0}),f):(f=m._getComputedStyle(b,c),(null===f||Number(f)<0)&&(f=b.style[c]||0),f=parseFloat(f)||0,d&&a.each(e,function(a){f+=parseFloat(m.css(b,"padding"+a))||0,"padding"!==d&&(f+=parseFloat(m.css(b,"border"+a+"Width"))||0),"margin"===d&&(f+=parseFloat(m.css(b,d+a))||0)}),f)}function j(a){var b,c,d={top:0,left:0};return"fixed"===m.css(a,"position")?c=a.getBoundingClientRect():(b=k(a),c=m.offset(a),d=m.offset(b),d.top+=parseFloat(m.css(b,"borderTopWidth"))||0,d.left+=parseFloat(m.css(b,"borderLeftWidth"))||0),c.top-=parseFloat(m.css(a,"marginTop"))||0,c.left-=parseFloat(m.css(a,"marginLeft"))||0,{top:c.top-d.top,left:c.left-d.left}}function k(a){for(var b=a.offsetParent||(a.ownerDocument||s).body;b&&!M.test(b.nodeName)&&"static"===m.css(b,"position");)b=b.offsetParent;return b}var l,m=b("./api"),n=a.getLogger("s/dom"),o=a.Env.host,p=a.UA,q=a.Features,r=m.nodeName,s=o.document,t=/^margin/,u="width",v="height",w="display",x=w+a.now(),y="none",z={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},A=/^-ms-/,B="",C="px",D=/\d(?!px)[a-z%]+$/i,E={},F={"float":"cssFloat"},G={},H=/-([a-z])/gi,I=["","Webkit","Moz","O","ms"],J=s&&s.documentElement.style||{};if(a.each(I,function(a){var b=a?a+"UserSelect":"userSelect";void 0===l&&b in J&&(l=b)}),q.isTransformSupported()){var K;K=F.transform=q.getTransformProperty(),F.transformOrigin=K+"Origin"}q.isTransitionSupported()&&(F.transition=q.getTransitionProperty()),a.mix(m,{_camelCase:d,_cssHooks:E,_cssProps:F,_getComputedStyle:function(a,b){var c,d,e,f,g,h="",i=a.ownerDocument;return b=F[b]||b,(c=i.defaultView.getComputedStyle(a,null))&&(h=c.getPropertyValue(b)||c[b]),""!==h||m.contains(i,a)||(h=a.style[b]),m._RE_NUM_NO_PX.test(h)&&t.test(b)&&(g=a.style,d=g.width,e=g.minWidth,f=g.maxWidth,g.minWidth=g.maxWidth=g.width=h,h=c.width,g.width=d,g.minWidth=e,g.maxWidth=f),h},style:function(b,c,d){var e,f,h,i=m.query(b),j=i[0];if(a.isPlainObject(c)){for(e in c)for(h=i.length-1;h>=0;h--)g(i[h],e,c[e]);return void 0}if(void 0===d)return f="",j&&(f=g(j,c,d)),f;for(h=i.length-1;h>=0;h--)g(i[h],c,d);return void 0},css:function(b,c,e){var f,h,i,j,k=m.query(b),l=k[0];if(a.isPlainObject(c)){for(f in c)for(j=k.length-1;j>=0;j--)g(k[j],f,c[f]);return void 0}if(c=d(c),h=E[c],void 0===e)return i="",l&&(h&&"get"in h&&void 0!==(i=h.get(l,!0))||(i=m._getComputedStyle(l,c))),"undefined"==typeof i?"":i;for(j=k.length-1;j>=0;j--)g(k[j],c,e);return void 0},show:function(a){var b,c,d,f,g=m.query(a);for(f=g.length-1;f>=0;f--)d=g[f],d.style[w]=m.data(d,x)||B,m.css(d,w)===y&&(b=d.tagName.toLowerCase(),c=e(b),m.data(d,x,c),d.style[w]=c)},hide:function(a){var b,c,d=m.query(a);for(c=d.length-1;c>=0;c--){b=d[c];var e=b.style,f=e[w];f!==y&&(f&&m.data(b,x,f),e[w]=y)}},toggle:function(a){var b,c,d=m.query(a);for(c=d.length-1;c>=0;c--)b=d[c],m.css(b,w)===y?m.show(b):m.hide(b)},addStyleSheet:function(a,b,c){"string"==typeof a&&(c=b,b=a,a=o);var d,e=m.getDocument(a);c&&(c=c.replace("#",B))&&(d=m.get("#"+c,e)),d||(d=m.create("<style>",{id:c},e),m.get("head",e).appendChild(d),d.styleSheet?d.styleSheet.cssText=b:d.appendChild(e.createTextNode(b)))},unselectable:function(b){var c,d,e,f,g,h,i=m.query(b),j=0;for(d=i.length-1;d>=0;d--)if(c=i[d],g=c.style,void 0!==l)g[l]="none";else if(p.ie)for(h=c.getElementsByTagName("*"),c.setAttribute("unselectable","on"),f=["iframe","textarea","input","select"];e=h[j++];)a.inArray(r(e),f)||e.setAttribute("unselectable","on")},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0}),a.each([u,v],function(b){m["inner"+a.ucfirst(b)]=function(a){var c=m.get(a);return c&&h(c,b,"padding")},m["outer"+a.ucfirst(b)]=function(a,c){var d=m.get(a);return d&&h(d,b,c?"margin":"border")},m[b]=function(a,c){var d=m.css(a,b,c);return d&&(d=parseFloat(d)),d},E[b]={get:function(a,c){var d;return c&&(d=h(a,b)+"px"),d}}});var L={position:"absolute",visibility:"hidden",display:"block"};a.each(["left","top"],function(a){E[a]={get:function(b,c){var d,e,f;if(c){if(f=m.css(b,"position"),"static"===f)return"auto";if(d=m._getComputedStyle(b,a),e="auto"===d,e&&"relative"===f)return"0px";(e||D.test(d))&&(d=j(b)[a]+"px")}return d}}});var M=/^(?:body|html)$/i;return m}),KISSY.add("dom/base/selector",["./api"],function(a,b){function c(a){var b,c=this,d=c.length;for(b=0;d>b&&a(c[b],b)!==!1;b++);}function d(a){var b=a.substr(1);if(!b)throw new Error("An invalid or illegal string was specified for selector.");return b}function e(a){var b=a.charAt(0);return"#"===b?f(d(a)):"."===b?g(d(a)):h(a)}function f(a){return function(b){var c=n._getElementById(a,o);return c&&n._contains(b,c)?[c]:[]}}function g(a){return function(b){return b.getElementsByClassName(a)}}function h(a){return function(b){return b.getElementsByTagName(a)}}function i(a){var b=/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/;return!a.match(b)}function j(b,d){var f,g,h,k,l="string"==typeof b,m=void 0!==d?j(d):(k=1)&&[o],p=m.length;if(b){if(l){if(b=C(b),k)if("body"===b)f=[o.body];else if(x.test(b)&&r)f=t(o.getElementsByClassName(RegExp.$1));else if(A.test(b))h=n._getElementById(RegExp.$2,o),f=h&&h.nodeName.toLowerCase()===RegExp.$1?[h]:[];else if(y.test(b))h=n._getElementById(b.substr(1),o),f=h?[h]:[];else if(z.test(b))f=t(o.getElementsByTagName(b));else if(i(b)&&r){var q,v,B,D=b.split(/\s+/),E=m;for(g=0,q=D.length;q>g;g++)D[g]=e(D[g]);for(g=0,q=D.length;q>g;g++){var F,G=D[g],H=[];for(v=0,B=E.length;B>v;v++)F=G(E[v]),H.push.apply(H,t(F));if(E=H,!E.length)break}f=E&&E.length>1?n.unique(E):E}if(!f){for(f=[],g=0;p>g;g++)w.apply(f,n._selectInternal(b,m[g]));f.length>1&&p>1&&n.unique(f)}}else if(f=b.nodeType||a.isWindow(b)?[b]:b.getDOMNodes?b.getDOMNodes():s(b)?b:u(b)?t(b):[b],!k){var I,J=f,K=J.length;for(f=[],g=0;K>g;g++)for(I=0;p>I;I++)if(n._contains(m[I],J[g])){f.push(J[g]);break}}}else f=[];return f.each=c,f}function k(a,b){var c=a&&l(a,"class");return c&&(c=c.replace(/[\r\t\n]/g,v))&&(v+c+v).indexOf(v+b+v)>-1}function l(a,b){var c=a&&a.getAttributeNode(b);return c&&c.specified?c.nodeValue:void 0}function m(a,b){return"*"===b||a.nodeName.toLowerCase()===b.toLowerCase()}var n=b("./api"),o=a.Env.host.document,p=o.documentElement,q=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector,r="getElementsByClassName"in o,s=a.isArray,t=a.makeArray,u=n.isDomNodeList,v=" ",w=Array.prototype.push,x=/^\.([\w-]+)$/,y=/^#([\w-]+)$/,z=/^([\w-])+$/,A=/^([\w-]+)#([\w-]+)$/,B=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,C=a.trim;return a.mix(n,{_compareNodeOrder:function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;var c=4&a.compareDocumentPosition(b);return c?-1:1},_getElementsByTagName:function(a,b){return t(b.querySelectorAll(a))},_getElementById:function(a,b){return b.getElementById(a)},_getSimpleAttr:l,_isTag:m,_hasSingleClass:k,_matchesInternal:function(a,b){for(var c,d=[],e=0,f=b.length;f>e;e++)c=b[e],q.call(c,a)&&d.push(c);return d},_selectInternal:function(a,b){return t(b.querySelectorAll(a))},query:j,get:function(a,b){return j(a,b)[0]||null},unique:function(){function a(a,c){return a===c?(b=!0,0):n._compareNodeOrder(a,c)}var b,c=!0;return[0,0].sort(function(){return c=!1,0}),function(d){if(b=c,d.sort(a),b)for(var e=1,f=d.length;f>e;)d[e]===d[e-1]?(d.splice(e,1),--f):e++;return d}}(),filter:function(b,c,d){var e,f,g,h,i=j(b,d),o=[];return"string"==typeof c&&(c=C(c))&&(g=B.exec(c))&&(e=g[1],f=g[2],h=g[3],e?!e||f||h||(c=function(a){return l(a,"id")===e}):c=function(a){var b=!0,c=!0;return f&&(b=m(a,f)),h&&(c=k(a,h)),c&&b}),o="function"==typeof c?a.filter(i,c):n._matchesInternal(c,i)},test:function(a,b,c){var d=j(a,c);return d.length&&n.filter(d,b,c).length===d.length}}),n}),KISSY.add("dom/base/traversal",["./api"],function(a,b){function c(b,c,e,h,i,j,k){if(!(b=f.get(b)))return null;if(0===c)return b;if(j||(b=b[e]),!b)return null;i=i&&f.get(i)||null,void 0===c&&(c=1);var l,m,n=[],o=a.isArray(c);for("number"==typeof c&&(l=0,m=c,c=function(){return++l===m});b&&b!==i&&(!(b.nodeType===g.ELEMENT_NODE||b.nodeType===g.TEXT_NODE&&k)||!d(b,c)||h&&!h(b)||(n.push(b),o));)b=b[e];return o?n:n[0]||null}function d(b,c){if(!c)return!0;if(a.isArray(c)){var d,e=c.length;if(!e)return!0;for(d=0;e>d;d++)if(f.test(b,c[d]))return!0}else if(f.test(b,c))return!0;return!1}function e(b,c,d,e){var h,i,j,k=[],l=f.get(b),m=l;if(l&&d&&(m=l.parentNode),m){for(h=a.makeArray(m.childNodes),i=0;i<h.length;i++)j=h[i],(e||j.nodeType===g.ELEMENT_NODE)&&j!==l&&k.push(j);c&&(k=f.filter(k,c))}return k}var f=b("./api"),g=f.NodeType,h=16;return a.mix(f,{_contains:function(a,b){return!!(a.compareDocumentPosition(b)&h)},closest:function(a,b,d,e){return c(a,b,"parentNode",function(a){return a.nodeType!==g.DOCUMENT_FRAGMENT_NODE},d,!0,e)},parent:function(a,b,d){return c(a,b,"parentNode",function(a){return a.nodeType!==g.DOCUMENT_FRAGMENT_NODE},d,void 0)},first:function(a,b,d){var e=f.get(a);return c(e&&e.firstChild,b,"nextSibling",void 0,void 0,!0,d)},last:function(a,b,d){var e=f.get(a);return c(e&&e.lastChild,b,"previousSibling",void 0,void 0,!0,d)},next:function(a,b,d){return c(a,b,"nextSibling",void 0,void 0,void 0,d)},prev:function(a,b,d){return c(a,b,"previousSibling",void 0,void 0,void 0,d)},siblings:function(a,b,c){return e(a,b,!0,c)},children:function(a,b){return e(a,b,void 0)},contents:function(a,b){return e(a,b,void 0,1)},contains:function(a,b){return a=f.get(a),b=f.get(b),a&&b?f._contains(a,b):!1},index:function(b,c){var d,e,h,i=f.query(b),j=0,k=i[0];if(!c){if(e=k&&k.parentNode,!e)return-1;for(d=k;d=d.previousSibling;)d.nodeType===g.ELEMENT_NODE&&j++;return j}return h=f.query(c),"string"==typeof c?a.indexOf(k,h):a.indexOf(h[0],i)},equals:function(a,b){if(a=f.query(a),b=f.query(b),a.length!==b.length)return!1;for(var c=a.length;c>=0;c--)if(a[c]!==b[c])return!1;return!0}}),f}),KISSY.add("dom/base",["./base/api","./base/attr","./base/class","./base/create","./base/data","./base/insertion","./base/offset","./base/style","./base/selector","./base/traversal"],function(a,b){var c=b("./base/api");return b("./base/attr"),b("./base/class"),b("./base/create"),b("./base/data"),b("./base/insertion"),b("./base/offset"),b("./base/style"),b("./base/selector"),b("./base/traversal"),a.mix(a,{DOM:c,get:c.get,query:c.query}),c}),KISSY.add("event/dom/base/utils",["dom"],function(a,b){var c=b("dom"),d="ksEventTargetId_"+a.now(),e=a.Env.host.document,f=e&&e.addEventListener?function(a,b,c,d){a.addEventListener&&a.addEventListener(b,c,!!d)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},g=e&&e.removeEventListener?function(a,b,c,d){a.removeEventListener&&a.removeEventListener(b,c,!!d)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};return{simpleAdd:f,simpleRemove:g,data:function(a,b){return c.data(a,d,b)},removeData:function(a){return c.removeData(a,d)}}}),KISSY.add("event/dom/base/special",[],function(){return{}}),KISSY.add("event/dom/base/observer",["event/base","./special"],function(a,b){function c(a){c.superclass.constructor.call(this,a)}var d=b("event/base"),e=b("./special");return a.extend(c,d.Observer,{keys:["fn","filter","data","context","originalType","groups","last"],notifyInternal:function(a,b){var c,d,f,g,h=this,i=a.type;return(g=h.originalType)?a.type=g:g=i,(c=e[g])&&c.handle?(d=c.handle(a,h,b),d&&d.length>0&&(f=d[0])):f=h.simpleNotify(a,b),f===!1&&a.halt(),a.type=i,f}}),c}),KISSY.add("event/dom/base/object",["event/base"],function(a,b){function c(){return h}function d(){return i}function e(b){var f=this,h=b.type;e.superclass.constructor.call(f),f.originalEvent=b;var l=d;"defaultPrevented"in b?l=b.defaultPrevented?c:d:"getPreventDefault"in b?l=b.getPreventDefault()?c:d:"returnValue"in b&&(l=b.returnValue===i?c:d),f.isDefaultPrevented=l;var m,n,o,p=[],q=j.concat();for(a.each(k,function(a){return void(h.match(a.reg)&&(q=q.concat(a.props),a.fix&&p.push(a.fix)))}),n=q.length;n;)o=q[--n],f[o]=b[o];for(f.target||(f.target=b.srcElement||g),3===f.target.nodeType&&(f.target=f.target.parentNode),n=p.length;n;)(m=p[--n])(f,b)}var f=b("event/base"),g=a.Env.host.document,h=!0,i=!1,j=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],k=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),void 0===a.metaKey&&(a.metaKey=a.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(a,b){var c,d,e,f=b.wheelDelta,g=b.axis,h=b.wheelDeltaY,i=b.wheelDeltaX,j=b.detail;f&&(e=f/120),j&&(e=-(j%3===0?j/3:j)),void 0!==g&&(g===a.HORIZONTAL_AXIS?(d=0,c=-1*e):g===a.VERTICAL_AXIS&&(c=0,d=e)),void 0!==h&&(d=h/120),void 0!==i&&(c=-1*i/120),c||d||(d=e),void 0!==c&&(a.deltaX=c),void 0!==d&&(a.deltaY=d),void 0!==e&&(a.delta=e)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(a,b){var c,d,e,f=a.target,h=b.button;return null==a.pageX&&null!=b.clientX&&(c=f.ownerDocument||g,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===h||(a.which=1&h?1:2&h?3:4&h?2:0),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===f?a.toElement:a.fromElement),a}}];return a.extend(e,f.Object,{constructor:e,preventDefault:function(){var a=this,b=a.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=i,e.superclass.preventDefault.call(a)},stopPropagation:function(){var a=this,b=a.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=h,e.superclass.stopPropagation.call(a)}}),e}),KISSY.add("event/dom/base/observable",["event/base","dom","./special","./utils","./observer","./object"],function(a,b){function c(b){var c=this;a.mix(c,b),c.reset()}var d=b("event/base"),e=b("dom"),f=b("./special"),g=b("./utils"),h=b("./observer"),i=b("./object"),j=d.Utils,k=a.getLogger("s/event");return a.extend(c,d.Observable,{setup:function(){var a=this,b=a.type,c=f[b]||{},d=a.currentTarget,e=g.data(d),h=e.handle;c.setup&&c.setup.call(d,b)!==!1||g.simpleAdd(d,b,h)},constructor:c,reset:function(){var a=this;c.superclass.reset.call(a),a.delegateCount=0,a.lastCount=0},notify:function(a){var b,c,d,f,g,h,i,j,k,l,m=a.target,n=a.type,o=this,p=o.currentTarget,q=o.observers,r=[],s=o.delegateCount||0;if(s&&m.nodeType)for(;m!==p;){if(m.disabled!==!0||"click"!==n){var t,u,v,w={};for(j=[],g=0;s>g;g++)l=q[g],v=l.filter,u=v+"",t=w[u],void 0===t&&(t=w[u]=e.test(m,v)),t&&j.push(l);j.length&&r.push({currentTarget:m,currentTargetObservers:j})}m=m.parentNode||p}for(s<q.length&&r.push({currentTarget:p,currentTargetObservers:q.slice(s)}),g=0,i=r.length;!a.isPropagationStopped()&&i>g;++g)for(f=r[g],j=f.currentTargetObservers,b=f.currentTarget,a.currentTarget=b,h=0;!a.isImmediatePropagationStopped()&&h<j.length;h++)k=j[h],c=k.notify(a,o),d!==!1&&void 0!==c&&(d=c);return d},fire:function(b,d){b=b||{};var g,h,j=this,l=String(j.type),m=f[l]||{},n=m.bubbles!==!1,o=j.currentTarget;if(!(m.fire&&m.fire.call(o,d)===!1||(b instanceof i||(h=b,b=new i({currentTarget:o,type:l,target:o}),a.mix(b,h)),m.preFire&&m.preFire.call(o,b,d)===!1))){var p,q,r=o,s=e.getWindow(r),t=s.document,u=[],v="on"+l,w=0;do u.push(r),r=r.parentNode||r.ownerDocument||r===t&&s;while(!d&&r&&n);r=u[w];do b.currentTarget=r,g=c.getDomEventObservable(r,l),g&&(q=g.notify(b),void 0!==q&&p!==!1&&(p=q)),r[v]&&r[v].call(r)===!1&&b.preventDefault(),r=u[++w];while(!d&&r&&!b.isPropagationStopped());if(!d&&!b.isDefaultPrevented()){try{o[l]&&!a.isWindow(o)&&(c.triggeredEvent=l,o[l]())}catch(x){k.debug("trigger action error: "+x)}c.triggeredEvent=""}return p}},on:function(b){var c=this,d=c.observers,e=f[c.type]||{},g=b instanceof h?b:new h(b);a.Config.debug&&(g.fn||a.error("lack event handler for "+c.type)),-1===c.findObserver(g)&&(g.filter?(d.splice(c.delegateCount,0,g),c.delegateCount++):g.last?(d.push(g),c.lastCount++):d.splice(d.length-c.lastCount,0,g),e.add&&e.add.call(c.currentTarget,g))},detach:function(a){var b,c=this,d=f[c.type]||{},e="filter"in a,g=a.filter,h=a.context,i=a.fn,k=c.currentTarget,l=c.observers,m=a.groups;
if(l.length){m&&(b=j.getGroupsRe(m));var n,o,p,q,r,s=l.length;if(i||e||b){for(h=h||k,n=0,o=0,p=[];s>n;++n)q=l[n],r=q.context||k,h!==r||i&&i!==q.fn||e&&(g&&g!==q.filter||!g&&!q.filter)||b&&!q.groups.match(b)?p[o++]=q:(q.filter&&c.delegateCount&&c.delegateCount--,q.last&&c.lastCount&&c.lastCount--,d.remove&&d.remove.call(k,q));c.observers=p}else c.reset();c.checkMemory()}},checkMemory:function(){var b,c,d=this,e=d.type,h=f[e]||{},i=d.currentTarget,j=g.data(i);j&&(b=j.observables,d.hasObserver()||(c=j.handle,h.tearDown&&h.tearDown.call(i,e)!==!1||g.simpleRemove(i,e,c),delete b[e]),a.isEmptyObject(b)&&(j.handle=null,g.removeData(i)))}}),c.triggeredEvent="",c.getDomEventObservable=function(a,b){var c,d=g.data(a);return d&&(c=d.observables),c?c[b]:null},c.getDomEventObservablesHolder=function(a,b){var c=g.data(a);return!c&&b&&g.data(a,c={}),c},c}),KISSY.add("event/dom/base/dom-event",["event/base","./utils","dom","./special","./observable","./object"],function(a,b){function c(a,b){var c,d=i[b]||{};return!a.originalType&&(c=d.typeFix)&&(a.originalType=b,b=c),b}function d(b,d,e){var f,g,h,i;e=a.merge(e),d=c(e,d),f=j.getDomEventObservablesHolder(b,1),(i=f.handle)||(i=f.handle=function(a){var b,c=a.type,d=i.currentTarget;return j.triggeredEvent===c||"undefined"==typeof KISSY?void 0:(b=j.getDomEventObservable(d,c),b?(a.currentTarget=d,a=new k(a),b.notify(a)):void 0)},i.currentTarget=b),(h=f.observables)||(h=f.observables={}),g=h[d],g||(g=h[d]=new j({type:d,currentTarget:b}),g.setup()),g.on(e),b=null}function e(b,d,e){e=a.merge(e);var f;d=c(e,d);var g=j.getDomEventObservablesHolder(b),h=(g||{}).observables;if(g&&h)if(d)f=h[d],f&&f.detach(e);else for(d in h)h[d].detach(e)}var f=b("event/base"),g=b("./utils"),h=b("dom"),i=b("./special"),j=b("./observable"),k=b("./object"),l=f.Utils,m={on:function(a,b,c,e){return a=h.query(a),l.batchForType(function(a,b,c,e){var f,g,h=l.normalizeParam(b,c,e);for(b=h.type,f=a.length-1;f>=0;f--)g=a[f],d(g,b,h)},1,a,b,c,e),a},detach:function(a,b,c,d){return a=h.query(a),l.batchForType(function(a,b,c,d){var f,g,h,i,j=l.normalizeParam(b,c,d);for(b=j.type,f=a.length-1;f>=0;f--)if(i=a[f],e(i,b,j),j.deep&&i.getElementsByTagName)for(h=i.getElementsByTagName("*"),g=h.length-1;g>=0;g--)e(h[g],b,j)},1,a,b,c,d),a},delegate:function(a,b,c,d,e){return m.on(a,b,{fn:d,context:e,filter:c})},undelegate:function(a,b,c,d,e){return m.detach(a,b,{fn:d,context:e,filter:c})},fire:function(a,b,c,d){var e;return c=c||{},c.synthetic=1,l.splitAndRun(b,function(b){var f,g,k,m;l.fillGroupsForEvent(b,c),b=c.type;var n=i[b],o=b;for(n&&n.typeFix&&(o=n.typeFix),a=h.query(a),g=a.length-1;g>=0;g--)k=a[g],m=j.getDomEventObservable(k,o),d||m||(m=new j({type:o,currentTarget:k})),m&&(f=m.fire(c,d),e!==!1&&void 0!==f&&(e=f))}),e},fireHandler:function(a,b,c){return m.fire(a,b,c,1)},clone:function(b,c){var e,f;if(e=j.getDomEventObservablesHolder(b)){var h=g.data(b);h&&h===g.data(c)&&g.removeData(c),f=e.observables,a.each(f,function(b,e){a.each(b.observers,function(a){d(c,e,a)})})}}};return m}),KISSY.add("event/dom/base/key-codes",[],function(a){var b=a.UA,c={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};return c.isTextModifyingKeyEvent=function(a){var b=a.keyCode;if(a.altKey&&!a.ctrlKey||a.metaKey||b>=c.F1&&b<=c.F12)return!1;switch(b){case c.ALT:case c.CAPS_LOCK:case c.CONTEXT_MENU:case c.CTRL:case c.DOWN:case c.END:case c.ESC:case c.HOME:case c.INSERT:case c.LEFT:case c.MAC_FF_META:case c.META:case c.NUMLOCK:case c.NUM_CENTER:case c.PAGE_DOWN:case c.PAGE_UP:case c.PAUSE:case c.PRINT_SCREEN:case c.RIGHT:case c.SHIFT:case c.UP:case c.WIN_KEY:case c.WIN_KEY_RIGHT:return!1;default:return!0}},c.isCharacterKey=function(a){if(a>=c.ZERO&&a<=c.NINE)return!0;if(a>=c.NUM_ZERO&&a<=c.NUM_MULTIPLY)return!0;if(a>=c.A&&a<=c.Z)return!0;if(b.webkit&&0===a)return!0;switch(a){case c.SPACE:case c.QUESTION_MARK:case c.NUM_PLUS:case c.NUM_MINUS:case c.NUM_PERIOD:case c.NUM_DIVISION:case c.SEMICOLON:case c.DASH:case c.EQUALS:case c.COMMA:case c.PERIOD:case c.SLASH:case c.APOSTROPHE:case c.SINGLE_QUOTE:case c.OPEN_SQUARE_BRACKET:case c.BACKSLASH:case c.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},c}),KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}}),KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(a,b){var c=b("./dom-event"),d=b("./special"),e=a.UA,f=e.gecko?"DOMMouseScroll":"mousewheel";return a.mix(d,{mousewheel:{typeFix:f},load:{bubbles:!1},click:{fire:function(a){var b=this;return!a&&"checkbox"===String(b.type)&&b.click&&"input"===b.nodeName.toLowerCase()?(b.click(),!1):void 0}},focus:{bubbles:!1,preFire:function(a,b){return b?void 0:c.fire(this,"focusin")},fire:function(a){var b=this;return!a&&b.ownerDocument&&b!==b.ownerDocument.activeElement&&b.focus?(b.focus(),!1):void 0}},blur:{bubbles:!1,preFire:function(a,b){return b?void 0:c.fire(this,"focusout")},fire:function(a){var b=this;return!a&&b.ownerDocument&&b===b.ownerDocument.activeElement&&b.blur?(b.blur(),!1):void 0}}})}),KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(a,b){var c=b("dom"),d=b("./special");a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){d[a.name]={typeFix:a.fix,handle:function(a,b,d){var e=a.currentTarget,f=a.relatedTarget;return!f||f!==e&&!c.contains(e,f)?[b.simpleNotify(a,d)]:void 0}}})}),KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(a,b){function c(a){if(l.hasData(a,s)){var b=l.data(a,s);clearTimeout(b),l.removeData(a,s)}}function d(a){l.removeData(a,r),c(a)}function e(a){c(a.target)}function f(a){var b=a.value,c=l.data(a,r);b!==c&&(m.fireHandler(a,o,{prevVal:c,newVal:b}),l.data(a,r,b))}function g(a){l.hasData(a,s)||l.data(a,s,setTimeout(function b(){f(a),l.data(a,s,setTimeout(b,t))},t))}function h(a){var b=a.target;"focus"===a.type&&l.data(b,r,b.value),g(b)}function i(a){f(a.target)}function j(a){k(a),m.on(a,"blur",e),m.on(a,"webkitspeechchange",i),m.on(a,"mousedown keyup keydown focus",h)}function k(a){d(a),m.detach(a,"blur",e),m.detach(a,"webkitspeechchange",i),m.detach(a,"mousedown keyup keydown focus",h)}var l=b("dom"),m=b("./dom-event"),n=b("./special"),o="valuechange",p=l.nodeName,q="event/valuechange",r=q+"/history",s=q+"/poll",t=50;return n[o]={setup:function(){var a=this,b=p(a);("input"===b||"textarea"===b)&&j(a)},tearDown:function(){var a=this;k(a)}},m}),KISSY.add("event/dom/base",["./base/dom-event","./base/object","./base/key-codes","./base/gesture","./base/special-events","./base/mouseenter","./base/valuechange"],function(a,b){var c=b("./base/dom-event"),d=b("./base/object"),e=b("./base/key-codes"),f=b("./base/gesture"),g=b("./base/special-events");return b("./base/mouseenter"),b("./base/valuechange"),a.merge({add:c.on,remove:c.detach,KeyCode:e,Gesture:f,Special:g,Object:d},c)}),KISSY.add("event/base/utils",[],function(a){function b(a){if(a.indexOf(".")<0)return[a,""];var b=a.match(/([^.]+)?(\..+)?$/),c=b[1],d=[c],e=b[2];return e?(e=e.split(".").sort(),d.push(e.join("."))):d.push(""),d}var c,d;return{splitAndRun:c=function(b,c){return a.isArray(b)?void a.each(b,c):(b=a.trim(b),void(-1===b.indexOf(" ")?c(b):a.each(b.split(/\s+/),c)))},normalizeParam:function(c,d,e){var f=d||{};f="function"==typeof d?{fn:d,context:e}:a.merge(f);var g=b(c);return c=g[0],f.groups=g[1],f.type=c,f},batchForType:function(b,d){var e=a.makeArray(arguments),f=e[2+d];f&&"object"==typeof f?a.each(f,function(a,c){var f=[].concat(e);f.splice(0,2),f[d]=c,f[d+1]=a,b.apply(null,f)}):c(f,function(a){var c=[].concat(e);c.splice(0,2),c[d]=a,b.apply(null,c)})},fillGroupsForEvent:function(a,c){var e=b(a),f=e[1];f&&(f=d(f),c._ksGroups=f),c.type=e[0]},getGroupsRe:d=function(a){return new RegExp(a.split(".").join(".*\\.")+"(?:\\.|$)")}}}),KISSY.add("event/base/object",[],function(a,b){function c(){var c=this;c.timeStamp=a.now(),c.target=b,c.currentTarget=b}var d=function(){return!1},e=function(){return!0};return c.prototype={constructor:c,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){this.isDefaultPrevented=e},stopPropagation:function(){this.isPropagationStopped=e},stopImmediatePropagation:function(){var a=this;a.isImmediatePropagationStopped=e,a.stopPropagation()},halt:function(a){var b=this;a?b.stopImmediatePropagation():b.stopPropagation(),b.preventDefault()}},c}),KISSY.add("event/base/observer",[],function(a,b){function c(b){a.mix(this,b)}return c.prototype={constructor:c,equals:function(b){var c=this;return!!a.reduce(c.keys,function(a,d){return a&&c[d]===b[d]},1)},simpleNotify:function(a,b){var c,d=this;return c=d.fn.call(d.context||b.currentTarget,a,d.data),d.once&&b.removeObserver(d),c},notifyInternal:function(a,b){var c=this.simpleNotify(a,b);return c===!1&&a.halt(),c},notify:function(a,c){var d=this,e=a._ksGroups;return!e||d.groups&&d.groups.match(e)?d.notifyInternal(a,c):b}},c}),KISSY.add("event/base/observable",[],function(a){function b(b){var c=this;c.currentTarget=null,a.mix(c,b),c.reset()}return b.prototype={constructor:b,hasObserver:function(){return!!this.observers.length},reset:function(){var a=this;a.observers=[]},removeObserver:function(a){var b,c=this,d=c.observers,e=d.length;for(b=0;e>b;b++)if(d[b]===a){d.splice(b,1);break}c.checkMemory()},checkMemory:function(){},findObserver:function(a){var b,c=this.observers;for(b=c.length-1;b>=0;--b)if(a.equals(c[b]))return b;return-1}},b}),KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(a,b){var c=b("./base/utils"),d=b("./base/object"),e=b("./base/observer"),f=b("./base/observable");return{Utils:c,Object:d,Observer:e,Observable:f}}),KISSY.add("event/dom/shake",["event/dom/base"],function(a,b){function c(){e=void 0,l=0}function d(a){var b,c=a.accelerationIncludingGravity,d=c.x,h=c.y,i=c.z;void 0!==e&&(b=m(n(d-e),n(h-f),n(i-g)),b>j&&q(),b>k&&(l=1)),e=d,f=h,g=i}var e,f,g,h=b("event/dom/base"),i=h.Special,j=5,k=20,l=0,m=Math.max,n=Math.abs,o=a.Env.host,p="devicemotion",q=a.buffer(function(){l&&(h.fireHandler(o,"shake",{accelerationIncludingGravity:{x:e,y:f,z:g}}),c())},250);i.shake={setup:function(){this===o&&o.addEventListener(p,d,!1)},tearDown:function(){this===o&&(q.stop(),c(),o.removeEventListener(p,d,!1))}}}),KISSY.add("event/dom/focusin",["event/dom/base"],function(a,b){var c=b("event/dom/base"),d=c.Special;return a.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(b){function e(a){var d=a.target;return c.fire(d,b.name)}var f=a.guid("attaches_"+a.now()+"_");d[b.name]={setup:function(){var a=this.ownerDocument||this;f in a||(a[f]=0),a[f]+=1,1===a[f]&&a.addEventListener(b.fix,e,!0)},tearDown:function(){var a=this.ownerDocument||this;a[f]-=1,0===a[f]&&a.removeEventListener(b.fix,e,!0)}}}),c}),KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(a,b){function c(b,c,d,h,j){var k;return b.node?k=b:("string"==typeof c?(c=a.unparam(String(c),";",":"),a.each(c,function(b,d){var e=a.trim(d);e&&(c[e]=a.trim(b)),e&&e===d||delete c[d]})):c=a.clone(c),a.isPlainObject(d)?k=a.clone(d):(k={complete:j},d&&(k.duration=d),h&&(k.easing=h)),k.node=b,k.to=c),k=a.merge(i,k,{useTransition:a.config("anim/useTransition")}),k.useTransition&&f?(g.info("use transition anim"),new f(k)):(g.info("use js timer anim"),new e(k))}var d=b("anim/base"),e=b("anim/timer"),f=b("anim/transition?"),g=a.getLogger("s/anim"),h=d.Utils,i={duration:1,easing:"linear"};return a.each(["pause","resume"],function(a){c[a]=function(b,c){return null===c||"string"==typeof c||c===!1?h.pauseOrResumeQueue(b,c,a):h.pauseOrResumeQueue(b,void 0,a)}}),c.isRunning=h.isElRunning,c.isPaused=h.isElPaused,c.stop=h.stopEl,c.Easing=e.Easing,a.Anim=c,c.Q=d.Q,c}),KISSY.add("anim/base/queue",["dom"],function(a,b){function c(a,b,c){b=b||g;var d,h=e.data(a,f);return h||c||e.data(a,f,h={}),h&&(d=h[b],d||c||(d=h[b]=[])),d}var d,e=b("dom"),f=a.guid("ks-queue-"+a.now()+"-"),g=a.guid("ks-queue-"+a.now()+"-");return d={queueCollectionKey:f,queue:function(a,b,d){var e=c(a,b);return e.push(d),e},remove:function(b,e,f){var g,h=c(b,e,1);return h&&(g=a.indexOf(f,h),g>-1&&h.splice(g,1)),h&&!h.length&&d.clearQueue(b,e),h},clearQueues:function(a){e.removeData(a,f)},clearQueue:function(b,c){c=c||g;var d=e.data(b,f);d&&delete d[c],a.isEmptyObject(d)&&e.removeData(b,f)},dequeue:function(a,b){var e=c(a,b,1);return e&&(e.shift(),e.length||d.clearQueue(a,b)),e}}}),KISSY.add("anim/base/utils",["./queue","dom"],function(a,b){function c(b){var c=b.node,d=k.data(c,l);d||k.data(c,l,d={}),d[a.stamp(b)]=b}function d(b){var c=b.node,d=k.data(c,l);d&&(delete d[a.stamp(b)],a.isEmptyObject(d)&&k.removeData(c,l))}function e(b){var c=b.node,d=k.data(c,l);return d?!!d[a.stamp(b)]:0}function f(b){var c=b.node,d=k.data(c,m);d||k.data(c,m,d={}),d[a.stamp(b)]=b}function g(b){var c=b.node,d=k.data(c,m);d&&(delete d[a.stamp(b)],a.isEmptyObject(d)&&k.removeData(c,m))}function h(b){var c=b.node,d=k.data(c,m);return d?!!d[a.stamp(b)]:0}function i(b,c,d){var e=k.data(b,"resume"===d?m:l),f=a.merge(e);a.each(f,function(a){(void 0===c||a.config.queue===c)&&a[d]()})}var j=b("./queue"),k=b("dom"),l=a.guid("ks-anim-unqueued-"+a.now()+"-"),m=a.guid("ks-anim-paused-"+a.now()+"-");return{saveRunningAnim:c,removeRunningAnim:d,isAnimPaused:h,removePausedAnim:g,savePausedAnim:f,isAnimRunning:e,isElPaused:function(b){var c=k.data(b,m);return c&&!a.isEmptyObject(c)},isElRunning:function(b){var c=k.data(b,l);return c&&!a.isEmptyObject(c)},pauseOrResumeQueue:i,stopEl:function(b,c,d,e){d&&(void 0===e?j.clearQueues(b):e!==!1&&j.clearQueue(b,e));var f=k.data(b,l),g=a.merge(f);a.each(g,function(a){(void 0===e||a.config.queue===e)&&a.stop(c)})}}}),KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(a,b){function c(b){var d=this;c.superclass.constructor.call(d),h.Defer(d),d.config=b;var f=b.node;a.isPlainObject(f)||(f=e.get(b.node)),d.node=d.el=f,d._backupProps={},d._propsData={}}function d(b){var c,d=b.config.complete;a.isEmptyObject(c=b._backupProps)||e.css(b.node,c),d&&d.call(b)}var e=b("dom"),f=b("./base/utils"),g=b("./base/queue"),h=b("promise"),i=a.getLogger("s/anim"),j=e.NodeType,k=a.noop,l={toggle:1,hide:1,show:1};return a.extend(c,h,{on:function(a,b){var c=this;return i.warn("please use promise api of anim instead"),"complete"===a?c.then(b):"end"===a?c.fin(b):"step"===a?c.progress(b):i.error("not supported event for anim: "+a),c},prepareFx:k,runInternal:function(){var b,c=this,d=c.config,g=c.node,h=c._backupProps,i=c._propsData,k=d.to,m=d.delay||0,n=d.duration;if(f.saveRunningAnim(c),a.each(k,function(b,c){a.isPlainObject(b)||(b={value:b}),i[c]=a.mix({delay:m,easing:d.easing,frame:d.frame,duration:n},b)}),g.nodeType===j.ELEMENT_NODE){if(k.width||k.height){var o=g.style;a.mix(h,{overflow:o.overflow,"overflow-x":o.overflowX,"overflow-y":o.overflowY}),o.overflow="hidden","inline"===e.css(g,"display")&&"none"===e.css(g,"float")&&(a.UA.ieMode<10?o.zoom=1:o.display="inline-block")}var p,q;if(q="none"===e.css(g,"display"),a.each(i,function(a,d){if(b=a.value,l[b]){if("hide"===b&&q||"show"===b&&!q)return c.stop(!0),p=!1;h[d]=e.style(g,d),"toggle"===b&&(b=q?"show":"hide"),"hide"===b?(a.value=0,h.display="none"):(a.value=e.css(g,d),e.css(g,d,0),e.show(g))}return void 0}),p===!1)return}c.startTime=a.now(),a.isEmptyObject(i)?(c.__totalTime=1e3*n,c.__waitTimeout=setTimeout(function(){c.stop(!0)},c.__totalTime)):(c.prepareFx(),c.doStart())},isRunning:function(){return f.isAnimRunning(this)},isPaused:function(){return f.isAnimPaused(this)},pause:function(){var b=this;return b.isRunning()&&(b._runTime=a.now()-b.startTime,b.__totalTime-=b._runTime,f.removeRunningAnim(b),f.savePausedAnim(b),b.__waitTimeout?clearTimeout(b.__waitTimeout):b.doStop()),b},doStop:k,doStart:k,resume:function(){var b=this;return b.isPaused()&&(b.startTime=a.now()-b._runTime,f.removePausedAnim(b),f.saveRunningAnim(b),b.__waitTimeout?b.__waitTimeout=setTimeout(function(){b.stop(!0)},b.__totalTime):(b.beforeResume(),b.doStart())),b},beforeResume:k,run:function(){var a,b=this,c=b.config.queue;return c===!1?b.runInternal():(a=g.queue(b.node,c,b),1===a.length&&b.runInternal()),b},stop:function(a){var b,c=this,e=c.node,h=c.config.queue;if(c.isResolved()||c.isRejected())return c;if(c.__waitTimeout&&(clearTimeout(c.__waitTimeout),c.__waitTimeout=0),!c.isRunning()&&!c.isPaused())return h!==!1&&g.remove(e,h,c),c;c.doStop(a),f.removeRunningAnim(c),f.removePausedAnim(c);var i=c.defer;return a?(d(c),i.resolve([c])):i.reject([c]),h!==!1&&(b=g.dequeue(e,h),b&&b[0]&&b[0].runInternal()),c}}),c.Utils=f,c.Q=g,c}),KISSY.add("promise",[],function(a){function b(a){"undefined"!=typeof console&&console.error&&console.error(a)}function c(a,b,d){if(a instanceof g)m(function(){d.call(a,a[l])});else{var f=a[l],h=a[o];h?h.push([b,d]):e(f)?c(f,b,d):b&&m(function(){b.call(a,f)})}}function d(a){var b=this;return b instanceof d?(b.promise=a||new f,void(b.promise.defer=b)):new d(a)}function e(a){return a&&a instanceof f}function f(a){var b=this;b[l]=a,void 0===a&&(b[o]=[],b[n]=[])}function g(a){if(a instanceof g)return a;var b=this;return f.apply(b,arguments),b[l]instanceof f&&k.error("assert.not(this.__promise_value instanceof promise) in Reject constructor"),b}function h(a,e,h){function i(a){try{return e?e.call(this,a):a}catch(c){return b(c.stack||c),new g(c)}}function j(a){try{return h?h.call(this,a):new g(a)}catch(c){return b(c.stack||c),new g(c)}}function l(a){return n?void k.error("already done at fulfilled"):a instanceof f?void k.error("assert.not(value instanceof Promise) in when"):(n=1,void m.resolve(i.call(this,a)))}var m=new d,n=0;return a instanceof f?c(a,l,function(a){return n?void k.error("already done at rejected"):(n=1,void m.resolve(j.call(this,a)))}):l(a),m.promise}function i(a){return!j(a)&&e(a)&&void 0===a[o]&&(!e(a[l])||i(a[l]))}function j(a){return e(a)&&void 0===a[o]&&a[l]instanceof g}var k=a.getLogger("s/promise"),l="__promise_value",m=a.setImmediate,n="__promise_progress_listeners",o="__promise_pendings";return d.prototype={constructor:d,resolve:function(b){var d,e=this.promise;return(d=e[o])?(e[l]=b,d=[].concat(d),e[o]=void 0,e[n]=void 0,a.each(d,function(a){c(e,a[0],a[1])}),b):null},reject:function(a){return this.resolve(new g(a))},notify:function(b){a.each(this.promise[n],function(a){m(function(){a(b)})})}},f.prototype={constructor:f,then:function(a,b,c){return c&&this.progress(c),h(this,a,b)},progress:function(a){return this[n]&&this[n].push(a),this},fail:function(a){return h(this,0,a)},fin:function(a){return h(this,function(b){return a(b,!0)},function(b){return a(b,!1)})},done:function(b,c){var d=this,e=function(b){a.log(b.stack||b,"error"),setTimeout(function(){throw b},0)},f=b||c?d.then(b,c):d;f.fail(e)},isResolved:function(){return i(this)},isRejected:function(){return j(this)}},a.extend(g,f),KISSY.Defer=d,KISSY.Promise=f,f.Defer=d,a.mix(f,{when:h,isPromise:e,isResolved:i,isRejected:j,all:function(a){var b=a.length;if(!b)return null;for(var c=new d,e=0;e<a.length;e++)!function(d,e){h(d,function(d){a[e]=d,0===--b&&c.resolve(a)},function(a){c.reject(a)})}(a[e],e);return c.promise},async:function(a){return function(){function b(a,b){var f;try{f=e[a](b)}catch(i){return new g(i)}return f.done?f.value:h(f.value,c,d)}function c(a){return b("next",a)}function d(a){return b("throw",a)}var e=a.apply(this,arguments);return c()}}}),f}),KISSY.add("anim/timer/easing",[],function(){function a(a){return a}function b(a,b,c,d){function e(a){return(3*l*a+2*m)*a+n}function f(a){return((l*a+m)*a+n)*a}function g(a){return((o*a+p)*a+q)*a}function h(a){for(var b,c,d=a,g=0;8>g;g++){if(c=f(d)-a,k(c)<j)return d;if(b=e(d),k(b)<j)break;d-=c/b}var h=1,i=0;for(d=a;h>i;){if(c=f(d)-a,k(c)<j)return d;c>0?h=d:i=d,d=(h+i)/2}return d}function i(a){return g(h(a))}var l=3*a-3*c+1,m=3*c-6*a,n=3*a,o=3*b-3*d+1,p=3*d-6*b,q=3*b;return i}var c=Math.PI,d=Math.pow,e=Math.sin,f=parseFloat,g=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,h=1.70158,i={swing:function(a){return-Math.cos(a*c)/2+.5},easeNone:a,linear:a,easeIn:function(a){return a*a},ease:b(.25,.1,.25,1),"ease-in":b(.42,0,1,1),"ease-out":b(0,0,.58,1),"ease-in-out":b(.42,0,.58,1),"ease-out-in":b(0,.42,1,.58),toFn:function(c){var d;return(d=c.match(g))?b(f(d[1]),f(d[2]),f(d[3]),f(d[4])):i[c]||a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?.5*a*a:.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?.5*a*a*a*a:.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){var b=.3,f=b/4;return 0===a||1===a?a:-(d(2,10*(a-=1))*e(2*(a-f)*c/b))},elasticOut:function(a){var b=.3,f=b/4;return 0===a||1===a?a:d(2,-10*a)*e(2*(a-f)*c/b)+1},elasticBoth:function(a){var b=.45,f=b/4;return 0===a||2===(a*=2)?a:1>a?-.5*d(2,10*(a-=1))*e(2*(a-f)*c/b):d(2,-10*(a-=1))*e(2*(a-f)*c/b)*.5+1},backIn:function(a){return 1===a&&(a-=.001),a*a*((h+1)*a-h)},backOut:function(a){return(a-=1)*a*((h+1)*a+h)+1},backBoth:function(a){var b=h,c=(b*=1.525)+1;return(a*=2)<1?.5*a*a*(c*a-b):.5*((a-=2)*a*(c*a+b)+2)},bounceIn:function(a){return 1-i.bounceOut(1-a)},bounceOut:function(a){var b,c=7.5625;return b=1/2.75>a?c*a*a:2/2.75>a?c*(a-=1.5/2.75)*a+.75:2.5/2.75>a?c*(a-=2.25/2.75)*a+.9375:c*(a-=2.625/2.75)*a+.984375},bounceBoth:function(a){return.5>a?.5*i.bounceIn(2*a):.5*i.bounceOut(2*a-1)+.5}},j=1e-6,k=Math.abs;return i}),KISSY.add("anim/timer/manager",[],function(a){var b,c,d=a.stamp,e=(a.Env.host,15);return b=function(a){return setTimeout(a,e)},c=function(a){clearTimeout(a)},{runnings:{},timer:null,start:function(a){var b=this,c=d(a);b.runnings[c]||(b.runnings[c]=a,b.startTimer())},stop:function(a){this.notRun(a)},notRun:function(b){var c=this,e=d(b);delete c.runnings[e],a.isEmptyObject(c.runnings)&&c.stopTimer()},pause:function(a){this.notRun(a)},resume:function(a){this.start(a)},startTimer:function(){var a=this;a.timer||(a.timer=b(function c(){a.runFrames()?a.stopTimer():a.timer=b(c)}))},stopTimer:function(){var a=this,b=a.timer;b&&(c(b),a.timer=0)},runFrames:function(){var a,b,c=this,d=c.runnings;for(a in d)d[a].frame();for(a in d){b=0;break}return void 0===b}}}),KISSY.add("anim/timer/fx",["dom"],function(a,b){function c(b,c){a.mix(b,c),b.pos=0,b.unit=b.unit||""}function d(a){c(this,a)}function e(a,b){return a.style&&null!=a.style[b]||null==h.attr(a,b,void 0,1)?0:1}function f(b,c){var d,e=a.now(),f=b.startTime,g=c.delay,h=c.duration;return d=e-f-g,0>=d?0:d>=h?1:c.easing(d/h)}var g=a.getLogger("s/aim/timer/fx"),h=b("dom");return d.prototype={isCustomFx:0,constructor:d,load:function(a){c(this,a)},frame:function(a){if(1!==this.pos){var b=this,c=b.anim,d=b.prop,e=c.node,i=b.from,j=b.propData,k=b.to;if(void 0===a&&(a=f(c,j)),b.pos=a,i!==k&&0!==a){var l=b.interpolate(i,k,b.pos);b.val=l,j.frame?j.frame.call(b,c,b):b.isCustomFx||(void 0===l?(b.pos=1,l=k,g.warn(d+" update directly ! : "+l+" : "+i+" : "+k)):l+=b.unit,b.val=l,"attr"===b.type?h.attr(e,d,l,1):h.css(e,d,l))}}},interpolate:function(a,b,c){return"number"==typeof a&&"number"==typeof b?Math.round(1e5*(a+(b-a)*c))/1e5:void 0},cur:function(){var a,b,c,d=this,f=d.prop,g=d.anim.node;return d.isCustomFx?g[f]||0:((a=d.type)||(a=d.type=e(g,f)?"attr":"css"),c="attr"===a?h.attr(g,f,void 0,1):h.css(g,f),isNaN(b=parseFloat(c))?c&&"auto"!==c?c:0:b)}},d.Factories={},d.FxTypes={},d.getFx=function(a){var b,c,e=d;return(b=a.fxType)?e=d.FxTypes[b]:!a.isCustomFx&&(c=d.Factories[a.prop])&&(e=c),new e(a)},d}),KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}}),KISSY.add("anim/timer/color",["./fx","./short-hand"],function(a,b){function c(a){a+="";var b;if(b=a.match(k))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=a.match(l))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=a.match(m)){for(var c=1;c<b.length;c++)b[c].length<2&&(b[c]+=b[c]);return[parseInt(b[1],h),parseInt(b[2],h),parseInt(b[3],h)]}return j[a=a.toLowerCase()]?j[a]:(g.warn("only allow rgb or hex color string : "+a),[255,255,255])}function d(){d.superclass.constructor.apply(this,arguments)}var e=b("./fx"),f=b("./short-hand"),g=a.getLogger("s/anim/timer/color"),h=16,i=Math.floor,j={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},k=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,l=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,m=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,n=["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"];return f.background.push("backgroundColor"),f.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],f.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"),f.borderBottom.push("borderBottomColor"),f.borderLeft.push("borderLeftColor"),f.borderRight.push("borderRightColor"),f.borderTop.push("borderTopColor"),a.extend(d,e,{load:function(){var a=this;d.superclass.load.apply(a,arguments),a.from&&(a.from=c(a.from)),a.to&&(a.to=c(a.to))},interpolate:function(a,b,c){var e=d.superclass.interpolate;return 3===a.length&&3===b.length?"rgb("+[i(e(a[0],b[0],c)),i(e(a[1],b[1],c)),i(e(a[2],b[2],c))].join(", ")+")":4===a.length||4===b.length?"rgba("+[i(e(a[0],b[0],c)),i(e(a[1],b[1],c)),i(e(a[2],b[2],c)),i(e(a[3]||1,b[3]||1,c))].join(", ")+")":void g.warn("unknown value : "+a)}}),a.each(n,function(a){e.Factories[a]=d}),e.FxTypes.color=d,d}),KISSY.add("anim/timer/transform",["dom","./fx"],function(a,b){function c(b){return b=b.split(/,/),b=a.map(b,function(a){return f(a)})}function d(a){a=c(a);var b,d,e,g=a[0],h=a[1],i=a[2],j=a[3];return g*j-h*i?(b=Math.sqrt(g*g+h*h),e=(g*i+h*j)/(g*j-i*h),d=(g*j-h*i)/b,h*i>g*j&&(e=-e,b=-b)):b=d=e=0,{translateX:f(a[4]),translateY:f(a[5]),rotate:f(180*Math.atan2(h,g)/Math.PI),skewX:f(180*Math.atan(e)/Math.PI),skewY:0,scaleX:f(b),scaleY:f(d)}}function e(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function f(a){return Math.round(1e5*parseFloat(a))/1e5}function g(b){b=b.split(")");for(var c,g,h,i=a.trim,j=-1,k=b.length-1,l=e();++j<k;)switch(c=b[j].split("("),g=i(c[0]),h=c[1],g){case"translateX":case"translateY":case"scaleX":case"scaleY":l[g]=f(h);break;case"rotate":case"skewX":case"skewY":var m=f(h);a.endsWith(h,"deg")||(m=180*m/Math.PI),l[g]=m;break;case"translate":case"translate3d":h=h.split(","),l.translateX=f(h[0]),l.translateY=f(h[1]||0);break;case"scale":h=h.split(","),l.scaleX=f(h[0]),l.scaleY=f(h[1]||h[0]);break;case"matrix":return d(h)}return l}function h(){h.superclass.constructor.apply(this,arguments)}var i=b("dom"),j=b("./fx"),k=a.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";return a.extend(h,j,{load:function(){var a=this;h.superclass.load.apply(a,arguments),a.from=i.style(a.anim.node,"transform")||a.from,a.from=a.from&&"none"!==a.from?g(a.from):e(),a.to=a.to?g(a.to):e()},interpolate:function(b,c,d){var e=h.superclass.interpolate,f={};return f.translateX=e(b.translateX,c.translateX,d),f.translateY=e(b.translateY,c.translateY,d),f.rotate=e(b.rotate,c.rotate,d),f.skewX=e(b.skewX,c.skewX,d),f.skewY=e(b.skewY,c.skewY,d),f.scaleX=e(b.scaleX,c.scaleX,d),f.scaleY=e(b.scaleY,c.scaleY,d),a.substitute(k+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",f)}}),j.Factories.transform=h,h}),KISSY.add("anim/timer",["dom","./base","./timer/easing","./timer/manager","./timer/fx","./timer/short-hand","./timer/color","./timer/transform"],function(a,b){function c(){var b,d=this;c.superclass.constructor.apply(d,arguments),a.each(b=d.to,function(a,c){var d=j(c);c!==d&&(b[d]=b[c],delete b[c])})}var d=b("dom"),e=b("./base"),f=b("./timer/easing"),g=b("./timer/manager"),h=b("./timer/fx"),i=b("./timer/short-hand");b("./timer/color"),b("./timer/transform");var j=d._camelCase,k=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;return a.extend(c,e,{prepareFx:function(){var b=this,c=b.node,e=b._propsData;a.each(e,function(a){a.duration*=1e3,a.delay*=1e3,"string"==typeof a.easing&&(a.easing=f.toFn(a.easing))}),a.each(i,function(b,f){var g,h,i=e[f];i&&(h=i.value,g={},a.each(b,function(a){g[a]=d.css(c,a)}),d.css(c,f,h),a.each(g,function(b,f){f in e||(e[f]=a.merge(i,{value:d.css(c,f)})),d.css(c,f,b)}),delete e[f])});var g,j,l,m,n,o,p,q,r,s=0;a.isPlainObject(c)&&(s=1);for(g in e){if(j=e[g],l=j.value,o={isCustomFx:s,prop:g,anim:b,fxType:j.fxType,type:j.type,propData:j},p=h.getFx(o),m=l,n=p.cur(),l+="",q="",r=l.match(k)){if(m=parseFloat(r[2]),q=r[3],q&&"px"!==q&&n){var t=0,u=m;do++u,d.css(c,g,u+q),t=p.cur();while(0===t);n=u/t*n,d.css(c,g,n+q)}r[1]&&(m=("-="===r[1]?-1:1)*m+n)}o.from=n,o.to=m,o.unit=q,p.load(o),j.fx=p}},frame:function(){var b,c,d,e=this,f=1,g=e._propsData;for(b in g){if(d=g[b],c=d.fx,c.frame(),e.isRejected()||e.isResolved())return;f&=1===c.pos}var h=a.now(),i=1e3*e.config.duration,j=Math.max(0,e.startTime+i-h),k=j/i||0,l=1-k;e.defer.notify([e,l,j]),f&&e.stop(f)},doStop:function(a){var b,c,d,e=this,f=e._propsData;if(g.stop(e),a)for(b in f)d=f[b],c=d.fx,c&&c.frame(1)},doStart:function(){g.start(this)}}),c.Easing=f,c.Fx=h,c}),KISSY.add("anim/transition",["dom","event/dom","./base"],function(a,b){function c(b){var c="";return a.each(b,function(a,b){c&&(c+=","),c+=b+" "+a.duration+"s "+a.easing+" "+a.delay+"s"}),c}function d(){d.superclass.constructor.apply(this,arguments)}var e=b("dom"),f=b("event/dom"),g=b("./base"),h=a.Features,i=h.getVendorCssPropPrefix("transition"),j=/([A-Z]|^ms)/g,k=i?i.toLowerCase()+"TransitionEnd":"transitionend webkitTransitionEnd",l=h.getVendorCssPropName("transition");return a.extend(d,g,{doStart:function(){var b,d=this,g=d.node,i=g.style,m=d._propsData,n=i[l],o={};(b=m.transform)&&(delete m.transform,m[h.getVendorCssPropName("transform").replace(j,"-$1").toLowerCase()]=b),a.each(m,function(a,b){var c=a.value,f=e.css(g,b);"number"==typeof c&&(f=parseFloat(f)),f===c&&setTimeout(function(){d._onTransitionEnd({originalEvent:{propertyName:b}})},0),o[b]=c}),-1!==n.indexOf("none")?n="":n&&(n+=","),i[l]=n+c(m),f.on(g,k,d._onTransitionEnd,d),e.css(g,o)},beforeResume:function(){var b=this,c=b._propsData,d=a.merge(c),e=b._runTime/1e3;a.each(d,function(a,b){var d=e;a.delay>=d?a.delay-=d:(d-=a.delay,a.delay=0,a.duration>=d?a.duration-=d:delete c[b])})},_onTransitionEnd:function(b){b=b.originalEvent;var c=this,d=1,e=c._propsData;e[b.propertyName]&&1!==e[b.propertyName].pos&&(e[b.propertyName].pos=1,a.each(e,function(a){return 1!==a.pos?(d=0,!1):void 0
}),d&&c.stop(!0))},doStop:function(b){var c,d=this,g=d.node,h=g.style,i=d._propsData,j=[],m={};f.detach(g,k,d._onTransitionEnd,d),a.each(i,function(a,c){b||(m[c]=e.css(g,c)),j.push(c)}),c=a.trim(h[l].replace(new RegExp("(^|,)\\s*(?:"+j.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none",h[l]=c,e.css(g,m)}}),d}),KISSY.add("button/render",["component/control"],function(a,b){var c=b("component/control");return c.getDefaultRender().extend({beforeCreateDom:function(b){var c=this;a.mix(b.elAttrs,{role:"button",title:b.tooltip,"aria-describedby":b.describedby}),b.checked&&b.elCls.push(c.getBaseCssClasses("checked"))},_onSetChecked:function(a){var b=this,c=b.getBaseCssClasses("checked");b.$el[a?"addClass":"removeClass"](c)},_onSetTooltip:function(a){this.el.setAttribute("title",a)},_onSetDescribedby:function(a){this.el.setAttribute("aria-describedby",a)}},{name:"ButtonRender"})}),KISSY.add("button",["node","component/control","button/render"],function(a,b){var c=b("node"),d=b("component/control"),e=b("button/render"),f=c.KeyCode;return d.extend({isButton:1,bindUI:function(){this.$el.on("keyup",this.handleKeyDownInternal,this)},handleKeyDownInternal:function(a){return a.keyCode===f.ENTER&&"keydown"===a.type||a.keyCode===f.SPACE&&"keyup"===a.type?this.handleClickInternal(a):a.keyCode===f.SPACE},handleClickInternal:function(){var a=this;a.callSuper(),a.get("checkable")&&a.set("checked",!a.get("checked")),a.fire("click")}},{ATTRS:{value:{},describedby:{value:"",view:1},tooltip:{value:"",view:1},checkable:{},checked:{value:!1,view:1},xrender:{value:e}},xclass:"button"})}),KISSY.add("xtemplate",["xtemplate/runtime","xtemplate/compiler"],function(a,b){function c(a,b){var c;return b.cache&&(c=g[a])?c:(c=f.compileToFn(a,b),b.cache&&(g[a]=c),c)}function d(b,e){var f=this;e=a.merge(h,e),"string"==typeof b&&(b=c(b,e)),d.superclass.constructor.call(f,b,e)}var e=b("xtemplate/runtime"),f=b("xtemplate/compiler"),g=d.cache={},h={cache:!0};return a.extend(d,e,{},{compiler:f,Scope:e.Scope,RunTime:e,addCommand:e.addCommand,removeCommand:e.removeCommand}),d}),KISSY.add("xtemplate/compiler/parser",[],function(a,b){var c={},d=KISSY,e={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},f=function(a){var b=this;b.rules=[],d.mix(b,a),b.resetInput(b.input)};f.prototype={constructor:function(a){var b=this;b.rules=[],d.mix(b,a),b.resetInput(b.input)},resetInput:function(a){d.mix(this,{input:a,matched:"",stateStack:[f.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},genShortId:function(a){var b=97,c=122,d=c-b+1;a+="__gen";var e=this;a in e||(e[a]=-1);var f=e[a]=e[a]+1,g="";do g=String.fromCharCode(b+f%d)+g,f=Math.floor(f/d)-1;while(f>=0);return g},getCurrentRules:function(){var a=this,b=a.stateStack[a.stateStack.length-1],c=[];return b=a.mapState(b),d.each(a.rules,function(a){var e=a.state||a[3];e?d.inArray(b,e)&&c.push(a):b===f.STATIC.INITIAL&&c.push(a)}),c},pushState:function(a){this.stateStack.push(a)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var a=this,b=f.STATIC.DEBUG_CONTEXT_LIMIT,c=a.matched,d=a.match,e=a.input;c=c.slice(0,c.length-d.length);var g=(c.length>b?"...":"")+c.slice(-b).replace(/\n/," "),h=d+e;return h=h.slice(0,b)+(h.length>b?"...":""),g+h+"\n"+new Array(g.length+1).join("-")+"^"},mapSymbol:function(a){var b=this,c=b.symbolMap;return c?c[a]||(c[a]=b.genShortId("symbol")):a},mapReverseSymbol:function(a){var b,c=this,d=c.symbolMap,e=c.reverseSymbolMap;if(!e&&d){e=c.reverseSymbolMap={};for(b in d)e[d[b]]=b}return e?e[a]:a},mapState:function(a){var b=this,c=b.stateMap;return c?c[a]||(c[a]=b.genShortId("state")):a},lex:function(){var a,c,e,g,h,i=this,j=i.input,k=i.getCurrentRules();if(i.match=i.text="",!j)return i.mapSymbol(f.STATIC.END_TAG);for(a=0;a<k.length;a++){c=k[a];var l=c.regexp||c[1],m=c.token||c[0],n=c.action||c[2]||b;if(e=j.match(l)){h=e[0].match(/\n.*/g),h&&(i.lineNumber+=h.length),d.mix(i,{firstLine:i.lastLine,lastLine:i.lineNumber+1,firstColumn:i.lastColumn,lastColumn:h?h[h.length-1].length-1:i.lastColumn+e[0].length});var o;return o=i.match=e[0],i.matches=e,i.text=o,i.matched+=o,g=n&&n.call(i),g=g===b?m:i.mapSymbol(g),j=j.slice(o.length),i.input=j,g?g:i.lex()}}return d.error("lex error at line "+i.lineNumber+":\n"+i.showDebugInfo()),b}},f.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var g=new f({rules:[[0,/^[\s\S]*?(?={{)/,function(){var a,b=this,c=b.text,d=0;return(a=c.match(/\\+$/))&&(d=a[0].length),d%2?(b.pushState("et"),c=c.slice(0,-1)):b.pushState("t"),c=c.replace(/\\+$/g,function(a){return new Array(a.length/2+1).join("\\")}),b.text=c,"CONTENT"}],["b",/^[\s\S]+/,0],["b",/^[\s\S]{2,}?(?:(?={{)|$)/,function(){this.popState()},["et"]],["c",/^{{(?:#|@|\^)/,0,["t"]],["d",/^{{\//,0,["t"]],["e",/^{{\s*else\s*}}/,function(){this.popState()},["t"]],[0,/^{{![\s\S]*?}}/,function(){this.popState()},["t"]],["b",/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||"",this.popState()},["t"]],["f",/^{{{?/,0,["t"]],["g",/^\s+/,0,["t"]],["h",/^}}}?/,function(){this.popState()},["t"]],["i",/^\(/,0,["t"]],["j",/^\)/,0,["t"]],["k",/^\|\|/,0,["t"]],["l",/^&&/,0,["t"]],["m",/^===/,0,["t"]],["n",/^!==/,0,["t"]],["o",/^>=/,0,["t"]],["p",/^<=/,0,["t"]],["q",/^>/,0,["t"]],["r",/^</,0,["t"]],["s",/^\+/,0,["t"]],["t",/^-/,0,["t"]],["u",/^\*/,0,["t"]],["v",/^\//,0,["t"]],["w",/^%/,0,["t"]],["x",/^!/,0,["t"]],["y",/^"(\\[\s\S]|[^\\"])*"/,function(){this.text=this.text.slice(1,-1).replace(/\\"/g,'"')},["t"]],["y",/^'(\\[\s\S]|[^\\'])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["t"]],["z",/^true/,0,["t"]],["z",/^false/,0,["t"]],["aa",/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["t"]],["ab",/^=/,0,["t"]],["ac",/^\.(?=})/,0,["t"]],["ac",/^\.\./,function(){this.pushState("ws")},["t"]],["ad",/^\//,function(){this.popState()},["ws"]],["ad",/^\./,0,["t"]],["ae",/^\[/,0,["t"]],["af",/^\]/,0,["t"]],["ac",/^[a-zA-Z0-9_$]+/,0,["t"]],["ag",/^./,0,["t"]]]});return c.lexer=g,g.symbolMap={$EOF:"a",CONTENT:"b",OPEN_BLOCK:"c",OPEN_CLOSE_BLOCK:"d",INVERSE:"e",OPEN_TPL:"f",SPACE:"g",CLOSE:"h",LPAREN:"i",RPAREN:"j",OR:"k",AND:"l",LOGIC_EQUALS:"m",LOGIC_NOT_EQUALS:"n",GE:"o",LE:"p",GT:"q",LT:"r",PLUS:"s",MINUS:"t",MULTIPLY:"u",DIVIDE:"v",MODULUS:"w",NOT:"x",STRING:"y",BOOLEAN:"z",NUMBER:"aa",EQUALS:"ab",ID:"ac",SEP:"ad",REF_START:"ae",REF_END:"af",INVALID:"ag",$START:"ah",program:"ai",statements:"aj",statement:"ak",openBlock:"al",closeBlock:"am",tpl:"an",inBlockTpl:"ao",path:"ap",inTpl:"aq",Expression:"ar",params:"as",hash:"at",param:"au",ConditionalOrExpression:"av",ConditionalAndExpression:"aw",EqualityExpression:"ax",RelationalExpression:"ay",AdditiveExpression:"az",MultiplicativeExpression:"ba",UnaryExpression:"bb",PrimaryExpression:"bc",hashSegments:"bd",hashSegment:"be",pathSegments:"bf"},c.productions=[["ah",["ai"]],["ai",["aj","e","aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1,this.$3)}],["ai",["aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1)}],["aj",["ak"],function(){return[this.$1]}],["aj",["aj","ak"],function(){this.$1.push(this.$2)}],["ak",["al","ai","am"],function(){return new this.yy.BlockNode(this.lexer.lineNumber,this.$1,this.$2,this.$3)}],["ak",["an"]],["ak",["b"],function(){return new this.yy.ContentNode(this.lexer.lineNumber,this.$1)}],["ao",["ap"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1)}],["ao",["aq"]],["al",["c","ao","h"],function(){return"^"===this.$1.charAt(this.$1.length-1)&&(this.$2.isInverted=1),this.$2}],["am",["d","ap","h"],function(){return this.$2}],["an",["f","aq","h"],function(){return 3===this.$1.length&&(this.$2.escaped=!1),this.$2}],["an",["f","ar","h"],function(){var a=new this.yy.TplExpressionNode(this.lexer.lineNumber,this.$2);return 3===this.$1.length&&(a.escaped=!1),a}],["aq",["ap","g","as","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3,this.$5)}],["aq",["ap","g","as"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3)}],["aq",["ap","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,null,this.$3)}],["as",["as","g","au"],function(){this.$1.push(this.$3)}],["as",["au"],function(){return[this.$1]}],["au",["ar"]],["ar",["av"]],["av",["aw"]],["av",["av","k","aw"],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],["aw",["ax"]],["aw",["aw","l","ax"],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],["ax",["ay"]],["ax",["ax","m","ay"],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],["ax",["ax","n","ay"],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],["ay",["az"]],["ay",["ay","r","az"],function(){return new this.yy.RelationalExpression(this.$1,"<",this.$3)}],["ay",["ay","q","az"],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],["ay",["ay","p","az"],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],["ay",["ay","o","az"],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],["az",["ba"]],["az",["az","s","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],["az",["az","t","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],["ba",["bb"]],["ba",["ba","u","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"*",this.$3)}],["ba",["ba","v","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],["ba",["ba","w","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],["bb",["x","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["t","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["bc"]],["bc",["y"],function(){return new this.yy.StringNode(this.lexer.lineNumber,this.$1)}],["bc",["aa"],function(){return new this.yy.NumberNode(this.lexer.lineNumber,this.$1)}],["bc",["z"],function(){return new this.yy.BooleanNode(this.lexer.lineNumber,this.$1)}],["bc",["ap"]],["bc",["i","ar","j"],function(){return this.$2}],["at",["bd"],function(){return new this.yy.HashNode(this.lexer.lineNumber,this.$1)}],["bd",["bd","g","be"],function(){this.$1.push(this.$3)}],["bd",["be"],function(){return[this.$1]}],["be",["ac","ab","ar"],function(){return[this.$1,this.$3]}],["ap",["bf"],function(){return new this.yy.IdNode(this.lexer.lineNumber,this.$1)}],["bf",["bf","ad","ac"],function(){this.$1.push(this.$3)}],["bf",["bf","ae","ar","af"],function(){this.$1.push(this.$3)}],["bf",["bf","ad","aa"],function(){this.$1.push(this.$3)}],["bf",["ac"],function(){return[this.$1]}]],c.table={gotos:{0:{ai:4,aj:5,ak:6,al:7,an:8},2:{ao:10,aq:11,ap:12,bf:13},3:{aq:20,ar:21,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:30,bf:13},5:{ak:32,al:7,an:8},7:{ai:33,aj:5,ak:6,al:7,an:8},14:{ar:38,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},15:{bb:40,bc:29,ap:39,bf:13},16:{bb:41,bc:29,ap:39,bf:13},31:{aj:57,ak:6,al:7,an:8},33:{am:59},35:{as:61,au:62,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:64,bd:65,be:66,ap:39,bf:13},37:{ar:69,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},44:{aw:71,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},45:{ax:72,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},46:{ay:73,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},47:{ay:74,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},48:{az:75,ba:27,bb:28,bc:29,ap:39,bf:13},49:{az:76,ba:27,bb:28,bc:29,ap:39,bf:13},50:{az:77,ba:27,bb:28,bc:29,ap:39,bf:13},51:{az:78,ba:27,bb:28,bc:29,ap:39,bf:13},52:{ba:79,bb:28,bc:29,ap:39,bf:13},53:{ba:80,bb:28,bc:29,ap:39,bf:13},54:{bb:81,bc:29,ap:39,bf:13},55:{bb:82,bc:29,ap:39,bf:13},56:{bb:83,bc:29,ap:39,bf:13},57:{ak:32,al:7,an:8},58:{ap:84,bf:13},85:{ar:90,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},86:{au:91,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:92,bd:65,be:66,ap:39,bf:13},87:{be:94}},action:{0:{b:[1,b,1],c:[1,b,2],f:[1,b,3]},1:{a:[2,7],e:[2,7],c:[2,7],f:[2,7],b:[2,7],d:[2,7]},2:{ac:[1,b,9]},3:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},4:{a:[0]},5:{a:[2,2],d:[2,2],b:[1,b,1],c:[1,b,2],e:[1,b,31],f:[1,b,3]},6:{a:[2,3],e:[2,3],c:[2,3],f:[2,3],b:[2,3],d:[2,3]},7:{b:[1,b,1],c:[1,b,2],f:[1,b,3]},8:{a:[2,6],e:[2,6],c:[2,6],f:[2,6],b:[2,6],d:[2,6]},9:{h:[2,56],g:[2,56],ad:[2,56],ae:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],j:[2,56],af:[2,56]},10:{h:[1,b,34]},11:{h:[2,9]},12:{h:[2,8],g:[1,b,35]},13:{h:[2,52],g:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],j:[2,52],af:[2,52],ad:[1,b,36],ae:[1,b,37]},14:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},15:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},16:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},17:{h:[2,43],k:[2,43],l:[2,43],m:[2,43],n:[2,43],o:[2,43],p:[2,43],q:[2,43],r:[2,43],s:[2,43],t:[2,43],u:[2,43],v:[2,43],w:[2,43],j:[2,43],g:[2,43],af:[2,43]},18:{h:[2,45],k:[2,45],l:[2,45],m:[2,45],n:[2,45],o:[2,45],p:[2,45],q:[2,45],r:[2,45],s:[2,45],t:[2,45],u:[2,45],v:[2,45],w:[2,45],j:[2,45],g:[2,45],af:[2,45]},19:{h:[2,44],k:[2,44],l:[2,44],m:[2,44],n:[2,44],o:[2,44],p:[2,44],q:[2,44],r:[2,44],s:[2,44],t:[2,44],u:[2,44],v:[2,44],w:[2,44],j:[2,44],g:[2,44],af:[2,44]},20:{h:[1,b,42]},21:{h:[1,b,43]},22:{h:[2,20],j:[2,20],g:[2,20],af:[2,20],k:[1,b,44]},23:{h:[2,21],k:[2,21],j:[2,21],g:[2,21],af:[2,21],l:[1,b,45]},24:{h:[2,23],k:[2,23],l:[2,23],j:[2,23],g:[2,23],af:[2,23],m:[1,b,46],n:[1,b,47]},25:{h:[2,25],k:[2,25],l:[2,25],m:[2,25],n:[2,25],j:[2,25],g:[2,25],af:[2,25],o:[1,b,48],p:[1,b,49],q:[1,b,50],r:[1,b,51]},26:{h:[2,28],k:[2,28],l:[2,28],m:[2,28],n:[2,28],o:[2,28],p:[2,28],q:[2,28],r:[2,28],j:[2,28],g:[2,28],af:[2,28],s:[1,b,52],t:[1,b,53]},27:{h:[2,33],k:[2,33],l:[2,33],m:[2,33],n:[2,33],o:[2,33],p:[2,33],q:[2,33],r:[2,33],s:[2,33],t:[2,33],j:[2,33],g:[2,33],af:[2,33],u:[1,b,54],v:[1,b,55],w:[1,b,56]},28:{h:[2,36],k:[2,36],l:[2,36],m:[2,36],n:[2,36],o:[2,36],p:[2,36],q:[2,36],r:[2,36],s:[2,36],t:[2,36],u:[2,36],v:[2,36],w:[2,36],j:[2,36],g:[2,36],af:[2,36]},29:{h:[2,42],k:[2,42],l:[2,42],m:[2,42],n:[2,42],o:[2,42],p:[2,42],q:[2,42],r:[2,42],s:[2,42],t:[2,42],u:[2,42],v:[2,42],w:[2,42],j:[2,42],g:[2,42],af:[2,42]},30:{h:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],g:[1,b,35]},31:{b:[1,b,1],c:[1,b,2],f:[1,b,3]},32:{a:[2,4],e:[2,4],c:[2,4],f:[2,4],b:[2,4],d:[2,4]},33:{d:[1,b,58]},34:{c:[2,10],f:[2,10],b:[2,10]},35:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,60]},36:{aa:[1,b,67],ac:[1,b,68]},37:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},38:{j:[1,b,70]},39:{j:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],h:[2,46],g:[2,46],af:[2,46]},40:{h:[2,41],k:[2,41],l:[2,41],m:[2,41],n:[2,41],o:[2,41],p:[2,41],q:[2,41],r:[2,41],s:[2,41],t:[2,41],u:[2,41],v:[2,41],w:[2,41],j:[2,41],g:[2,41],af:[2,41]},41:{h:[2,40],k:[2,40],l:[2,40],m:[2,40],n:[2,40],o:[2,40],p:[2,40],q:[2,40],r:[2,40],s:[2,40],t:[2,40],u:[2,40],v:[2,40],w:[2,40],j:[2,40],g:[2,40],af:[2,40]},42:{a:[2,12],e:[2,12],c:[2,12],f:[2,12],b:[2,12],d:[2,12]},43:{a:[2,13],e:[2,13],c:[2,13],f:[2,13],b:[2,13],d:[2,13]},44:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},45:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},46:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},47:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},48:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},49:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},50:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},51:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},52:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},53:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},54:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},55:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},56:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},57:{a:[2,1],d:[2,1],b:[1,b,1],c:[1,b,2],f:[1,b,3]},58:{ac:[1,b,9]},59:{a:[2,5],e:[2,5],c:[2,5],f:[2,5],b:[2,5],d:[2,5]},60:{h:[2,56],g:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],ad:[2,56],ae:[2,56],ab:[1,b,85]},61:{h:[2,15],g:[1,b,86]},62:{h:[2,18],g:[2,18]},63:{h:[2,19],g:[2,19]},64:{h:[2,16]},65:{h:[2,48],g:[1,b,87]},66:{h:[2,50],g:[2,50]},67:{h:[2,55],g:[2,55],ad:[2,55],ae:[2,55],k:[2,55],l:[2,55],m:[2,55],n:[2,55],o:[2,55],p:[2,55],q:[2,55],r:[2,55],s:[2,55],t:[2,55],u:[2,55],v:[2,55],w:[2,55],j:[2,55],af:[2,55]},68:{h:[2,53],g:[2,53],ad:[2,53],ae:[2,53],k:[2,53],l:[2,53],m:[2,53],n:[2,53],o:[2,53],p:[2,53],q:[2,53],r:[2,53],s:[2,53],t:[2,53],u:[2,53],v:[2,53],w:[2,53],j:[2,53],af:[2,53]},69:{af:[1,b,88]},70:{h:[2,47],k:[2,47],l:[2,47],m:[2,47],n:[2,47],o:[2,47],p:[2,47],q:[2,47],r:[2,47],s:[2,47],t:[2,47],u:[2,47],v:[2,47],w:[2,47],j:[2,47],g:[2,47],af:[2,47]},71:{h:[2,22],k:[2,22],j:[2,22],g:[2,22],af:[2,22],l:[1,b,45]},72:{h:[2,24],k:[2,24],l:[2,24],j:[2,24],g:[2,24],af:[2,24],m:[1,b,46],n:[1,b,47]},73:{h:[2,26],k:[2,26],l:[2,26],m:[2,26],n:[2,26],j:[2,26],g:[2,26],af:[2,26],o:[1,b,48],p:[1,b,49],q:[1,b,50],r:[1,b,51]},74:{h:[2,27],k:[2,27],l:[2,27],m:[2,27],n:[2,27],j:[2,27],g:[2,27],af:[2,27],o:[1,b,48],p:[1,b,49],q:[1,b,50],r:[1,b,51]},75:{h:[2,32],k:[2,32],l:[2,32],m:[2,32],n:[2,32],o:[2,32],p:[2,32],q:[2,32],r:[2,32],j:[2,32],g:[2,32],af:[2,32],s:[1,b,52],t:[1,b,53]},76:{h:[2,31],k:[2,31],l:[2,31],m:[2,31],n:[2,31],o:[2,31],p:[2,31],q:[2,31],r:[2,31],j:[2,31],g:[2,31],af:[2,31],s:[1,b,52],t:[1,b,53]},77:{h:[2,30],k:[2,30],l:[2,30],m:[2,30],n:[2,30],o:[2,30],p:[2,30],q:[2,30],r:[2,30],j:[2,30],g:[2,30],af:[2,30],s:[1,b,52],t:[1,b,53]},78:{h:[2,29],k:[2,29],l:[2,29],m:[2,29],n:[2,29],o:[2,29],p:[2,29],q:[2,29],r:[2,29],j:[2,29],g:[2,29],af:[2,29],s:[1,b,52],t:[1,b,53]},79:{h:[2,34],k:[2,34],l:[2,34],m:[2,34],n:[2,34],o:[2,34],p:[2,34],q:[2,34],r:[2,34],s:[2,34],t:[2,34],j:[2,34],g:[2,34],af:[2,34],u:[1,b,54],v:[1,b,55],w:[1,b,56]},80:{h:[2,35],k:[2,35],l:[2,35],m:[2,35],n:[2,35],o:[2,35],p:[2,35],q:[2,35],r:[2,35],s:[2,35],t:[2,35],j:[2,35],g:[2,35],af:[2,35],u:[1,b,54],v:[1,b,55],w:[1,b,56]},81:{h:[2,37],k:[2,37],l:[2,37],m:[2,37],n:[2,37],o:[2,37],p:[2,37],q:[2,37],r:[2,37],s:[2,37],t:[2,37],u:[2,37],v:[2,37],w:[2,37],j:[2,37],g:[2,37],af:[2,37]},82:{h:[2,38],k:[2,38],l:[2,38],m:[2,38],n:[2,38],o:[2,38],p:[2,38],q:[2,38],r:[2,38],s:[2,38],t:[2,38],u:[2,38],v:[2,38],w:[2,38],j:[2,38],g:[2,38],af:[2,38]},83:{h:[2,39],k:[2,39],l:[2,39],m:[2,39],n:[2,39],o:[2,39],p:[2,39],q:[2,39],r:[2,39],s:[2,39],t:[2,39],u:[2,39],v:[2,39],w:[2,39],j:[2,39],g:[2,39],af:[2,39]},84:{h:[1,b,89]},85:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,9]},86:{i:[1,b,14],t:[1,b,15],x:[1,b,16],y:[1,b,17],z:[1,b,18],aa:[1,b,19],ac:[1,b,60]},87:{ac:[1,b,93]},88:{h:[2,54],g:[2,54],ad:[2,54],ae:[2,54],k:[2,54],l:[2,54],m:[2,54],n:[2,54],o:[2,54],p:[2,54],q:[2,54],r:[2,54],s:[2,54],t:[2,54],u:[2,54],v:[2,54],w:[2,54],j:[2,54],af:[2,54]},89:{a:[2,11],e:[2,11],c:[2,11],f:[2,11],b:[2,11],d:[2,11]},90:{h:[2,51],g:[2,51]},91:{h:[2,17],g:[2,17]},92:{h:[2,14]},93:{ab:[1,b,85]},94:{h:[2,49],g:[2,49]}}},c.parse=function(a){var c,f,g,h=this,i=h.lexer,j=h.table,k=j.gotos,l=j.action,m=h.productions,n=[null],o=[0];for(i.resetInput(a);;){if(c=o[o.length-1],f||(f=i.lex()),!f)return d.log("it is not a valid input: "+a,"error"),!1;if(g=l[c]&&l[c][f],!g){var p,q=[];if(l[c])for(var r in l[c])q.push(h.lexer.mapReverseSymbol(r));return p="Syntax error at line "+i.lineNumber+":\n"+i.showDebugInfo()+"\nexpect "+q.join(", "),d.error(p),!1}switch(g[e.TYPE_INDEX]){case e.SHIFT_TYPE:o.push(f),n.push(i.text),o.push(g[e.TO_INDEX]),f=null;break;case e.REDUCE_TYPE:var s,t=m[g[e.PRODUCTION_INDEX]],u=t.symbol||t[0],v=t.action||t[2],w=t.rhs||t[1],x=w.length,y=0,z=n[n.length-x];for(s=b,h.$$=z;x>y;y++)h["$"+(x-y)]=n[n.length-1-y];v&&(s=v.call(h)),z=s!==b?s:h.$$,x&&(o=o.slice(0,-1*x*2),n=n.slice(0,-1*x)),o.push(u),n.push(z);var A=k[o[o.length-2]][o[o.length-1]];o.push(A);break;case e.ACCEPT_TYPE:return z}}return b},c}),KISSY.add("xtemplate/compiler/ast",[],function(a){var b={};return b.ProgramNode=function(a,b,c){var d=this;d.lineNumber=a,d.statements=b,d.inverse=c},b.ProgramNode.prototype.type="program",b.BlockNode=function(b,c,d,e){var f,g=e.parts,h=this;a.equals(c.path.parts,g)||(f="Syntax error at line "+b+":\nexpect {{/"+c.path.parts+"}} not {{/"+g+"}}",a.error(f)),h.lineNumber=b,h.tpl=c,h.program=d},b.BlockNode.prototype.type="block",b.TplNode=function(a,b,c,d){var e=this;e.lineNumber=a,e.path=b,e.params=c,e.hash=d,e.escaped=!0,e.isInverted=!1},b.TplNode.prototype.type="tpl",b.TplExpressionNode=function(a,b){var c=this;c.lineNumber=a,c.expression=b,c.escaped=!0},b.TplExpressionNode.prototype.type="tplExpression",b.ContentNode=function(a,b){var c=this;c.lineNumber=a,c.value=b},b.ContentNode.prototype.type="content",b.UnaryExpression=function(a,b){this.value=b,this.unaryType=a},b.UnaryExpression.prototype.type="unaryExpression",b.MultiplicativeExpression=function(a,b,c){var d=this;d.op1=a,d.opType=b,d.op2=c},b.MultiplicativeExpression.prototype.type="multiplicativeExpression",b.AdditiveExpression=function(a,b,c){var d=this;d.op1=a,d.opType=b,d.op2=c},b.AdditiveExpression.prototype.type="additiveExpression",b.RelationalExpression=function(a,b,c){var d=this;d.op1=a,d.opType=b,d.op2=c},b.RelationalExpression.prototype.type="relationalExpression",b.EqualityExpression=function(a,b,c){var d=this;d.op1=a,d.opType=b,d.op2=c},b.EqualityExpression.prototype.type="equalityExpression",b.ConditionalAndExpression=function(a,b){var c=this;c.op1=a,c.op2=b},b.ConditionalAndExpression.prototype.type="conditionalAndExpression",b.ConditionalOrExpression=function(a,b){var c=this;c.op1=a,c.op2=b},b.ConditionalOrExpression.prototype.type="conditionalOrExpression",b.StringNode=function(a,b){var c=this;c.lineNumber=a,c.value=b},b.StringNode.prototype.type="string",b.NumberNode=function(a,b){var c=this;c.lineNumber=a,c.value=b},b.NumberNode.prototype.type="number",b.BooleanNode=function(a,b){var c=this;c.lineNumber=a,c.value=b},b.BooleanNode.prototype.type="boolean",b.HashNode=function(b,c){var d=this,e={};d.lineNumber=b,a.each(c,function(a){e[a[0]]=a[1]}),d.value=e},b.HashNode.prototype.type="hash",b.IdNode=function(b,c){var d=this,e=[],f=0;d.lineNumber=b,a.each(c,function(a){".."===a?f++:e.push(a)}),d.parts=e,d.string=e.join("."),d.depth=f},b.IdNode.prototype.type="id",b}),KISSY.add("xtemplate/compiler",["xtemplate/runtime","./compiler/parser","./compiler/ast"],function(a,b){function c(a){return a+n++}function d(a,b){return a=b?e(a,!1):a.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),a=a.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}function e(a,b){return a.replace(b?k:l,function(a){return a.length%2&&(a="\\"+a),a})}function f(a,b){m.apply(a,b)}function g(a){return a[a.length-1]}var h=b("xtemplate/runtime"),i=b("./compiler/parser");i.yy=b("./compiler/ast");var j,k=/\\*"/g,l=/\\*'/g,m=[].push,n=0,o=0,p={genFunction:function(a,b){var c=[];if(b||c.push("function(scope) {"),c.push('var buffer = ""'+(b?",":";")),b){c.push("config = this.config,engine = this,moduleWrap, utils = config.utils;"),c.push('if (typeof module !== "undefined" && module.kissy) {moduleWrap = module;}');var d,e="",g=h.utils;for(d in g)e+=d+"Util = utils."+d+",";e&&c.push("var "+e.slice(0,e.length-1)+";")}if(a)for(var i=0,j=a.length;j>i;i++)f(c,this[a[i].type](a[i]));return c.push("return buffer;"),b?{params:["scope","S","undefined"],source:c}:(c.push("}"),c)},genIdOrInlineCommand:function(b,d){var e,g=[],h=b.depth,i=b.parts,j=c("id"),k=this;if(0===h){var l=d&&k.genConfig(d);l&&(e=l[0],f(g,l[1]))}var m=k.getIdStringFromIdParts(g,i);return h||a.startsWith(m,"this.")?g.push("var "+j+' = getPropertyUtil(engine,scope,"'+m+'",'+h+","+b.lineNumber+");"):e?("include"===m&&g.push('if(moduleWrap) {require("'+d.params[0].value+'");'+e+".params[0] = moduleWrap.resolveByName("+e+".params[0]);}"),g.push("var "+j+" = runInlineCommandUtil(engine,scope,"+e+',"'+m+'",'+b.lineNumber+");")):g.push("var "+j+" = getPropertyOrRunCommandUtil(engine,scope,"+(e||"{}")+',"'+m+'",'+h+","+b.lineNumber+");"),[j,g]},genOpExpression:function(a,b){var c,d,e=[],h=this[a.op1.type](a.op1),i=this[a.op2.type](a.op2);return c=h[0],d=i[0],c&&d?(f(e,h[1]),f(e,i[1]),e.push(c+b+d),["",e]):c||d?c&&!d?(f(e,h[1]),f(e,i[1].slice(0,-1)),e.push(c+b+"("+g(i[1])+")"),["",e]):!c&&d?(f(e,h[1].slice(0,-1)),f(e,i[1]),e.push("("+g(h[1])+")"+b+d),["",e]):void 0:(f(e,h[1].slice(0,-1)),f(e,i[1].slice(0,-1)),e.push("("+g(h[1])+")"+b+"("+g(i[1])+")"),["",e])},genConfig:function(b){var d,e,h,i=[],j=this;if(b){if(e=b.params,h=b.hash,(e||h)&&(d=c("config"),i.push("var "+d+" = {};")),e){var k=c("params");i.push("var "+k+" = [];"),a.each(e,function(a){var b=j[a.type](a);b[0]?(f(i,b[1]),i.push(k+".push("+b[0]+");")):(f(i,b[1].slice(0,-1)),i.push(k+".push("+g(b[1])+");"))}),i.push(d+".params="+k+";")}if(h){var l=c("hash");i.push("var "+l+" = {};"),a.each(h.value,function(a,b){var c=j[a.type](a);c[0]?(f(i,c[1]),i.push(l+'["'+b+'"] = '+c[0]+";")):(f(i,c[1].slice(0,-1)),i.push(l+'["'+b+'"] = '+g(c[1])+";"))}),i.push(d+".hash="+l+";")}}return[d,i]},conditionalOrExpression:function(a){return this.genOpExpression(a,"||")},conditionalAndExpression:function(a){return this.genOpExpression(a,"&&")},relationalExpression:function(a){return this.genOpExpression(a,a.opType)},equalityExpression:function(a){return this.genOpExpression(a,a.opType)},additiveExpression:function(a){return this.genOpExpression(a,a.opType)},multiplicativeExpression:function(a){return this.genOpExpression(a,a.opType)},unaryExpression:function(a){var b,c=[],d=a.unaryType,e=this[a.value.type](a.value);return m.apply(c,e[1]),(b=e[0])?c.push(b+"="+d+b+";"):c[c.length-1]=""+d+g(c),[b,c]},string:function(a){return["",["'"+d(a.value,!0)+"'"]]},number:function(a){return["",[a.value]]},"boolean":function(a){return["",[a.value]]},id:function(a){var b=[],d=a.depth,e=a.parts,f=c("id"),g=this,h=g.getIdStringFromIdParts(b,e);return b.push("var "+f+' = getPropertyUtil(engine,scope,"'+h+'",'+d+","+a.lineNumber+");"),[f,b]},block:function(b){var d,e=b.program,g=[],h=this,i=b.tpl,j=h.genConfig(i),k=j[0],l=i.path,m=l.string;if(f(g,j[1]),k||(k=a.guid("config"),g.push("var "+k+" = {};")),g.push(k+".fn="+h.genFunction(e.statements).join("\n")+";"),e.inverse&&(d=h.genFunction(e.inverse).join("\n"),g.push(k+".inverse="+d+";")),i.isInverted){var n=c("inverse");g.push("var "+n+"="+k+".fn;"),g.push(k+".fn = "+k+".inverse;"),g.push(k+".inverse = "+n+";")}if(!i.hash&&!i.params)for(var o=l.parts,p=0;p<o.length;p++)if("string"!=typeof o[p]){m=h.getIdStringFromIdParts(g,o);break}return g.push("buffer += runBlockCommandUtil(engine, scope, "+k+', "'+m+'", '+l.lineNumber+");"),g},content:function(a){return["buffer += '"+d(a.value,!1)+"';"]},tpl:function(a){var b=[],c=this.genIdOrInlineCommand(a.path,a);return f(b,c[1]),b.push("buffer += renderOutputUtil("+c[0]+","+a.escaped+");"),b},tplExpression:function(a){var b,c,d=[],e=a.escaped,h=a.expression,i=a.expression.type;return b="id"===i?this.genIdOrInlineCommand(h):this[i](h),b[0]?(f(d,b[1]),c=b[0]):(f(d,b[1].slice(0,-1)),c=g(b[1])),d.push("buffer += renderOutputUtil("+c+","+e+");"),d},getIdStringFromIdParts:function(a,b){var c,d,e,g,h="",i=this,j=!0;for(c=0;c<b.length;c++)d=b[c],e=d.type,j||(h+="."),e?(g=i[e](d),g[0]&&(f(a,g[1]),h+='"+'+g[0]+'+"',j=!0)):(h+=d,j=!1);return h}};return j={parse:function(a){return i.parse(a)},compileToStr:function(a){var b=this.compile(a);return"function("+b.params.join(",")+"){\n"+b.source.join("\n")+"}"},compile:function(a){var b=this.parse(a);return n=0,p.genFunction(b.statements,!0)},compileToFn:function(a,b){var c=j.compile(a);b=b||{};var d="sourceURL="+(b.name?b.name:"xtemplate"+o++)+".js";return Function.apply(null,[].concat(c.params).concat(c.source.join("\n")+"\n//@ "+d+"\n//# "+d))}}}),KISSY.add("base",["attribute"],function(a,b){function c(a,b){return function(c){return function(){var d=this;b?c.apply(d,arguments):d.callSuper.apply(d,arguments);var e=arguments.callee.__owner__.__extensions__||[];b&&e.reverse(),h(d,e,a,arguments),b?d.callSuper.apply(d,arguments):c.apply(d,arguments)}}}function d(a){var b=this,c=b.__extensions__,d=b.__hooks__,e=b.prototype;if(c.length&&d)for(var f in d)(!e.hasOwnProperty(f)||a.hasOwnProperty(f))&&(a[f]=a[f]||l);return n.call(b,a)}function e(a){var b,c=this;a.target===c&&(b=c[k+a.type.slice(5).slice(0,-6)],b.call(c,a.newVal,a))}function f(b){var c,d=b.get("plugins");a.each(d,function(a,b){"function"==typeof a&&(c=a,d[b]=new c)})}function g(a){var b,c=this,d=c.get("plugins");if(b=d.length)for(var e=0;b>e;e++)d[e][a]&&d[e][a](c)}function h(a,b,c,d){var e;if(e=b&&b.length)for(var f=0;e>f;f++){var g=b[f]&&(c?b[f].prototype[c]:b[f]);g&&g.apply(a,d||[])}}var i=b("attribute"),j=a.ucfirst,k="_onSet",l=a.noop,m=i.extend({constructor:function(){var a=this;a.callSuper.apply(a,arguments);var b=a.get("listeners");for(var c in b)a.on(c,b[c]);a.initializer(),f(a),g.call(a,"pluginInitializer"),a.bindInternal(),a.syncInternal()},initializer:l,__getHook:c,__callPluginsMethod:g,bindInternal:function(){var a,b,c=this,d=c.getAttrs();for(a in d)b=k+j(a),c[b]&&c.on("after"+j(a)+"Change",e)},syncInternal:function(){for(var a,b=this,c=[],d=b.constructor,e=b.getAttrs();d;)c.push(d),d=d.superclass&&d.superclass.constructor;for(c.reverse(),a=0;a<c.length;a++){var f=c[a].ATTRS||{};for(var g in f)if(g in e){var h,i,l=k+j(g);(i=b[l])&&0!==e[g].sync&&void 0!==(h=b.get(g))&&i.call(b,h)}}},plug:function(a){var b=this;if("function"==typeof a){var c=a;a=new c}return a.pluginInitializer&&a.pluginInitializer(b),b.get("plugins").push(a),b},unplug:function(b){var c=[],d=this,e="string"==typeof b;return a.each(d.get("plugins"),function(a){var f,g=0;b&&(e?(f=a.get&&a.get("pluginId")||a.pluginId,f!==b&&(c.push(a),g=1)):a!==b&&(c.push(a),g=1)),g||a.pluginDestructor(d)}),d.setInternal("plugins",c),d},getPlugin:function(b){var c=null;return a.each(this.get("plugins"),function(a){var d=a.get&&a.get("pluginId")||a.pluginId;return d===b?(c=a,!1):void 0}),c},destructor:a.noop,destroy:function(){var a=this;a.get("destroyed")||(g.call(a,"pluginDestructor"),a.destructor(),a.set("destroyed",!0),a.fire("destroy"),a.detach())}});a.mix(m,{__hooks__:{initializer:c(),destructor:c("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function o(b,c,e){a.isArray(b)||(e=c,c=b,b=[]),e=e||{},c=c||{};var f=i.extend.call(this,c,e);if(f.__extensions__=b,d.call(f,{}),b.length){var g={},h={};a.each(b.concat(f),function(b){if(b){a.each(b.ATTRS,function(b,c){var d=g[c]=g[c]||{};a.mix(d,b)});var c,d=b.prototype;for(c in d)d.hasOwnProperty(c)&&(h[c]=d[c])}}),f.ATTRS=g,h.constructor=f,a.augment(f,h)}return f.extend=e.extend||o,f.addMembers=d,f}});var n=m.addMembers;return a.Base=m,m}),KISSY.add("attribute",["event/custom"],function(a,b,c,d){function e(){return arguments[1].toUpperCase()}function f(a){return a.replace(z,e)}function g(a,b){return"string"==typeof b?a[b]:b}function h(a){return a.__attrVals||(a.__attrVals={})}function i(b,c){return b+a.ucfirst(c)+"Change"}function j(b,c,d,e,f,g,h,j){return h=h||d,b.fire(i(c,d),a.mix({attrName:h,subAttrName:g,prevVal:e,newVal:f},j))
}function k(a,b,c){var d=a[b];return c||d||(a[b]=d={}),d||{}}function l(a,b){for(var c=0,d=b.length;void 0!==a&&d>c;c++)a=a[b[c]];return a}function m(a,b,c){var d=b.length-1,e=a;if(d>=0){for(var f=0;d>f;f++)a=a[b[f]];void 0!==a?a[b[f]]=c:e=void 0}return e}function n(a){var b;return-1!==a.indexOf(".")&&(b=a.split("."),a=b.shift()),{path:b,name:a}}function o(b,c,d){var e=d;return c&&(e=void 0===b?{}:a.clone(b),m(e,c,d)),e}function p(a,b){var c=k(a,"__defaultBeforeFns");if(!c[b]){c[b]=1;var d=i("before",b);a.publish(d,{defaultFn:r})}}function q(b,c,d,e,f){var g,h,j,k=n(c),m=c;if(c=k.name,g=k.path,j=b.get(c),p(b,c),g&&(h=l(j,g)),!e.force){if(!g&&j===d)return void 0;if(g&&h===d)return void 0}d=o(j,g,d);var q=a.mix({attrName:c,subAttrName:m,prevVal:j,newVal:d,_opts:e,_attrs:f,target:b},e.data);if(e.silent){if(D===r.call(b,q))return D}else if(D===b.fire(i("before",c),q))return D;return b}function r(a){if(a.target!==this)return void 0;var b=this,c=a.newVal,d=a.prevVal,e=a.attrName,f=a.subAttrName,g=a._attrs,i=a._opts,k=b.setInternal(e,c);return k===D?k:void(i.silent||(c=h(b)[e],j(b,"after",e,d,c,f,null,i.data),g?g.push({prevVal:d,newVal:c,attrName:e,subAttrName:f}):j(b,"","*",[d],[c],[f],[e],i.data)))}function s(a){var b=this,c=b.constructor;for(b.userConfig=a;c;)v(b,c.ATTRS),c=c.superclass?c.superclass.constructor:null;w(b,a)}function t(b,c){var d=c.__hooks__||{};for(var e in d)e in b&&(b[e]=d[e](b[e]));a.each(b,function(a,d){if("function"==typeof a){var e=0;if(a.__owner__){var f=a.__owner__;delete a.__owner__,delete a.__name__,e=a.__wrapped__=1;var g=B(a);g.__owner__=f,g.__name__=d,f.prototype[d]=g}else a.__wrapped__&&(e=1);e&&(b[d]=a=B(a)),a.__owner__=c,a.__name__=d}})}function u(b){var c=this;t(b,c),a.mix(c.prototype,b)}function v(a,b){if(b)for(var c in b)a.addAttr(c,b[c],!1)}function w(a,b){if(b)for(var c in b)a.setInternal(c,b[c])}function x(a,b){var c,d=a.getAttrs(),e=k(d,b,1),f=e.valueFn;return f&&(f=g(a,f))&&(c=f.call(a),void 0!==c&&(e.value=c),delete e.valueFn,d[b]=e),e.value}function y(a,b,c,d){var e,f,h;h=n(b),b=h.name,e=h.path,e&&(f=a.get(b),c=o(f,e,c));var i,j=k(a.getAttrs(),b),l=j.validator;return l&&(l=g(a,l))&&(i=l.call(a,c,b,d),void 0!==i&&i!==!0)?i:void 0}var z=/(?:^|-)([a-z])/gi,A=b("event/custom");d.exports=s;var B=a.bind,C={},D=!1;s.extend=function E(b,c){var d,e=this;c=c||{},b=b||{};var g,h=c.__hooks__;(g=e.__hooks__)&&(h=c.__hooks__=c.__hooks__||{},a.mix(h,g,!1));var i=c.name||"AttributeDerived";d=b.hasOwnProperty("constructor")?b.constructor:new Function("return function "+f(i)+"(){ this.callSuper.apply(this, arguments);}")(),b.constructor=d,d.__hooks__=h,t(b,d);var j,k=c.inheritedStatics;return(j=e.inheritedStatics)&&(k=c.inheritedStatics=c.inheritedStatics||{},a.mix(k,j,!1)),a.extend(d,e,b,c),k&&a.mix(d,k),d.extend=c.extend||E,d.addMembers=u,d},a.augment(s,A.Target,{INVALID:C,callSuper:function(){var a,b,c=this,d=arguments;"function"==typeof c&&c.__name__?(a=c,b=d[0],d=Array.prototype.slice.call(d,1)):(a=arguments.callee.caller,a.__wrapped__&&(a=a.caller),b=c);var e=a.__name__;if(!e)return void 0;var f=a.__owner__.superclass[e];return f?f.apply(b,d||[]):void 0},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var a,b=this,c={},d=b.getAttrs();for(a in d)c[a]=b.get(a);return c},addAttr:function(b,c,d){var e,f=this,g=f.getAttrs(),h=a.clone(c);return(e=g[b])?a.mix(e,h,d):g[b]=h,f},addAttrs:function(b,c){var d=this;return a.each(b,function(a,b){d.addAttr(b,a)}),c&&d.set(c),d},hasAttr:function(a){return this.getAttrs().hasOwnProperty(a)},removeAttr:function(a){var b=this,c=h(b),d=b.getAttrs();return b.hasAttr(a)&&(delete d[a],delete c[a]),b},set:function(b,c,d){var e,f=this;if(a.isPlainObject(b)){d=c,d=d||{};var g=Object(b),h=[],i=[];for(b in g)void 0!==(e=y(f,b,g[b],g))&&i.push(e);if(i.length)return d.error&&d.error(i),D;for(b in g)q(f,b,g[b],d,h);var k=[],l=[],m=[],n=[];return a.each(h,function(a){l.push(a.prevVal),m.push(a.newVal),k.push(a.attrName),n.push(a.subAttrName)}),k.length&&j(f,"","*",l,m,n,k,d.data),f}return d=d||{},e=y(f,b,c),void 0!==e?(d.error&&d.error(e),D):q(f,b,c,d)},setInternal:function(a,b){var c,d=this,e=k(d.getAttrs(),a),f=e.setter;return f&&(f=g(d,f))&&(c=f.call(d,b,a)),c===C?D:(void 0!==c&&(b=c),void(h(d)[a]=b))},get:function(a){var b,c,d,e,f=this,i=".",j=h(f);return-1!==a.indexOf(i)&&(b=a.split(i),a=b.shift()),c=k(f.getAttrs(),a,1),d=c.getter,e=a in j?j[a]:x(f,a),d&&(d=g(f,d))&&(e=d.call(f,e,a)),a in j||void 0===e||(j[a]=e),b&&(e=l(e,b)),e},reset:function(a,b){var c=this;if("string"==typeof a)return c.hasAttr(a)?c.set(a,x(c,a),b):c;b=a;var d=c.getAttrs(),e={};for(a in d)e[a]=x(c,a);return c.set(e,b),c}})}),KISSY.add("combobox/combobox-xtpl",[],function(a,b,c,d){return function(a){var b,c="",e=this.config,f=this,g=e.utils;"undefined"!=typeof d&&d.kissy&&(b=d);var h=g.runBlockCommand,i=g.renderOutput,j=g.getProperty,k=g.runInlineCommand,l=g.getPropertyOrRunCommand;c+='<div id="ks-combobox-invalid-el-';var m=l(f,a,{},"id",0,1);c+=i(m,!0),c+='"\n     class="';var n={},o=[];o.push("invalid-el"),n.params=o;var p=k(f,a,n,"getBaseCssClasses",2);c+=i(p,!0),c+='">\n    <div class="';var q={},r=[];r.push("invalid-inner"),q.params=r;var s=k(f,a,q,"getBaseCssClasses",3);c+=i(s,!0),c+='"></div>\n</div>\n\n';var t={},u=[],v=j(f,a,"hasTrigger",0,6);u.push(v),t.params=u,t.fn=function(a){var b="";b+='\n<div id="ks-combobox-trigger-';var c=l(f,a,{},"id",0,7);b+=i(c,!0),b+='"\n     class="';var d={},e=[];e.push("trigger"),d.params=e;var g=k(f,a,d,"getBaseCssClasses",8);b+=i(g,!0),b+='">\n    <div class="';var h={},j=[];j.push("trigger-inner"),h.params=j;var m=k(f,a,h,"getBaseCssClasses",9);return b+=i(m,!0),b+='">&#x25BC;</div>\n</div>\n'},c+=h(f,a,t,"if",6),c+='\n\n<div class="';var w={},x=[];x.push("input-wrap"),w.params=x;var y=k(f,a,w,"getBaseCssClasses",13);c+=i(y,!0),c+='">\n\n    <input id="ks-combobox-input-';var z=l(f,a,{},"id",0,15);c+=i(z,!0),c+='"\n           aria-haspopup="true"\n           aria-autocomplete="list"\n           aria-haspopup="true"\n           role="autocomplete"\n           aria-expanded="false"\n\n    ';var A={},B=[],C=j(f,a,"disabled",0,22);B.push(C),A.params=B,A.fn=function(){var a="";return a+="\n    disabled\n    "},c+=h(f,a,A,"if",22),c+='\n\n    autocomplete="off"\n    class="';var D={},E=[];E.push("input"),D.params=E;var F=k(f,a,D,"getBaseCssClasses",27);c+=i(F,!0),c+='"\n\n    value="';var G=l(f,a,{},"value",0,29);c+=i(G,!0),c+='"\n    />\n\n\n    <label id="ks-combobox-placeholder-';var H=l(f,a,{},"id",0,33);c+=i(H,!0),c+='"\n           for="ks-combobox-input-';var I=l(f,a,{},"id",0,34);c+=i(I,!0),c+="\"\n            style='display:";var J={},K=[],L=j(f,a,"value",0,35);K.push(L),J.params=K,J.fn=function(){var a="";return a+="none"},J.inverse=function(){var a="";return a+="block"},c+=h(f,a,J,"if",35),c+=";'\n    class=\"";var M={},N=[];N.push("placeholder"),M.params=N;var O=k(f,a,M,"getBaseCssClasses",36);c+=i(O,!0),c+='">\n    ';var P=l(f,a,{},"placeholder",0,37);return c+=i(P,!0),c+="\n    </label>\n</div>\n"}}),KISSY.add("combobox/render",["component/control","./combobox-xtpl"],function(a,b){var c=b("component/control"),d=b("./combobox-xtpl");return c.getDefaultRender().extend({beforeCreateDom:function(b,c){a.mix(c,{input:"#ks-combobox-input-{id}",trigger:"#ks-combobox-trigger-{id}",invalidEl:"#ks-combobox-invalid-el-{id}",placeholderEl:"#ks-combobox-placeholder-{id}"})},getKeyEventTarget:function(){return this.control.get("input")},_onSetCollapsed:function(a){this.control.get("input").attr("aria-expanded",!a)},_onSetDisabled:function(a,b){this.callSuper(a,b),this.control.get("input").attr("disabled",a)}},{ATTRS:{contentTpl:{value:d}},HTML_PARSER:{value:function(a){return a.one("."+this.getBaseCssClass("input")).val()},input:function(a){return a.one("."+this.getBaseCssClass("input"))},trigger:function(a){return a.one("."+this.getBaseCssClass("trigger"))},invalidEl:function(a){return a.one("."+this.getBaseCssClass("invalid-el"))},placeholderEl:function(a){return a.one("."+this.getBaseCssClass("placeholder"))}}})}),KISSY.add("combobox/control",["node","component/control","./render","menu"],function(a,b){function c(a){for(var b=0;b<a.length;b++)if(!a[b].get("disabled"))return a[b];return null}function d(){var a=this;k(a)}function e(){var a=this;setTimeout(function(){l(a)},0)}function f(){var a=this;a.focus(),l(a)}function g(){var a=this;a.setValueFromAutocomplete(a.getValueForAutocomplete(),{force:1})}function h(a,b){var c,h=a.get("input"),i=b.get("el");c=b.get("contentEl"),h.attr("aria-owns",i.attr("id")),i.on("focusout",d,a),i.on("focusin",e,a),c.on("mouseover",f,a),c.on("mousedown",g,a)}function i(a){var b,c=a.target,d=this;c.isMenuItem&&(b=c.get("textContent"),d.setValueFromAutocomplete(b),d._savedValue=b,d.set("collapsed",!0))}function j(a,b){var c=a.$el,d=a.view.getBaseCssClasses("invalid"),e=a.get("invalidEl");b?(c.addClass(d),e.attr("title",b),e.show()):(c.removeClass(d),e.hide())}function k(a){a._focusoutDismissTimer||(a._focusoutDismissTimer=setTimeout(function(){a._focusoutDismissTimer&&a.set("collapsed",!0)},50))}function l(a){var b=a._focusoutDismissTimer;b&&(clearTimeout(b),a._focusoutDismissTimer=null)}function m(a){this.set("value",a.newVal,{data:{causedByTimer:1}})}function n(a){var b,c,d,e,f,g=this,h=[],i=g.get("menu");if(a=g.normalizeData(a),i.removeChildren(!0),(e=i.get("highlightedItem"))&&e.set("highlighted",!1),a&&a.length){for(f=0;f<a.length;f++)b=a[f],i.addChild(b);if(h=i.get("children"),c=g.getValueForAutocomplete(),g.get("highlightMatchItem"))for(f=0;f<h.length;f++)if(h[f].get("textContent")===c){h[f].set("highlighted",!0),d=!0;break}if(!d&&g.get("autoHighlightFirst"))for(f=0;f<h.length;f++)if(!h[f].get("disabled")){h[f].set("highlighted",!0);break}g.set("collapsed",!1),g.fire("afterRenderData")}else g.set("collapsed",!0)}var o=b("node"),p=b("component/control"),q=b("./render");b("menu");var r,s=o.KeyCode;return r=p.extend([],{initializer:function(){this.publish("afterRenderData",{bubbles:!1})},_savedValue:null,normalizeData:function(b){var c,d,e,f,g=this;if(b&&b.length){for(b=b.slice(0,g.get("maxItemCount")),c=g.get("format")?g.get("format").call(g,g.getValueForAutocomplete(),b):[],e=0;e<b.length;e++)d=b[e],f=c[e]=a.mix({content:d,textContent:d,value:d},c[e]);return c}return c},bindUI:function(){var a=this,b=a.get("input");b.on("valuechange",m,a),a.on("click",i,a),a.get("menu").onRendered(function(b){h(a,b)})},destructor:function(){this.get("menu").destroy()},getValueForAutocomplete:function(){return this.get("value")},setValueFromAutocomplete:function(a,b){this.set("value",a,b)},_onSetValue:function(a,b){var c,d=this;if(b.causedByTimer){if(c=d.getValueForAutocomplete(),void 0===c)return void d.set("collapsed",!0);d._savedValue=c,d.sendRequest(c)}else d.get("input").val(a)},handleFocusInternal:function(){var a,b=this;b.get("invalidEl")&&j(b,!1),(a=b.get("placeholderEl"))&&a.hide()},handleBlurInternal:function(a){var b=this,c=b.get("placeholderEl");b.callSuper(a),k(b),b.get("invalidEl")&&b.validate(function(a,c){a?b.get("focused")||c!==b.get("value")||j(b,a):j(b,!1)}),c&&!b.get("value")&&c.show()},handleMouseDownInternal:function(a){var b,c,d=this;d.callSuper(a),b=a.target,c=d.get("trigger"),c&&(c[0]===b||c.contains(b))&&(d.get("collapsed")?(d.focus(),d.sendRequest("")):d.set("collapsed",!0),a.preventDefault())},handleKeyDownInternal:function(b){var d,e,f,g,h=this,i=b.keyCode,j=h.get("menu");if(e=h.get("input"),d=h.get("updateInputOnDownUp"),j.get("visible")){if(f=j.get("highlightedItem"),d&&f){var k=j.get("children");if(i===s.DOWN&&f===c(k.concat().reverse())||i===s.UP&&f===c(k))return h.setValueFromAutocomplete(h._savedValue),f.set("highlighted",!1),!0}return g=j.handleKeyDownInternal(b),f=j.get("highlightedItem"),i===s.ESC?(h.set("collapsed",!0),d&&h.setValueFromAutocomplete(h._savedValue),!0):(d&&a.inArray(i,[s.DOWN,s.UP])&&h.setValueFromAutocomplete(f.get("textContent")),i===s.TAB&&f&&(f.handleClickInternal(b),h.get("multiple"))?!0:g)}if(i===s.DOWN||i===s.UP){var l=h.getValueForAutocomplete();if(void 0!==l)return h.sendRequest(l),!0}return void 0},validate:function(a){var b=this,c=b.get("validator"),d=b.getValueForAutocomplete();c?c(d,function(b){a(b,d)}):a(!1,d)},sendRequest:function(a){var b=this,c=b.get("dataSource");c.fetchData(a,n,b)},_onSetCollapsed:function(a){var b=this,c=b.$el,d=b.get("menu");if(a)d.hide();else if(l(b),!d.get("visible")){if(b.get("matchElWidth")){d.render();var e=d.get("el"),f=(parseInt(e.css("borderLeftWidth"))||0)+(parseInt(e.css("borderRightWidth"))||0);d.set("width",c[0].offsetWidth-f)}d.show()}}},{ATTRS:{input:{},value:{value:"",sync:0,view:1},trigger:{},placeholder:{view:1},placeholderEl:{},validator:{},invalidEl:{},allowTextSelection:{value:!0},hasTrigger:{value:!0,view:1},menu:{value:{},getter:function(a){return a.isControl||(a.xclass=a.xclass||"popupmenu",a=this.createComponent(a),this.setInternal("menu",a)),a},setter:function(b){if(b.isControl){b.setInternal("parent",this);var c={node:this.$el,points:["bl","tl"],overflow:{adjustX:1,adjustY:1}};a.mix(b.get("align"),c,!1)}}},collapsed:{view:1,value:!0},dataSource:{},maxItemCount:{value:99999},matchElWidth:{value:!0},format:{},updateInputOnDownUp:{value:!0},autoHighlightFirst:{},highlightMatchItem:{value:!0},xrender:{value:q}},xclass:"combobox"})}),KISSY.add("combobox/cursor",["node"],function(a,b){function c(b){var c=d;return c||(c=h(i)),"textarea"===String(b[0].type.toLowerCase())?c.css("width",b.css("width")):c.css("width",9999),a.each(k,function(a){c.css(a,b.css(a))}),d||c.insertBefore(b[0].ownerDocument.body.firstChild),d=c,c}var d,e,f,g=b("node"),h=g.all,i='<div style="z-index:-9999;overflow:hidden;position: fixed;left:-9999px;top:-9999px;opacity:0;white-space:pre-wrap;word-wrap:break-word;"></div>',j="<span>x</span>",k=["paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight","borderLeftStyle","borderTopStyle","borderBottomStyle","borderRightStyle","borderLeftWidth","borderTopWidth","borderBottomWidth","borderRightWidth","line-height","outline","height","fontFamily","fontSize","fontWeight","fontVariant","fontStyle"];return f=function(){var b=document,c=h("<input>");c.css({width:1,position:"absolute",left:-9999,top:-9999}),c.val("123456789"),c.appendTo(b.body),c[0].focus(),e=c[0].scrollLeft>0,c.remove(),f=a.noop},e=!1,function(b){var d=h(b);b=d[0];var f,g,i,k,l,m,n=b.ownerDocument,o=h(n),p=b.scrollTop,q=b.scrollLeft;return n.selection?(g=n.selection.createRange(),{left:g.boundingLeft+q+o.scrollLeft(),top:g.boundingTop+p+g.boundingHeight+o.scrollTop()}):(f=d.offset(),e||"textarea"===b.type?(i=c(d),k=b.selectionStart,i.html(a.escapeHtml(b.value.substring(0,k-1))+j),l=f,i.offset(l),m=i.last(),l=m.offset(),l.top+=m.height(),k>0&&(l.left+=m.width()),l.top-=p,l.left-=q,l):(f.top+=b.offsetHeight,f))}}),KISSY.add("combobox/multi-value-combobox",["./cursor","./control"],function(a,b){function c(a,b){return b&&-1!==a.indexOf(b)}function d(a){a.newVal&&a.target===this.get("menu")&&this.alignWithCursor()}function e(a){var b,d,e=a.get("input"),h=a.get("value"),i=[],j=[],k=a.get("literal"),l=a.get("separator"),m=a.get("separatorType"),n=!1,o=m!==f,p=e.prop("selectionStart"),q=-1;for(b=0;b<h.length;b++)d=h.charAt(b),k&&d===k&&(n=!n),n?j.push(d):(b===p&&(q=i.length),o&&g.test(d)?(j.length&&i.push(j.join("")),j=[],j.push(d)):c(l,d)?m===f?(j.push(d),j.length&&i.push(j.join("")),j=[]):(j.length&&i.push(j.join("")),j=[],j.push(d)):j.push(d));return j.length&&i.push(j.join("")),i.length||i.push(""),-1===q&&(m===f&&c(l,d)&&i.push(""),q=i.length-1),{tokens:i,cursorPosition:p,tokenIndex:q}}var f="suffix",g=/\s|\xa0/,h=b("./cursor"),i=b("./control");return i.extend({syncUI:function(){var a,b=this;b.get("alignWithCursor")&&(a=b.get("menu"),a.setInternal("align",null),a.on("beforeVisibleChange",d,this))},getValueForAutocomplete:function(){var a=this,b=e(a),d=b.tokens,g=b.tokenIndex,h=a.get("separator"),i=a.get("separatorType"),j=d[g],k=j.length-1;if(i!==f){if(!c(h,j.charAt(0)))return void 0;j=j.slice(1)}else i===f&&c(h,j.charAt(k))&&(j=j.slice(0,k));return j},setValueFromAutocomplete:function(a,b){var d,h,i=this,j=i.get("input"),k=e(i),l=k.tokens,m=Math.max(0,k.tokenIndex),n=i.get("separator"),o=i.get("separatorType"),p=l[m+1]||"",q=l[m];o!==f?(l[m]=q.charAt(0)+a,!a||p&&g.test(p.charAt(0))||(l[m]+=" ")):(l[m]=a,h=q.length-1,c(n,q.charAt(h))?l[m]+=q.charAt(h):1===n.length&&(l[m]+=n)),d=l.slice(0,m+1).join("").length,i.set("value",l.join(""),b),j.prop("selectionStart",d),j.prop("selectionEnd",d)},alignWithCursor:function(){var a,b=this,c=b.get("menu"),d=b.get("input");a=h(d),c.move(a.left,a.top)}},{ATTRS:{separator:{value:",;"},separatorType:{value:f},literal:{value:'"'},alignWithCursor:{}},xclass:"multi-value-combobox"})}),KISSY.add("combobox/filter-select",["./control"],function(a,b,c,d){function e(a,b){var c=!1;if(b)for(var d=0;d<b.length;d++)if(b[d].textContent===a)return b[d];return c}var f=b("./control");d.exports=f.extend({validate:function(a){var b=this;b.callSuper(function(c,d){c?a(c,d):b.get("dataSource").fetchData(d,function(c){var f=e(d,b.normalizeData(c));a(f?"":b.get("invalidMessage"),d,f)})})}},{ATTRS:{invalidMessage:{value:"invalid input"}}})}),KISSY.add("combobox/local-data-source",["attribute"],function(a,b){function c(b,c){var d=[],e=0;return b?(a.each(c,function(a){-1!==a.indexOf(b)&&d.push(a),e++}),d):c}var d=b("attribute");return d.extend({fetchData:function(a,b,c){var d=this.get("parse"),e=this.get("data");e=d(a,e),b.call(c,e)}},{ATTRS:{data:{value:[]},parse:{value:c}}})}),KISSY.add("combobox/remote-data-source",["io","attribute"],function(a,b){var c=b("io"),d=b("attribute");return d.extend({fetchData:function(a,b,d){var e,f=this,g=f.get("paramName"),h=f.get("parse"),i=f.get("cache"),j=f.get("allowEmpty");if(f.caches=f.caches||{},f.io&&(f.io.abort(),f.io=null),!a&&j!==!0)return b.call(d,[]);if(i&&(e=f.caches[a]))return b.call(d,e);var k=f.get("xhrCfg");return k.data=k.data||{},k.data[g]=a,k.success=function(c){h&&(c=h(a,c)),f.setInternal("data",c),i&&(f.caches[a]=c),b.call(d,c)},void(f.io=c(k))}},{ATTRS:{paramName:{value:"q"},allowEmpty:{},cache:{},parse:{},xhrCfg:{value:{}}}})}),KISSY.add("combobox",["combobox/control","combobox/multi-value-combobox","combobox/filter-select","combobox/local-data-source","combobox/remote-data-source"],function(a,b){var c=b("combobox/control"),d=b("combobox/multi-value-combobox"),e=b("combobox/filter-select"),f=b("combobox/local-data-source"),g=b("combobox/remote-data-source");return c.LocalDataSource=f,c.RemoteDataSource=g,c.FilterSelect=e,c.MultiValueComboBox=d,c}),KISSY.add("component/control/process",["base","promise"],function(a,b){function c(a){a.fire("beforeSyncUI"),a.syncUI(),a.__callPluginsMethod("pluginSyncUI"),a.fire("afterSyncUI")}var d=b("base"),e=b("promise"),f=e.Defer,g=d.prototype.__getHook,h=a.noop,i=d.extend({bindInternal:h,syncInternal:h,initializer:function(){this._renderedDefer=new f},renderUI:h,syncUI:h,bindUI:h,onRendered:function(a){return this._renderedDefer.promise.then(a)},create:function(){var a=this;return a.get("created")||(a.fire("beforeCreateDom"),a.createInternal(),a.__callPluginsMethod("pluginCreateDom"),a.fire("afterCreateDom"),a.setInternal("created",!0)),a},createInternal:function(){this.createDom()},render:function(){var a=this;return a.get("rendered")||(a.create(),a.fire("beforeRenderUI"),a.renderUI(),a.__callPluginsMethod("pluginRenderUI"),a.fire("afterRenderUI"),a.fire("beforeBindUI"),i.superclass.bindInternal.call(a),a.bindUI(),a.__callPluginsMethod("pluginBindUI"),a.fire("afterBindUI"),i.superclass.syncInternal.call(a),c(a),a.setInternal("rendered",!0)),a},sync:function(){c(this)},plug:function(a){var b,c=this,d=c.get("plugins");return c.callSuper(a),b=d[d.length-1],c.get("rendered")?(b.pluginCreateDom&&b.pluginCreateDom(c),b.pluginRenderUI&&b.pluginCreateDom(c),b.pluginBindUI&&b.pluginBindUI(c),b.pluginSyncUI&&b.pluginSyncUI(c)):c.get("created")&&b.pluginCreateDom&&b.pluginCreateDom(c),c}},{__hooks__:{createDom:g("__createDom"),renderUI:g("__renderUI"),bindUI:g("__bindUI"),syncUI:g("__syncUI")},name:"ComponentProcess",ATTRS:{rendered:{value:!1,setter:function(a){a&&this._renderedDefer.resolve(this)}},created:{value:!1}}});return i}),KISSY.add("component/control/render-xtpl",[],function(a,b,c,d){return function(a){var b,c="",e=this.config,f=this,g=e.utils;"undefined"!=typeof d&&d.kissy&&(b=d);var h=g.runBlockCommand,i=g.renderOutput,j=g.getProperty,k=g.runInlineCommand,l=g.getPropertyOrRunCommand;c+='<div id="';var m=l(f,a,{},"id",0,1);c+=i(m,!0),c+='"\n class="';var n={},o=[];o.push(""),n.params=o;var p=k(f,a,n,"getBaseCssClasses",2);c+=i(p,!0),c+="\n";var q={},r=[],s=j(f,a,"elCls",0,3);r.push(s),q.params=r,q.fn=function(a){var b="";b+="\n ";var c=l(f,a,{},".",0,4);return b+=i(c,!0),b+="  \n"},c+=h(f,a,q,"each",3),c+='\n"\n\n';var t={},u=[],v=j(f,a,"elAttrs",0,8);u.push(v),t.params=u,t.fn=function(a){var b="";b+=" \n ";var c=l(f,a,{},"xindex",0,9);b+=i(c,!0),b+='="';var d=l(f,a,{},".",0,9);return b+=i(d,!0),b+='"\n'},c+=h(f,a,t,"each",8),c+='\n\nstyle="\n';var w={},x=[],y=j(f,a,"elStyle",0,13);return x.push(y),w.params=x,w.fn=function(a){var b="";b+=" \n ";var c=l(f,a,{},"xindex",0,14);b+=i(c,!0),b+=":";var d=l(f,a,{},".",0,14);return b+=i(d,!0),b+=";\n"},c+=h(f,a,w,"each",13),c+='\n">'}}),KISSY.add("component/control/render",["node","xtemplate/runtime","./process","./render-xtpl","component/manager"],function(a,b){function c(a){return"number"==typeof a&&(a+="px"),a}function d(b,c,d){var e,f,g,h=this;for(e in c)f=c[e],"function"==typeof f?(g=f.call(h,b),void 0!==g&&d.setInternal(e,g)):"string"==typeof f?d.setInternal(e,b.one(f)):a.isArray(f)&&f[0]&&d.setInternal(e,b.all(f[0]))}function e(a){return a||(a=[""]),"string"==typeof a&&(a=a.split(/\s+/)),a}function f(a,b,c){for(var d,e="",f=0,g=c.length,h=a+b;g>f;f++)d=c[f],d=d?"-"+d:d,e+=" "+h+d;return e}function g(a){var b,c=this;a.target===c.control&&(b=c[o+a.type.slice(5).slice(0,-6)],b.call(c,a.newVal,a))}function h(){return this.config.view.getBaseCssClasses(arguments[1].params[0])}function i(){return this.config.view.getBaseCssClass(arguments[1].params[0])}var j=b("node"),k=b("xtemplate/runtime"),l=b("./process"),m=b("./render-xtpl"),n=b("component/manager"),o="_onSet",p=a.trim,q=j.all,r=a.UA,s=m,t="</div>",u=a.Env.host.document,v="HTML_PARSER";return l.extend({isRender:!0,createInternal:function(){var a=this,b=a.control.get("srcNode");b?a.decorateDom(b):a.callSuper()},beforeCreateDom:function(a){var b,d,e,f,g,h,i,j=this,k=j.control,l=k.get("elAttrs"),m=k.get("elCls"),n=k.getAttrs(),o=k.get("elStyle"),p=k.get("elCls");for(g in n)h=n[g],h.view&&(a[g]=k.get(g));b=a.width,d=a.height,e=a.visible,i=a.zIndex,b&&(o.width=c(b)),d&&(o.height=c(d)),i&&(o["z-index"]=i),e||p.push(j.getBaseCssClasses("hidden")),(f=k.get("disabled"))&&(m.push(j.getBaseCssClasses("disabled")),l["aria-disabled"]="true"),k.get("highlighted")&&m.push(j.getBaseCssClasses("hover")),k.get("focusable")&&(r.ieMode<9&&(l.hideFocus="true"),l.tabindex=f?"-1":"0")},createDom:function(){var a=this;a.beforeCreateDom(a.renderData={},a.childrenElSelectors={},a.renderCommands={getBaseCssClasses:h,getBaseCssClass:i});var b,c=a.control;b=a.renderTpl(s)+a.renderTpl(a.get("contentTpl"))+t,c.setInternal("el",a.$el=q(b)),a.el=a.$el[0],a.fillChildrenElsBySelectors()},decorateDom:function(a){var b=this,c=b.control;a.attr("id")||a.attr("id",c.get("id")),d.call(b,a,b.constructor.HTML_PARSER,c),c.setInternal("el",b.$el=a),b.el=a[0]},renderUI:function(){var a=this,b=a.control,c=a.$el;if(!b.get("srcNode")){var d=b.get("render"),e=b.get("elBefore");e?c.insertBefore(e,void 0):d?c.appendTo(d,void 0):c.appendTo(u.body,void 0)}},bindUI:function(){var b,c,d=this,e=d.control,f=e.getAttrs();for(b in f){c=f[b];var h=a.ucfirst(b),i=d[o+h];c.view&&i&&e.on("after"+h+"Change",g,d)}},destructor:function(){this.$el&&this.$el.remove()},$:function(a){return this.$el.all(a)},fillChildrenElsBySelectors:function(b){var c,d,e=this,f=e.$el,g=e.control;b=b||e.childrenElSelectors;for(c in b)d=b[c],"function"==typeof d?g.setInternal(c,d(f)):g.setInternal(c,e.$(a.substitute(d,e.renderData))),delete b[c]},renderTpl:function(a,b,c){var d=this;b=b||d.renderData,c=c||d.renderCommands;var e=d.get("xtemplate");return new e(a,{control:d.control,view:d,commands:c}).render(b)},getComponentConstructorByNode:function(a,b){var c=b[0].className;return c?(c=c.replace(new RegExp("\\b"+a,"ig"),""),n.getConstructorByXClass(c)):null},getComponentCssClasses:function(){var a=this;if(a.componentCssClasses)return a.componentCssClasses;for(var b,c=a.control,d=c.constructor,e=[];d&&!d.prototype.hasOwnProperty("isControl");)b=d.xclass,b&&e.push(b),d=d.superclass&&d.superclass.constructor;return a.componentCssClasses=e,e},getBaseCssClasses:function(a){a=e(a);for(var b=this.getComponentCssClasses(),c=0,d=this.get("control"),g="",h=b.length,i=d.get("prefixCls");h>c;c++)g+=f(i,b[c],a);return p(g)},getBaseCssClass:function(a){return p(f(this.control.get("prefixCls"),this.getComponentCssClasses()[0],e(a)))},getKeyEventTarget:function(){return this.$el},_onSetWidth:function(a){this.$el.width(a)},_onSetHeight:function(a){this.$el.height(a)},_onSetContent:function(a){var b=this.$el;b.html(a),this.get("allowTextSelection")||b.unselectable()},_onSetVisible:function(a){var b=this,c=b.$el,d=b.getBaseCssClasses("hidden");a?c.removeClass(d):c.addClass(d)},_onSetHighlighted:function(a){var b=this,c=b.getBaseCssClasses("hover"),d=b.$el;d[a?"addClass":"removeClass"](c)},_onSetDisabled:function(a){var b=this,c=b.control,d=b.getBaseCssClasses("disabled"),e=b.$el;e[a?"addClass":"removeClass"](d).attr("aria-disabled",a),c.get("focusable")&&b.getKeyEventTarget().attr("tabindex",a?-1:0)},_onSetActive:function(a){var b=this,c=b.getBaseCssClasses("active");b.$el[a?"addClass":"removeClass"](c).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=this,c=b.$el,d=b.getBaseCssClasses("focused");c[a?"addClass":"removeClass"](d)},_onSetZIndex:function(a){this.$el.css("z-index",a)}},{__hooks__:{decorateDom:l.prototype.__getHook("__decorateDom"),beforeCreateDom:l.prototype.__getHook("__beforeCreateDom")},extend:function w(b){var c,d=this,e={};return c=l.extend.apply(d,arguments),c[v]=c[v]||{},a.isArray(b)&&(a.each(b.concat(c),function(b){b&&a.each(b.HTML_PARSER,function(a,b){e[b]=a})}),c[v]=e),a.mix(c[v],d[v],!1),c.extend=w,c},ATTRS:{control:{setter:function(a){this.control=a}},xtemplate:{value:k},contentTpl:{value:function(a){return a.get("content")||""}}},HTML_PARSER:{id:function(a){var b=a[0].id;return b?b:void 0},content:function(a){return a.html()},disabled:function(a){return a.hasClass(this.getBaseCssClass("disabled"))}},name:"render"})}),KISSY.add("component/control",["node","./control/process","component/manager","./control/render"],function(a,b){function c(){var a,b=this;do a=b.ATTRS,b=b.superclass;while(!a||!a.xrender);return a.xrender.value}var d=b("node"),e=b("./control/process"),f=b("component/manager"),g=b("./control/render"),h=a.UA.ieMode,i=a.Features,j=d.Gesture,k=i.isTouchGestureSupported(),l=(i.isTouchEventSupported(),e.extend({isControl:!0,createDom:function(){var a,b=this,c=b.get("xrender"),d=b.get("view"),e=b.get("id");d?d.set("control",b):b.set("view",this.view=d=new c({control:b})),d.create(),a=d.getKeyEventTarget(),b.get("allowTextSelection")||a.unselectable(),f.addComponent(e,b)},renderUI:function(){this.view.render()},bindUI:function(){var a=this,b=a.view.getKeyEventTarget();a.get("focusable")&&b.on("focus",a.handleFocus,a).on("blur",a.handleBlur,a).on("keydown",a.handleKeydown,a),a.get("handleMouseEvents")&&(b=a.$el,b.on("mouseenter",a.handleMouseEnter,a).on("mouseleave",a.handleMouseLeave,a).on("contextmenu",a.handleContextMenu,a),b.on(j.start,a.handleMouseDown,a).on(j.end,a.handleMouseUp,a).on(j.tap,a.handleClick,a),j.cancel&&b.on(j.cancel,a.handleMouseUp,a),9>h&&b.on("dblclick",a.handleDblClick,a))},sync:function(){var a=this;a.fire("beforeSyncUI"),a.syncUI(),a.view.sync(),a.__callPluginsMethod("pluginSyncUI"),a.fire("afterSyncUI")},createComponent:function(a,b){return f.createComponent(a,b||this)},_onSetFocused:function(a){var b=this.view.getKeyEventTarget()[0];a?b.focus():b.ownerDocument.activeElement===b&&b.ownerDocument.body.focus()},_onSetX:function(a){this.$el.offset({left:a})},_onSetY:function(a){this.$el.offset({top:a})},_onSetVisible:function(a){this.fire(a?"show":"hide")},show:function(){var a=this;return a.render(),a.set("visible",!0),a},hide:function(){var a=this;return a.set("visible",!1),a},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},move:function(a,b){this.set({x:a,y:b})},handleDblClick:function(a){this.get("disabled")||this.handleDblClickInternal(a)},handleDblClickInternal:function(a){this.handleClickInternal(a)},handleMouseEnter:function(a){this.get("disabled")||this.handleMouseEnterInternal(a)},handleMouseEnterInternal:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.get("disabled")||this.handleMouseLeaveInternal(a)},handleMouseLeaveInternal:function(a){var b=this;b.set("active",!1),b.set("highlighted",!a)},handleMouseDown:function(a){this.get("disabled")||this.handleMouseDownInternal(a)},handleMouseDownInternal:function(a){var b,c=this,d=1===a.which;(d||k)&&(c.get("activeable")&&c.set("active",!0),c.get("focusable")&&c.focus(),c.get("allowTextSelection")||-1===a.type.indexOf("mouse")||(b=a.target.nodeName,b=b&&b.toLowerCase(),"input"!==b&&"textarea"!==b&&"button"!==b&&a.preventDefault()))},handleMouseUp:function(a){this.get("disabled")||this.handleMouseUpInternal(a)},handleMouseUpInternal:function(a){var b=this;b.get("active")&&(1===a.which||k)&&b.set("active",!1)},handleContextMenu:function(a){this.get("disabled")||this.handleContextMenuInternal(a)},handleContextMenuInternal:function(){},handleFocus:function(){this.get("disabled")||this.handleFocusInternal()},handleFocusInternal:function(){this.focus(),this.fire("focus")},handleBlur:function(){this.get("disabled")||this.handleBlurInternal()},handleBlurInternal:function(){this.blur(),this.fire("blur")},handleKeydown:function(a){var b=this;return!this.get("disabled")&&b.handleKeyDownInternal(a)?(a.halt(),!0):void 0},handleKeyDownInternal:function(a){return a.keyCode===d.KeyCode.ENTER?this.handleClickInternal(a):void 0},handleClick:function(a){this.get("disabled")||this.handleClickInternal(a)},handleClickInternal:function(){var a=this;a.get("focusable")&&a.focus()},destructor:function(){var a=this;f.removeComponent(a.get("id")),a.view?a.view.destroy():a.get("srcNode")&&a.get("srcNode").remove()}},{name:"control",ATTRS:{id:{view:1,valueFn:function(){return a.guid("ks-component")}},content:{view:1,value:""},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(a){return"string"==typeof a&&(a=a.split(/\s+/)),a||[]}},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{},el:{setter:function(a){this.$el=a,this.el=a[0]}},x:{},y:{},xy:{setter:function(b){var c=this,d=a.makeArray(b);return d.length&&(void 0!==d[0]&&c.set("x",d[0]),void 0!==d[1]&&c.set("y",d[1])),b},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},render:{},visible:{sync:0,value:!0,view:1},srcNode:{setter:function(a){return d.all(a)}},handleMouseEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},prefixCls:{view:1,value:a.config("component/prefixCls")||"ks-"},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b),a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:g},view:{setter:function(a){this.view=a}}}}));return l.getDefaultRender=c,l.extend=function m(){var b,d,g=a.makeArray(arguments),h=this,i=g.length,j=g[i-1];return(b=j.xclass)&&(j.name=b),d=e.extend.apply(h,g),b&&f.setConstructorByXClass(b,d),d.extend=m,d.getDefaultRender=c,d},l}),KISSY.add("component/manager",[],function(a){var b,c=0,d={},e={};
return b={__instances:e,addComponent:function(a,b){e[a]=b},removeComponent:function(a){delete e[a]},getComponent:function(a){return e[a]},createComponent:function(c,d){var e,f;return c&&(!c.isControl&&d&&(c.prefixCls||(c.prefixCls=d.get("prefixCls")),!c.xclass&&c.prefixXClass&&(c.xclass=c.prefixXClass,c.xtype&&(c.xclass+="-"+c.xtype))),!c.isControl&&(f=c.xclass)&&(e=b.getConstructorByXClass(f),e||a.error("can not find class by xclass desc : "+f),c=new e(c)),c.isControl&&d&&c.setInternal("parent",d)),c},getConstructorByXClass:function(a){var b,c,e,f=a.split(/\s+/),g=-1,h=null;for(c=0;c<f.length;c++)e=d[f[c]],e&&(b=e.priority)>g&&(g=b,h=e.constructor);return h},setConstructorByXClass:function(a,b){d[a]={constructor:b,priority:c++}}}}),KISSY.add("xtemplate/runtime/scope",[],function(a){function b(a,b){this.data=a||{},this.affix=b,this.root=this}return b.prototype={isScope:1,setParent:function(a){this.parent=a,this.root=a.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(a,b){this.affix||(this.affix={}),this.affix[a]=b},setData:function(a){this.data=a},getData:function(){return this.data},mix:function(b){this.affix||(this.affix={}),a.mix(this.affix,b)},has:function(a){var b=this.data,c=this.affix;return c&&a in c?!0:"object"==typeof b&&a in b},get:function(a){var b=this.data,c=this.affix;return c&&a in c?c[a]:"object"==typeof b&&a in b?b[a]:void 0},resolve:function(a,b){"."===a&&(a="this");var c,d,e,f,g,h=a.split("."),i=this;if("root"===h[0])h.shift(),i=i.root;else if(b)for(;i&&b--;)i=i.parent;var j=0;for(c=h.length;i;){for(g=1,e=i,d=0;c>d;d++)if(f=h[d],"this"!==f)if(e===i){if(!i.has(f)){g=0;break}e=i.get(f),j=1}else{if(null==e||"object"!=typeof e||!(f in e)){g=0;break}e=e[f]}else j=1;if(g)return e&&e.isScope&&(e=e.data),"function"==typeof e&&(e=e.call(this.data)),[e];if(j)break;i=i.parent}return!1}},b}),KISSY.add("xtemplate/runtime/commands",["path","./scope"],function(a,b){var c,d=b("path"),e=b("./scope");return c={"debugger":a.noop,each:function(b,c){var d,f,g,h=c.params,i=h[0],j=h[2]||"xindex",k=h[1],l="";if(i)if(f=new e,a.isArray(i)){d=i.length;for(var m=0;d>m;m++)f.data=i[m],g=f.affix={xcount:d},g[j]=m,k&&(g[k]=i[m]),f.setParent(b),l+=c.fn(f)}else for(var n in i)f.data=i[n],g=f.affix={},g[j]=n,k&&(g[k]=i[n]),f.setParent(b),l+=c.fn(f);else c.inverse&&(l=c.inverse(b));return l},"with":function(a,b){var c=b.params,d=c[0],f="";if(d){var g=new e(d);g.setParent(a),f=b.fn(g)}else b.inverse&&(f=b.inverse(a));return f},"if":function(a,b){var c=b.params,d=c[0],e="";return d?b.fn&&(e=b.fn(a)):b.inverse&&(e=b.inverse(a)),e},set:function(a,b){return a.mix(b.hash),""},include:function(b,c){var f=c.params;if(!f||1!==f.length)return a.error("include must has one param"),"";if(c.hash){var g=new e(c.hash);g.setParent(b),b=g}var h=this.config.name,i=f[0];if("."===i.charAt(0)){if("unspecified"===h)return a.error("parent template does not have name for relative sub tpl name: "+i),"";i=d.resolve(h,"../",i)}var j=this.config.loader.call(this,i);return c=a.merge(this.config),c.name=i,c.commands=this.config.commands,c.macros=this.config.macros,this.invokeEngine(j,b,c)},macro:function(b,c){var d=c.params,f=d[0],g=d.slice(1),h=this.config.macros;if(!c.fn){var i={},j=h[f];j||a.error("can not find macro:"+name),a.each(j.paramNames,function(a,b){i[a]=g[b]});var k=new e(i);return j.fn.call(this,k)}return h[f]||(h[f]={paramNames:g,fn:c.fn}),""},parse:function(a,b){return c.include.call(this,new e,b)}},c["debugger"]=function(){a.globalEval("debugger")},c}),KISSY.add("xtemplate/runtime",["./runtime/commands","./runtime/scope"],function(a,b){function c(a){k.info(a)}function d(a,b){for(var c=b.split("."),d=a,e=c.length,f=0;e>f&&(d=d[c[f]],d);f++);return d}function e(b,c,e,f,g,h){var i,j=b.config,k=j.commands,l=d(k,f);if(l){try{i=l.call(b,c,e)}catch(m){a.error(m.message+': "'+f+'" at line '+g)}return{find:!0,value:i}}return h&&a.error("can not find command: "+f+'" at line '+g),{find:!1}}function f(b,d,e,f,g){var h,i=b.config,j=i.silent?c:a.error,k=d.resolve(e,f);return k===!1?j('can not find property: "'+e+'" at line '+g,"warn"):h=k[0],h}function g(b,c){var d=this;d.tpl=b,c=a.merge(m,c),c.commands=a.merge(c.commands,h),c.utils=l,c.macros=c.macros||{},this.config=c}var h=b("./runtime/commands"),i=b("./runtime/scope"),j=a.escapeHtml,k=a.getLogger("s/xtemplate"),l={runBlockCommand:function(b,e,f,g,h){var i=b.config,j=i.silent?c:a.error,k=i.commands,l=d(k,g);if(!l){if(f.params||f.hash)return a.error("can not find command: "+g+'" at line '+h),"";var m=e.resolve(g);m===!1?(j('can not find property: "'+g+'" at line '+h),m=""):m=m[0],l=k["if"],a.isArray(m)?l=k.each:"object"==typeof m&&(l=k["with"]),f.params=[m]}var n;try{n=l.call(b,e,f)}catch(o){a.error(o.message+': "'+g+'" at line '+h)}return n},renderOutput:function(a,b){return void 0===a&&(a=""),b&&a?j(a):a},getProperty:function(a,b,c,d,e){return f(a,b,c,d,e)},runInlineCommand:function(a,b,c,d,f){var g,h="";return g=e(a,b,c,d,f),g.find&&(h=g.value),h},getPropertyOrRunCommand:function(a,b,c,d,g,h){var i,j,k=c.hash||c.params;return j=e(a,b,c,d,h,k),j.find?i=j.value:k||(i=f(a,b,d,g,h)),i}},m={silent:!0,name:"unspecified",loader:function(b){var c=a.require(b);return c||a.error('template "'+b+'" does not exist, need to be required or used first!'),c}};return a.mix(g,{commands:h,utils:l,addCommand:function(a,b){h[a]=b},removeCommand:function(a){delete h[a]}}),g.prototype={constructor:g,invokeEngine:function(a,b,c){return new this.constructor(a,c).render(b,!0)},removeCommand:function(a){delete this.config.commands[a]},addCommand:function(a,b){this.config.commands[a]=b},render:function(b){var c=b;return c&&c.isScope||(c=new i(b)),this.tpl(c,a)}},g.Scope=i,g}),KISSY.add("menu/menu-render",["component/container"],function(a,b){var c=b("component/container");return c.getDefaultRender().extend({beforeCreateDom:function(a){a.elAttrs.role="menu"},containsElement:function(a){var b=this.$el;return b&&(b[0]===a||b.contains(a))}})}),KISSY.add("menu/control",["node","component/container","component/extension/delegate-children","./menu-render"],function(a,b){function c(a){if(a.target.isMenu){var b=this.el,c=a.newVal;b.setAttribute("aria-activedescendant",c&&c.el.id||"")}}var d=b("node"),e=b("component/container"),f=b("component/extension/delegate-children"),g=b("./menu-render"),h=d.KeyCode;return e.extend([f],{isMenu:1,_onSetHighlightedItem:function(a,b){var c;a&&b&&(c=b.prevVal)&&c.set("highlighted",!1,{data:{byPassSetHighlightedItem:1}})},_onSetVisible:function(a,b){this.callSuper(b);var c;!a&&(c=this.get("highlightedItem"))&&c.set("highlighted",!1)},bindUI:function(){var a=this;a.on("afterHighlightedItemChange",c,a)},getRootMenu:function(){return this},handleMouseEnterInternal:function(a){this.callSuper(a);var b=this.getRootMenu();b&&b._popupAutoHideTimer&&(clearTimeout(b._popupAutoHideTimer),b._popupAutoHideTimer=null),this.focus()},handleBlurInternal:function(a){this.callSuper(a);var b;(b=this.get("highlightedItem"))&&b.set("highlighted",!1)},_getNextEnabledHighlighted:function(a,b){var c=this.get("children"),d=c.length,e=a;do{var f=c[a];if(!f.get("disabled")&&f.get("visible")!==!1)return c[a];a=(a+b+d)%d}while(a!==e);return void 0},handleKeyDownInternal:function(b){var c=this,d=c.get("highlightedItem");if(d&&d.handleKeyDownInternal(b))return!0;var e=c.get("children"),f=e.length;if(0===f)return void 0;var g,i,j;switch(b.keyCode){case h.ESC:(d=c.get("highlightedItem"))&&d.set("highlighted",!1);break;case h.HOME:j=c._getNextEnabledHighlighted(0,1);break;case h.END:j=c._getNextEnabledHighlighted(f-1,-1);break;case h.UP:d?(g=a.indexOf(d,e),i=(g-1+f)%f):i=f-1,j=c._getNextEnabledHighlighted(i,-1);break;case h.DOWN:d?(g=a.indexOf(d,e),i=(g+1+f)%f):i=0,j=c._getNextEnabledHighlighted(i,1)}return j?(j.set("highlighted",!0,{data:{fromKeyboard:1}}),!0):void 0},containsElement:function(a){var b=this;if(!b.get("visible")||!b.$el)return!1;if(b.view.containsElement(a))return!0;for(var c=b.get("children"),d=0,e=c.length;e>d;d++){var f=c[d];if(f.containsElement&&f.containsElement(a))return!0}return!1}},{ATTRS:{highlightedItem:{value:null},xrender:{value:g},defaultChildCfg:{value:{xclass:"menuitem"}}},xclass:"menu"})}),KISSY.add("menu/menuitem-render",["component/control"],function(a,b){var c=b("component/control");return c.getDefaultRender().extend({beforeCreateDom:function(a){a.elAttrs.role=a.selectable?"menuitemradio":"menuitem",a.selected&&a.elCls.push(this.getBaseCssClasses("selected"))},_onSetSelected:function(a){var b=this,c=b.getBaseCssClasses("selected");b.$el[a?"addClass":"removeClass"](c)},containsElement:function(a){var b=this.$el;return b&&(b[0]===a||b.contains(a))}},{HTML_PARSER:{selectable:function(a){return a.hasClass(this.getBaseCssClass("selectable"))}}})}),KISSY.add("menu/menuitem",["component/control","./menuitem-render","node"],function(a,b){var c=b("component/control"),d=b("./menuitem-render"),e=b("node").all;return c.extend({isMenuItem:1,handleClickInternal:function(){var a=this;return a.callSuper(),a.get("selectable")&&a.set("selected",!0),a.fire("click"),!0},_onSetHighlighted:function(a,b){var c=this,d=c.get("parent");if(b&&b.byPassSetHighlightedItem||(c.get("rendered")?d.set("highlightedItem",a?c:null):a&&d.set("highlightedItem",c)),a){var f=c.$el,g=f.parent(function(a){return"visible"!==e(a).css("overflow")},d.get("el").parent());if(!g)return;f.scrollIntoView(g,{alignWithTop:!0,allowHorizontalScroll:!0,onlyScrollIfNeeded:!0})}},containsElement:function(a){return this.view.containsElement(a)}},{ATTRS:{focusable:{value:!1},handleMouseEvents:{value:!1},selectable:{view:1},value:{},selected:{view:1},xrender:{value:d}},xclass:"menuitem"})}),KISSY.add("menu/check-menuitem-xtpl",["component/extension/content-xtpl"],function(a,b,c,d){return function(a){var c,e="",f=this.config,g=this,h=f.utils;"undefined"!=typeof d&&d.kissy&&(c=d);{var i=(h.runBlockCommand,h.renderOutput),j=(h.getProperty,h.runInlineCommand);h.getPropertyOrRunCommand}e+='<div class="';var k={},l=[];l.push("checkbox"),k.params=l;var m=j(g,a,k,"getBaseCssClasses",1);e+=i(m,!0),e+='">\n</div>\n';var n={},o=[];o.push("component/extension/content-xtpl"),n.params=o,c&&(b("component/extension/content-xtpl"),n.params[0]=c.resolveByName(n.params[0]));var p=j(g,a,n,"include",3);return e+=i(p,!1)}}),KISSY.add("menu/check-menuitem-render",["./menuitem-render","component/extension/content-render","./check-menuitem-xtpl"],function(a,b){var c=b("./menuitem-render"),d=b("component/extension/content-render"),e=b("./check-menuitem-xtpl");return c.extend([d],{beforeCreateDom:function(a){a.checked&&a.elCls.push(this.getBaseCssClasses("checked"))},_onSetChecked:function(a){var b=this,c=b.getBaseCssClasses("checked");b.$el[a?"addClass":"removeClass"](c)}},{ATTRS:{contentTpl:{value:e}}})}),KISSY.add("menu/check-menuitem",["./menuitem","./check-menuitem-render"],function(a,b){var c=b("./menuitem"),d=b("./check-menuitem-render");return c.extend({handleClickInternal:function(){var a=this;return a.callSuper(),a.set("checked",!a.get("checked")),a.fire("click"),!0}},{ATTRS:{checked:{view:1},xrender:{value:d}},xclass:"check-menuitem"})}),KISSY.add("menu/submenu-xtpl",[],function(a,b,c,d){return function(a){var b,c="",e=this.config,f=this,g=e.utils;"undefined"!=typeof d&&d.kissy&&(b=d);var h=(g.runBlockCommand,g.renderOutput),i=(g.getProperty,g.runInlineCommand),j=g.getPropertyOrRunCommand;c+='<div id="ks-content-';var k=j(f,a,{},"id",0,1);c+=h(k,!0),c+='"\n     class="';var l={},m=[];m.push("content"),l.params=m;var n=i(f,a,l,"getBaseCssClasses",2);c+=h(n,!0),c+='">';var o=j(f,a,{},"content",0,2);c+=h(o,!1),c+='</div>\n<span class="';var p=j(f,a,{},"prefixCls",0,3);return c+=h(p,!0),c+='submenu-arrow">►</span>'}}),KISSY.add("menu/submenu-render",["./submenu-xtpl","./menuitem-render","component/extension/content-render"],function(a,b){var c=b("./submenu-xtpl"),d=b("./menuitem-render"),e=b("component/extension/content-render");return d.extend([e],{decorateDom:function(a){var b=this.control,c=b.get("prefixCls"),d=a.one("."+c+"popupmenu"),e=d[0].ownerDocument.body;e.insertBefore(d[0],e.firstChild);var f=this.getComponentConstructorByNode(c,d);b.setInternal("menu",new f({srcNode:d,prefixCls:c}))}},{ATTRS:{contentTpl:{value:c}}})}),KISSY.add("menu/submenu",["node","./menuitem","./submenu-render"],function(a,b){function c(a){var b=a.target,c=this;b!==c&&b.isMenuItem&&a.newVal&&(c.clearHidePopupMenuTimers(),c.get("highlighted")||(c.set("highlighted",!0),b.set("highlighted",!1),b.set("highlighted",!0)))}function d(){var b=this,c=b.get("menu"),d={node:this.$el,points:["tr","tl"],overflow:{adjustX:1,adjustY:1}};a.mix(c.get("align"),d,!1),c.show(),b.el.setAttribute("aria-haspopup",c.get("el").attr("id"))}function e(){this.get("menu").hide()}var f=b("node"),g=b("./menuitem"),h=b("./submenu-render"),i=f.KeyCode,j=.15;return g.extend({isSubMenu:1,clearShowPopupMenuTimers:function(){var a;(a=this._showTimer)&&(a.cancel(),this._showTimer=null)},clearHidePopupMenuTimers:function(){var a;(a=this._dismissTimer)&&(a.cancel(),this._dismissTimer=null)},clearSubMenuTimers:function(){this.clearHidePopupMenuTimers(),this.clearShowPopupMenuTimers()},bindUI:function(){var a=this;a.on("afterHighlightedChange",c,a)},handleMouseLeaveInternal:function(){var b=this;b.set("highlighted",!1,{data:{fromMouse:1}}),b.clearSubMenuTimers();var c=b.get("menu");c.get("visible")&&(b._dismissTimer=a.later(e,1e3*b.get("menuDelay"),!1,b))},handleMouseEnterInternal:function(){var b=this;b.set("highlighted",!0,{data:{fromMouse:1}}),b.clearSubMenuTimers();var c=b.get("menu");c.get("visible")||(b._showTimer=a.later(d,1e3*b.get("menuDelay"),!1,b))},_onSetHighlighted:function(a,b){var c=this;b&&(c.callSuper(b),b.fromMouse||(a&&!b.fromKeyboard?d.call(c):a||e.call(c)))},handleClickInternal:function(){var a=this;d.call(a),a.callSuper()},handleKeyDownInternal:function(a){var b,c,e=this,f=e.get("menu"),g=f.get("visible"),h=a.keyCode;if(g){if(!f.handleKeyDownInternal(a)){if(h!==i.LEFT)return void 0;e.set("highlighted",!1),e.set("highlighted",!0,{data:{fromKeyboard:1}})}}else{if(h!==i.RIGHT)return h===i.ENTER?e.handleClickInternal(a):void 0;d.call(e),b=f.get("children"),(c=b[0])&&c.set("highlighted",!0,{data:{fromKeyboard:1}})}return!0},containsElement:function(a){return this.get("menu").containsElement(a)},destructor:function(){var a=this,b=a.get("menu");a.clearSubMenuTimers(),b.destroy()}},{ATTRS:{menuDelay:{value:j},menu:{value:{},getter:function(a){return a.isControl||(a.xclass=a.xclass||"popupmenu",a=this.createComponent(a),this.setInternal("menu",a)),a},setter:function(a){a.isControl&&a.setInternal("parent",this)}},xrender:{value:h}},xclass:"submenu"})}),KISSY.add("menu/popupmenu-render",["component/extension/content-render","./menu-render"],function(a,b){var c=b("component/extension/content-render"),d=b("./menu-render");return d.extend([c])}),KISSY.add("menu/popupmenu",["component/extension/align","component/extension/shim","./control","./popupmenu-render"],function(a,b){var c=b("component/extension/align"),d=b("component/extension/shim"),e=b("./control"),f=b("./popupmenu-render");return e.extend([d,c],{getRootMenu:function(){var a,b=this;do a=b,b=b.get("parent");while(b&&(b.isMenuItem||b.isMenu));return a===this?null:a},handleMouseLeaveInternal:function(a){if(this.callSuper(a),this.get("autoHideOnMouseLeave")){var b=this.getRootMenu();b&&(clearTimeout(b._popupAutoHideTimer),b._popupAutoHideTimer=setTimeout(function(){var a;(a=b.get("highlightedItem"))&&a.set("highlighted",!1)},1e3*this.get("parent").get("menuDelay")))}},isPopupMenu:1,handleBlurInternal:function(a){var b=this;b.callSuper(a),b.hide()}},{ATTRS:{focusable:{value:!1},autoHideOnMouseLeave:{},contentEl:{},visible:{value:!1},xrender:{value:f}},xclass:"popupmenu"})}),KISSY.add("menu",["menu/control","menu/menuitem","menu/check-menuitem","menu/submenu","menu/popupmenu"],function(a,b){var c=b("menu/control"),d=b("menu/menuitem"),e=b("menu/check-menuitem"),f=b("menu/submenu"),g=b("menu/popupmenu");return c.Item=d,c.CheckItem=e,c.SubMenu=f,c.PopupMenu=g,c}),KISSY.add("component/container/render",["component/control","component/manager"],function(a,b){var c=b("component/control"),d=b("component/manager");return c.getDefaultRender().extend([],{decorateDom:function(){var b=this,c=b.getChildrenContainerEl(),e=b.control,f=e.get("defaultChildCfg"),g=f.prefixCls,h=f.xclass,i=[],j=c.children();j.each(function(c){var e=b.getComponentConstructorByNode(g,c)||h&&d.getConstructorByXClass(h);e&&i.push(new e(a.merge(f,{srcNode:c})))}),e.set("children",i)},getChildrenContainerEl:function(){return this.$el}},{name:"ContainerRender"})}),KISSY.add("component/container",["component/control","./container/render"],function(a,b){function c(a){var b=this;if(a.target===b){var c=a.component,d=b.get("children"),e=a.index;d.splice(e,0,c),d=b.get("children"),c=d[e],c.setInternal("parent",b),b.get("rendered")&&b.renderChild(e),b.fire("afterAddChild",{component:c,index:e})}}function d(a){var b=this;if(a.target===b){var c,d,e=a.component,f=a.destroy,g=b.get("children"),h=a.index;-1!==h&&g.splice(h,1),e.setInternal("parent",null),f?e.destroy&&e.destroy():e.get&&(d=e.el)&&(c=d.parentNode)&&c.removeChild(d),b.fire("afterRemoveChild",{component:e,index:h})}}var e=b("component/control"),f=b("./container/render");return e.extend({isContainer:!0,initializer:function(){var a=this,b=a.get("prefixCls"),e=a.get("defaultChildCfg");a.publish("beforeAddChild",{defaultFn:c}),a.publish("beforeRemoveChild",{defaultFn:d}),e.prefixCls=e.prefixCls||b},createDom:function(){this.createChildren()},renderUI:function(){this.renderChildren()},renderChildren:function(){var a,b=this,c=b.get("children");for(a=0;a<c.length;a++)b.renderChild(a)},createChildren:function(){var a,b=this,c=b.get("children");for(a=0;a<c.length;a++)b.createChild(a)},addChild:function(a,b){var c=this,d=c.get("children");void 0===b&&(b=d.length),c.fire("beforeAddChild",{component:a,index:b})},renderChild:function(a){var b=this,c=b.get("children");b.createChild(a).render(),b.fire("afterRenderChild",{component:c[a],index:a})},createChild:function(a){var b,c,d,e,f,g=this,h=g.get("children");return b=h[a],f=g.view.getChildrenContainerEl(),d=f[0],c=d.children[a]||null,b.get("rendered")?(e=b.el,e.parentNode!==d&&d.insertBefore(e,c)):(c?b.set("elBefore",c):b.set("render",f),b.create()),g.fire("afterCreateChild",{component:b,index:a}),b},removeChild:function(b,c){void 0===c&&(c=!0),this.fire("beforeRemoveChild",{component:b,index:a.indexOf(b,this.get("children")),destroy:c})},removeChildren:function(a){var b,c=this,d=[].concat(c.get("children"));for(b=0;b<d.length;b++)c.removeChild(d[b],a);return c},getChildAt:function(a){var b=this.get("children");return b[a]||null},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy&&b[a].destroy()}},{ATTRS:{children:{value:[],getter:function(b){var c,d,e=null,f=this;for(c=0;c<b.length;c++)d=b[c],d.isControl||(e=e||f.get("defaultChildCfg"),a.mix(d,e,!1),b[c]=this.createComponent(d));return b},setter:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.isControl&&c.setInternal("parent",this)}},defaultChildCfg:{value:{}},xrender:{value:f}},name:"container"})}),KISSY.add("component/extension/delegate-children",["node","component/manager"],function(a,b){function c(a){if(a.target===this){var b=a.component,c=b.$el;c.addClass(this.__childClsTag)}}function d(a){if(a.target===this){var b=a.component,c=b.$el;c&&c.removeClass(this.__childClsTag)}}function e(){var b=this;b.__childClsTag=a.guid("ks-component-child"),b.on("afterRenderChild",c,b).on("afterRemoveChild",d,b)}{var f=b("node"),g=b("component/manager"),h=a.UA,i=h.ieMode,j=a.Features,k=f.Gesture;j.isTouchEventSupported()}return a.augment(e,{handleChildrenEvents:function(b){if(!this.get("disabled")){var c=this.getOwnerControl(b);if(c&&!c.get("disabled"))switch(b.stopPropagation(),b.type){case k.start:c.handleMouseDown(b);break;case k.end:c.handleMouseUp(b);break;case k.tap:c.handleClick(b);break;case"mouseenter":c.handleMouseEnter(b);break;case"mouseleave":c.handleMouseLeave(b);break;case"contextmenu":c.handleContextMenu(b);break;case"dblclick":c.handleDblClick(b);break;default:a.error(b.type+" unhandled!")}}},__bindUI:function(){var a=this,b=k.start+" "+k.end+" "+k.tap;k.cancel&&(b+=" "+k.cancel),b+=" mouseenter mouseleave contextmenu "+(i&&9>i?"dblclick ":""),a.$el.delegate(b,"."+a.__childClsTag,a.handleChildrenEvents,a)},getOwnerControl:function(a){return g.getComponent(a.currentTarget.id)}}),e}),KISSY.add("component/extension/content-render",["component/extension/content-xtpl"],function(a,b){function c(a){var b=a.control,c=b.get("contentEl");a.$contentEl=b.$contentEl=c,a.contentEl=b.contentEl=c[0]}function d(){}var e=b("component/extension/content-xtpl");return d.prototype={__beforeCreateDom:function(b,c){a.mix(c,{contentEl:"#ks-content-{id}"})},__createDom:function(){c(this)},__decorateDom:function(){c(this)},getChildrenContainerEl:function(){return this.control.get("contentEl")},_onSetContent:function(a){var b=this.control,c=b.$contentEl;c.html(a),b.get("allowTextSelection")||c.unselectable()}},a.mix(d,{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{content:function(a){return a.one("."+this.getBaseCssClass("content")).html()},contentEl:function(a){return a.one("."+this.getBaseCssClass("content"))}}}),d}),KISSY.add("component/extension/content-xtpl",[],function(a,b,c,d){return function(a){var b,c="",e=this.config,f=this,g=e.utils;"undefined"!=typeof d&&d.kissy&&(b=d);var h=(g.runBlockCommand,g.renderOutput),i=(g.getProperty,g.runInlineCommand),j=g.getPropertyOrRunCommand;c+='<div id="ks-content-';var k=j(f,a,{},"id",0,1);c+=h(k,!0),c+='"\n           class="';var l={},m=[];m.push("content"),l.params=m;var n=i(f,a,l,"getBaseCssClasses",2);c+=h(n,!0),c+='">';var o=j(f,a,{},"content",0,2);return c+=h(o,!1),c+="</div>"}}),KISSY.add("component/extension/align",["node"],function(a,b){function c(a){var b,c=a.ownerDocument,d=c.body,e=s(a).css("position"),f="fixed"===e||"absolute"===e;if(!f)return"html"===a.nodeName.toLowerCase()?null:a.parentNode;for(b=a.parentNode;b&&b!==d;b=b.parentNode)if(e=s(b).css("position"),"static"!==e)return b;return null}function d(a){var b,d,e,f,g={left:0,right:1/0,top:0,bottom:1/0},h=a.ownerDocument,i=s(h).getWindow(),j=h.body,k=h.documentElement;for(b=a;b=c(b);)if((!t.ie||0!==b.clientWidth)&&b!==j&&b!==k&&"visible"!==s(b).css("overflow")){var l=s(b).offset();l.left+=b.clientLeft,l.top+=b.clientTop,g.top=Math.max(g.top,l.top),g.right=Math.min(g.right,l.left+b.clientWidth),g.bottom=Math.min(g.bottom,l.top+b.clientHeight),g.left=Math.max(g.left,l.left)}return d=i.scrollLeft(),e=i.scrollTop(),g.left=Math.max(g.left,d),g.top=Math.max(g.top,e),f={width:i.width(),height:i.height()},g.right=Math.min(g.right,d+f.width),g.bottom=Math.min(g.bottom,e+f.height),g.top>=0&&g.left>=0&&g.bottom>g.top&&g.right>g.left?g:null}function e(a,b,c,d){var e,f,g,h;return e={left:a.left,top:a.top},g=m(b,c[0]),h=m(a,c[1]),f=[h.left-g.left,h.top-g.top],{left:e.left-f[0]+ +d[0],top:e.top-f[1]+ +d[1]}}function f(a,b,c){return a.left<c.left||a.left+b.width>c.right}function g(a,b,c){return a.top<c.top||a.top+b.height>c.bottom}function h(b,c,d,e){var f=a.clone(b),g={width:c.width,height:c.height};return e.adjustX&&f.left<d.left&&(f.left=d.left),e.resizeWidth&&f.left>=d.left&&f.left+g.width>d.right&&(g.width-=f.left+g.width-d.right),e.adjustX&&f.left+g.width>d.right&&(f.left=Math.max(d.right-g.width,d.left)),e.adjustY&&f.top<d.top&&(f.top=d.top),e.resizeHeight&&f.top>=d.top&&f.top+g.height>d.bottom&&(g.height-=f.top+g.height-d.bottom),e.adjustY&&f.top+g.height>d.bottom&&(f.top=Math.max(d.bottom-g.height,d.top)),a.mix(f,g)}function i(b,c,d){var e=[];return a.each(b,function(a){e.push(a.replace(c,function(a){return d[a]}))}),e}function j(a,b){return a[b]=-a[b],a}function k(){}function l(b){var c,d,e,f=b[0];if(a.isWindow(f)){var g=s(f).getWindow();c={left:g.scrollLeft(),top:g.scrollTop()},d=g.width(),e=g.height()}else c=b.offset(),d=b.outerWidth(),e=b.outerHeight();return c.width=d,c.height=e,c}function m(a,b){var c,d,e=b.charAt(0),f=b.charAt(1),g=a.width,h=a.height;return c=a.left,d=a.top,"c"===e?d+=h/2:"b"===e&&(d+=h),"c"===f?c+=g/2:"r"===f&&(c+=g),{left:c,top:d}}function n(a){a.target===this&&a.newVal&&p.call(this)}function o(){this.get("visible")&&p.call(this)}function p(){this._onSetAlign(this.get("align"))}var q=b("node"),r=a.Env.host,s=q.all,t=a.UA;return k.__getOffsetParent=c,k.__getVisibleRectForElement=d,k.ATTRS={align:{value:{}}},k.prototype={__bindUI:function(){var a=this;a.on("beforeVisibleChange",n,a),a.$el.getWindow().on("resize",o,a)},_onSetAlign:function(a){a&&a.points&&this.align(a.node,a.points,a.offset,a.overflow)},align:function(b,c,k,m){b=q.one(b||r),k=k&&[].concat(k)||[0,0],m=m||{};var n=this,o=n.$el,p=0,s=d(o[0]),t=l(o),u=l(b),v=e(t,u,c,k),w=a.merge(t,v);if(s&&(m.adjustX||m.adjustY)){f(v,t,s)&&(p=1,c=i(c,/[lr]/gi,{l:"r",r:"l"}),k=j(k,0)),g(v,t,s)&&(p=1,c=i(c,/[tb]/gi,{t:"b",b:"t"}),k=j(k,1)),p&&(v=e(t,u,c,k),a.mix(w,v));var x={};x.adjustX=m.adjustX&&f(v,t,s),x.adjustY=m.adjustY&&g(v,t,s),(x.adjustX||x.adjustY)&&(w=h(v,t,s,x))}return n.set({x:w.left,y:w.top},{force:1}),w.width!==t.width&&n.set("width",o.width()+w.width-t.width),w.height!==t.height&&n.set("height",o.height()+w.height-t.height),n},center:function(a){var b=this;return b.set("align",{node:a,points:["cc","cc"],offset:[0,0]}),b},__destructor:function(){var a=this;a.$el&&a.$el.getWindow().detach("resize",o,a)}},k}),KISSY.add("component/extension/shim",[],function(a){function b(){}var c=6===a.UA.ie,d='<iframe style="position: absolute;border: none;width: '+(c?"expression(this.parentNode.clientWidth)":"100%")+";top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: "+(c?"expression(this.parentNode.clientHeight)":"100%")+';"/>';return b.ATTRS={shim:{value:c}},b.prototype.__createDom=function(){this.get("shim")&&this.get("el").prepend(d)},b}),KISSY.add("overlay/extension/loading",["node"],function(a,b){function c(){}var d=b("node");return c.prototype={loading:function(){var a=this;a._loadingExtEl||(a._loadingExtEl=new d('<div class="'+a.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>').appendTo(a.$el)),a._loadingExtEl.show()},unloading:function(){var a=this._loadingExtEl;a&&a.hide()}},c}),KISSY.add("overlay/extension/mask",["node"],function(a,b){function c(){return l?"expression(KISSY.DOM.docWidth())":"100%"}function d(){return l?"expression(KISSY.DOM.docHeight())":"100%"}function e(a,b){var e=a.view.getBaseCssClasses("mask"),f=m('<div  style="width:'+c()+";left:0;top:0;height:"+d()+";position:"+(l?"absolute":"fixed")+';" class="'+e+" "+b+'">'+(l?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return f.unselectable(),f.on("mousedown",function(a){a.preventDefault()}),f}function f(){}function g(a,b){var c=a.get("maskNode"),d=a.view.getBaseCssClasses("mask-hidden");b?c.removeClass(d):c.addClass(d)}function h(a,b,c,d){var e=a.effect||n;if(g(d,c),e!==n){var f,h=a.duration,i=a.easing,j=c?1:0;b.stop(1,1),b.css("display",c?n:"block"),f=e+o[e][j],b[f](h,function(){b.css("display","")},i)}}function i(a){var b,c=this,d=c.get("maskNode");if(b=a.newVal){var e=Number(c.$el.css("z-index"));isNaN(e)||d.css("z-index",e)}h(c.get("mask"),d,b,c)}var j=a.UA,k=b("node"),l=6===j.ie,m=k.all;f.ATTRS={mask:{value:!1},maskNode:{}};var n="none",o={fade:["Out","In"],slide:["Up","Down"]};return f.prototype={__renderUI:function(){var a=this;a.get("mask")&&a.set("maskNode",e(a,a.get("visible")?"":a.view.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var a,b,c=this;(b=c.get("mask"))&&(a=c.get("maskNode"),b.closeOnClick&&a.on(k.Gesture.tap,c.close,c),c.on("afterVisibleChange",i))},__destructor:function(){var a;(a=this.get("maskNode"))&&a.remove()}},f}),KISSY.add("overlay/close-xtpl",[],function(a,b,c,d){return function(a){var b,c="",e=this.config,f=this,g=e.utils;"undefined"!=typeof d&&d.kissy&&(b=d);var h=g.runBlockCommand,i=g.renderOutput,j=g.getProperty,k=g.runInlineCommand,l=g.getPropertyOrRunCommand;c+="";var m={},n=[],o=j(f,a,"closable",0,1);return n.push(o),m.params=n,m.fn=function(a){var b="";b+='\n<a href="javascript:void(\'close\')"\n   id="ks-overlay-close-';var c=l(f,a,{},"id",0,3);b+=i(c,!0),b+='"\n   class="';var d={},e=[];e.push("close"),d.params=e;var g=k(f,a,d,"getBaseCssClasses",4);b+=i(g,!0),b+="\"\n   role='button'>\n    <span class=\"";var h={},j=[];j.push("close-x"),h.params=j;var m=k(f,a,h,"getBaseCssClasses",6);return b+=i(m,!0),b+='">close</span>\n</a>\n'},c+=h(f,a,m,"if",1),c+="\n"}}),KISSY.add("overlay/overlay-xtpl",["overlay/close-xtpl","component/extension/content-xtpl"],function(a,b,c,d){return function(a){var c,e="",f=this.config,g=this,h=f.utils;"undefined"!=typeof d&&d.kissy&&(c=d);{var i=(h.runBlockCommand,h.renderOutput),j=(h.getProperty,h.runInlineCommand);h.getPropertyOrRunCommand}e+="";var k={},l=[];l.push("overlay/close-xtpl"),k.params=l,c&&(b("overlay/close-xtpl"),k.params[0]=c.resolveByName(k.params[0]));var m=j(g,a,k,"include",1);e+=i(m,!1),e+="\n";var n={},o=[];o.push("component/extension/content-xtpl"),n.params=o,c&&(b("component/extension/content-xtpl"),n.params[0]=c.resolveByName(n.params[0]));var p=j(g,a,n,"include",2);return e+=i(p,!1)}}),KISSY.add("overlay/overlay-render",["component/container","./overlay-xtpl","component/extension/content-render"],function(a,b){var c=b("component/container"),d=b("./overlay-xtpl"),e=b("component/extension/content-render");return c.getDefaultRender().extend([e],{createDom:function(){this.fillChildrenElsBySelectors({closeBtn:"#ks-overlay-close-{id}"})}},{ATTRS:{contentTpl:{value:d}},HTML_PARSER:{closeBtn:function(a){return a.one("."+this.getBaseCssClass("close"))}}})}),KISSY.add("overlay/extension/overlay-effect",[],function(a){function b(a){var b=a.$el,c=b.clone(!0);return c.css({visibility:"visible",overflow:"hidden"}).addClass(a.get("prefixCls")+"overlay-ghost"),a.__afterCreateEffectGhost(c)}function c(c,d,e){c.__effectGhost&&c.__effectGhost.stop(1,1);var f,g,h=c.$el,i=a.all,j=c.get("effect"),k=i(j.target),l=j.duration,m=a.mix(k.offset(),{width:k.width(),height:k.height()}),n=a.mix(h.offset(),{width:h.width(),height:h.height()}),o=b(c),p=j.easing;o.insertAfter(h),d?(f=m,g=n):(f=n,g=m),h.css("visibility","hidden"),o.css(f),c.__effectGhost=o,o.animate(g,{duration:l,easing:p,complete:function(){c.__effectGhost=null,o.remove(),h.css("visibility",""),e()}})}function d(a,b,d){var e=a.$el,g=a.get("effect"),h=g.effect||"none",i=g.target;if("none"===h&&!i)return void d();if(i)return void c(a,b,d);var j=g.duration,k=g.easing,l=b?1:0;e.stop(1,1),e.css({visibility:"visible",display:b?"none":"block"});var m=h+f[h][l];e[m](j,function(){e.css({display:"block",visibility:""}),d()},k)}function e(){}var f={fade:["Out","In"],slide:["Up","Down"]};return e.ATTRS={effect:{value:{effect:"",target:null,duration:.5,easing:"easeOut"},setter:function(a){var b=a.effect;"string"!=typeof b||f[b]||(a.effect="")}}},e.prototype={__afterCreateEffectGhost:function(a){return a},_onSetVisible:function(a){var b=this;d(b,a,function(){b.fire(a?"show":"hide")})}},e}),KISSY.add("overlay/control",["component/container","component/extension/shim","component/extension/align","./extension/loading","./extension/mask","./overlay-render","./extension/overlay-effect"],function(a,b){var c=b("component/container"),d=b("component/extension/shim"),e=b("component/extension/align"),f=b("./extension/loading"),g=b("./extension/mask"),h=b("./overlay-render"),i=b("./extension/overlay-effect"),j="hide",k={hide:j,destroy:"destroy"};return c.extend([d,f,e,g,i],{bindUI:function(){var a=this,b=a.get("closeBtn");b&&b.on("click",function(b){a.close(),b.preventDefault()})},close:function(){var a=this;
return a[k[a.get("closeAction")]||j](),a}},{ATTRS:{contentEl:{},closable:{value:!1,view:1},closeBtn:{view:1},closeAction:{value:j},focusable:{value:!1},allowTextSelection:{value:!0},handleMouseEvents:{value:!1},visible:{value:!1},xrender:{value:h}},xclass:"overlay"})}),KISSY.add("overlay/dialog-xtpl",["overlay/close-xtpl"],function(a,b,c,d){return function(a){var c,e="",f=this.config,g=this,h=f.utils;"undefined"!=typeof d&&d.kissy&&(c=d);var i=h.runBlockCommand,j=h.renderOutput,k=h.getProperty,l=h.runInlineCommand,m=h.getPropertyOrRunCommand;e+="";var n={},o=[];o.push("overlay/close-xtpl"),n.params=o,c&&(b("overlay/close-xtpl"),n.params[0]=c.resolveByName(n.params[0]));var p=l(g,a,n,"include",1);e+=j(p,!1),e+='\n<div id="ks-content-';var q=m(g,a,{},"id",0,2);e+=j(q,!0),e+='"\n     class="';var r={},s=[];s.push("content"),r.params=s;var t=l(g,a,r,"getBaseCssClasses",3);e+=j(t,!0),e+='">\n    <div class="';var u={},v=[];v.push("header"),u.params=v;var w=l(g,a,u,"getBaseCssClasses",4);e+=j(w,!0),e+='"\n         style="\n';var x={},y=[],z=k(g,a,"headerStyle",0,6);y.push(z),x.params=y,x.fn=function(a){var b="";b+=" \n ";var c=m(g,a,{},"xindex",0,7);b+=j(c,!0),b+=":";var d=m(g,a,{},".",0,7);return b+=j(d,!0),b+=";\n"},e+=i(g,a,x,"each",6),e+='\n"\n         id="ks-stdmod-header-';var A=m(g,a,{},"id",0,10);e+=j(A,!0),e+='">';var B=m(g,a,{},"headerContent",0,10);e+=j(B,!1),e+='</div>\n\n    <div class="';var C={},D=[];D.push("body"),C.params=D;var E=l(g,a,C,"getBaseCssClasses",12);e+=j(E,!0),e+='"\n         style="\n';var F={},G=[],H=k(g,a,"bodyStyle",0,14);G.push(H),F.params=G,F.fn=function(a){var b="";b+=" \n ";var c=m(g,a,{},"xindex",0,15);b+=j(c,!0),b+=":";var d=m(g,a,{},".",0,15);return b+=j(d,!0),b+=";\n"},e+=i(g,a,F,"each",14),e+='\n"\n         id="ks-stdmod-body-';var I=m(g,a,{},"id",0,18);e+=j(I,!0),e+='">';var J=m(g,a,{},"bodyContent",0,18);e+=j(J,!1),e+='</div>\n\n    <div class="';var K={},L=[];L.push("footer"),K.params=L;var M=l(g,a,K,"getBaseCssClasses",20);e+=j(M,!0),e+='"\n         style="\n';var N={},O=[],P=k(g,a,"footerStyle",0,22);O.push(P),N.params=O,N.fn=function(a){var b="";b+=" \n ";var c=m(g,a,{},"xindex",0,23);b+=j(c,!0),b+=":";var d=m(g,a,{},".",0,23);return b+=j(d,!0),b+=";\n"},e+=i(g,a,N,"each",22),e+='\n"\n         id="ks-stdmod-footer-';var Q=m(g,a,{},"id",0,26);e+=j(Q,!0),e+='">';var R=m(g,a,{},"footerContent",0,26);return e+=j(R,!1),e+='</div>\n</div>\n<div tabindex="0"></div>'}}),KISSY.add("overlay/dialog-render",["./overlay-render","./dialog-xtpl"],function(a,b){function c(a,b,c){b=a.control.get(b),b.html(c)}var d=b("./overlay-render"),e=b("./dialog-xtpl");return d.extend({beforeCreateDom:function(b){a.mix(b.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.control.get("id")})},createDom:function(){this.fillChildrenElsBySelectors({header:"#ks-stdmod-header-{id}",body:"#ks-stdmod-body-{id}",footer:"#ks-stdmod-footer-{id}"})},getChildrenContainerEl:function(){return this.control.get("body")},_onSetBodyStyle:function(a){this.control.get("body").css(a)},_onSetHeaderStyle:function(a){this.control.get("header").css(a)},_onSetFooterStyle:function(a){this.control.get("footer").css(a)},_onSetBodyContent:function(a){c(this,"body",a)},_onSetHeaderContent:function(a){c(this,"header",a)},_onSetFooterContent:function(a){c(this,"footer",a)}},{ATTRS:{contentTpl:{value:e}},HTML_PARSER:{header:function(a){return a.one("."+this.getBaseCssClass("header"))},body:function(a){return a.one("."+this.getBaseCssClass("body"))},footer:function(a){return a.one("."+this.getBaseCssClass("footer"))},headerContent:function(a){return a.one("."+this.getBaseCssClass("header")).html()},bodyContent:function(a){return a.one("."+this.getBaseCssClass("body")).html()},footerContent:function(a){var b=a.one("."+this.getBaseCssClass("footer"));return b&&b.html()}}})}),KISSY.add("overlay/dialog",["./control","./dialog-render","node"],function(a,b){function c(a){var b=this,c=a.keyCode;if(c===h){var d=b.$el,e=f.all(a.target),g=d.last();if(e.equals(d)&&a.shiftKey)g[0].focus(),a.halt();else if(e.equals(g)&&!a.shiftKey)b.focus(),a.halt();else if(e.equals(d)||d.contains(e))return;a.halt()}}var d=b("./control"),e=b("./dialog-render"),f=b("node"),g=d.extend({__afterCreateEffectGhost:function(a){var b=this,c=b.get("body");return a.all("."+b.get("prefixCls")+"stdmod-body").css({height:c.height(),width:c.width()}).html(""),a},handleKeyDownInternal:function(a){return this.get("escapeToClose")&&a.keyCode===f.KeyCode.ESC?void(("select"!==a.target.nodeName.toLowerCase()||a.target.disabled)&&(this.close(),a.halt())):void c.call(this,a)},_onSetVisible:function(a,b){var c=this,d=c.el;if(a)c.__lastActive=d.ownerDocument.activeElement,c.focus(),d.setAttribute("aria-hidden","false");else{d.setAttribute("aria-hidden","true");try{c.__lastActive&&c.__lastActive.focus()}catch(e){}}c.callSuper(a,b)}},{ATTRS:{header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{value:{},view:1},footerStyle:{value:{},view:1},headerStyle:{value:{},view:1},headerContent:{value:"",view:1},bodyContent:{value:"",view:1},footerContent:{value:"",view:1},closable:{value:!0},xrender:{value:e},focusable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),h=f.KeyCode.TAB;return g}),KISSY.add("overlay/popup",["./control"],function(a,b){var c=b("./control");return c.extend({initializer:function(){var a=this,b=a.get("trigger");b&&("mouse"===a.get("triggerType")?(a._bindTriggerMouse(),a.on("afterRenderUI",function(){a._bindContainerMouse()})):a._bindTriggerClick())},_bindTriggerMouse:function(){var b,c=this,d=c.get("trigger");c.__mouseEnterPopup=function(d){c._clearHiddenTimer(),b=a.later(function(){c._showing(d),b=void 0},1e3*c.get("mouseDelay"))},d.on("mouseenter",c.__mouseEnterPopup),c._mouseLeavePopup=function(){b&&(b.cancel(),b=void 0),c._setHiddenTimer()},d.on("mouseleave",c._mouseLeavePopup)},_bindContainerMouse:function(){var a=this;a.$el.on("mouseleave",a._setHiddenTimer,a).on("mouseenter",a._clearHiddenTimer,a)},_setHiddenTimer:function(){var b=this;b._hiddenTimer=a.later(function(){b._hiding()},1e3*b.get("mouseDelay"))},_clearHiddenTimer:function(){var a=this;a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=void 0)},_bindTriggerClick:function(){var a=this;a.__clickPopup=function(b){b.preventDefault(),a.get("toggle")?a[a.get("visible")?"_hiding":"_showing"](b):a._showing(b)},a.get("trigger").on("click",a.__clickPopup)},_showing:function(b){var c=this;c.set("currentTrigger",a.one(b.target)),c.show()},_hiding:function(){this.set("currentTrigger",void 0),this.hide()},destructor:function(){var a=this,b=a.$el,c=a.get("trigger");c&&(a.__clickPopup&&c.detach("click",a.__clickPopup),a.__mouseEnterPopup&&c.detach("mouseenter",a.__mouseEnterPopup),a._mouseLeavePopup&&c.detach("mouseleave",a._mouseLeavePopup)),b.detach("mouseleave",a._setHiddenTimer,a).detach("mouseenter",a._clearHiddenTimer,a)}},{ATTRS:{trigger:{setter:function(b){return a.all(b)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:.1},toggle:{value:!1}},xclass:"popup"})}),KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(a,b){var c=b("overlay/control"),d=b("overlay/dialog"),e=b("overlay/popup");return c.Dialog=d,a.Dialog=d,c.Popup=e,a.Overlay=c,c}),KISSY.add("dd/ddm",["node","base"],function(a,b){function c(a){var b,c,e,f=this;return a.touches&&a.touches.length>1?void K._end():((c=f.__activeToDrag)?c._move(a):(e=f.get("activeDrag"))&&(e._move(a),f.__needDropCheck&&d(f,a,e)),b=c||e,void(b&&b.get("preventDefaultOnMove")&&a.preventDefault()))}function d(b,c,d){var e,f=b.get("validDrops"),g=d.get("mode"),h=0,i=0,k=j(d.get("node")),o=l(k);a.each(f,function(a){if(a.get("disabled"))return void 0;var b,e=a.getNodeFromTarget(c,d.get("dragNode")[0],d.get("node")[0]);if(!e)return void 0;if("point"===g)n(e,d.mousePos)&&(b=l(j(e)),h?i>b&&(h=a,i=b):(h=a,i=b));else if("intersect"===g)b=l(m(k,j(e))),b>i&&(i=b,h=a);else if("strict"===g&&(b=l(m(k,j(e))),b===o))return h=a,!1;return void 0}),e=b.get("activeDrop"),e&&e!==h&&(e._handleOut(c),d._handleOut(c)),b.setInternal("activeDrop",h),h&&(e!==h?h._handleEnter(c):h._handleOver(c))}function e(a){var b=a.get("activeDrag").get("activeHandler"),c="auto";b&&(c=b.css("cursor")),"auto"===c&&(c=a.get("dragCursor")),a._shim.css({cursor:c,display:"block"}),y&&J.call(a)}function f(a){w.on(F,a._end,a),w.on(E,H,a),v.body.setCapture&&v.body.setCapture()}function g(a){w.detach(E,H,a),w.detach(F,a._end,a),v.body.releaseCapture&&v.body.releaseCapture()}function h(b){var c=b.get("drops");b.setInternal("validDrops",[]),c.length&&a.each(c,function(a){a._active()})}function i(b){var c=b.get("drops");b.setInternal("validDrops",[]),c.length&&a.each(c,function(a){a._deActive()})}function j(a){var b=a.offset();return a.__ddCachedWidth||(r.debug("no cache in dd!"),r.debug(a[0])),{left:b.left,right:b.left+(a.__ddCachedWidth||a.outerWidth()),top:b.top,bottom:b.top+(a.__ddCachedHeight||a.outerHeight())}}function k(a,b){return a.left<=b.left&&a.right>=b.left&&a.top<=b.top&&a.bottom>=b.top}function l(a){return a.top>=a.bottom||a.left>=a.right?0:(a.right-a.left)*(a.bottom-a.top)}function m(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.right,b.right),e=Math.min(a.bottom,b.bottom),f=Math.max(a.left,b.left);return{left:f,right:d,top:c,bottom:e}}function n(a,b){return k(j(a),b)}function o(a){a&&(a.__ddCachedWidth=a.outerWidth(),a.__ddCachedHeight=a.outerHeight())}var p=b("node"),q=b("base"),r=a.getLogger("dd/ddm"),s=a.UA,t=p.all,u=a.Env.host,v=u.document,w=t(v),x=t(u),y=6===s.ie,z=3,A=1,B=30,C=999999,D=p.Gesture,E=D.move,F=D.end,G=q.extend({__activeToDrag:0,_regDrop:function(a){this.get("drops").push(a)},_unRegDrop:function(b){var c=this,d=c.get("drops"),e=a.indexOf(b,d);-1!==e&&d.splice(e,1)},_regToDrag:function(a){var b=this;b.__activeToDrag=a,f(b)},_start:function(){var a=this,b=a.__activeToDrag;b&&(a.setInternal("activeDrag",b),a.__activeToDrag=0,b.get("shim")&&I(a),a.__needDropCheck=0,b.get("groups")&&(h(a),a.get("validDrops").length&&(o(b.get("node")),a.__needDropCheck=1)))},_addValidDrop:function(a){this.get("validDrops").push(a)},_end:function(a){var b=this,c=b.__activeToDrag,d=b.get("activeDrag"),e=b.get("activeDrop");a&&(c&&c._move(a),d&&d._move(a)),g(b),c&&(c._end(a),b.__activeToDrag=0),b._shim&&b._shim.hide(),d&&(d._end(a),i(b),e&&e._end(a),b.setInternal("activeDrag",null),b.setInternal("activeDrop",null))}},{ATTRS:{dragCursor:{value:"move"},clickPixelThresh:{value:z},bufferTime:{value:A},activeDrag:{},activeDrop:{},drops:{value:[]},validDrops:{value:[]}}}),H=s.ie?a.throttle(c,B):c,I=function(a){a._shim=t('<div style="background-color:red;position:'+(y?"absolute":"fixed")+";left:0;width:100%;height:100%;top:0;cursor:"+K.get("dragCursor")+";z-index:"+C+';"></div>').prependTo(v.body||v.documentElement).css("opacity",0),I=e,y&&x.on("resize scroll",J,a),e(a)},J=a.throttle(function(){var a,b=this;(a=b.get("activeDrag"))&&a.get("shim")&&b._shim.css({width:w.width(),height:w.height()})},B),K=new G;return K.inRegion=k,K.region=j,K.area=l,K.cacheWH=o,K.PREFIX_CLS="ks-dd-",K}),KISSY.add("dd/draggable",["node","./ddm","base"],function(a,b){function c(){r.body.onselectstart=g}function d(){g=r.body.onselectstart,r.body.onselectstart=f}function e(a){a.preventDefault()}function f(){return!1}var g,h=b("node"),i=b("./ddm"),j=b("base"),k=a.UA,l=h.all,m=a.each,n=a.Features,o=k.ie,p=null,q=i.PREFIX_CLS,r=a.Env.host.document,s=j.extend({initializer:function(){var a=this;a.addTarget(i),a._allowMove=a.get("move")},_onSetNode:function(a){var b=this;b.setInternal("dragNode",a),b.bindDragEvent()},bindDragEvent:function(){var a=this,b=a.get("node");b.on(h.Gesture.start,t,a).on("dragstart",a._fixDragStart)},detachDragEvent:function(a){a=this;var b=a.get("node");b.detach(h.Gesture.start,t,a).detach("dragstart",a._fixDragStart)},_bufferTimer:p,_onSetDisabledChange:function(a){this.get("dragNode")[a?"addClass":"removeClass"](q+"-disabled")},_fixDragStart:e,_checkHandler:function(a){var b=this,c=b.get("handlers"),d=0;return m(c,function(c){return c[0]===a||c.contains(a)?(d=1,b.setInternal("activeHandler",c),!1):void 0}),d},_checkDragStartValid:function(a){var b=this;return b.get("primaryButtonOnly")&&1!==a.which||b.get("disabled")?0:1},_prepare:function(a){if(a){var b=this;o&&d(),b.get("halt")&&a.stopPropagation(),n.isTouchEventSupported()||a.preventDefault();var c=a.pageX,e=a.pageY;if(b.setInternal("startMousePos",b.mousePos={left:c,top:e}),b._allowMove){var f=b.get("node"),g=f.offset();b.setInternal("startNodePos",g),b.setInternal("deltaPos",{left:c-g.left,top:e-g.top})}i._regToDrag(b);var h=b.get("bufferTime");h&&(b._bufferTimer=setTimeout(function(){b._start(a)},1e3*h))}},_clearBufferTimer:function(){var a=this;a._bufferTimer&&(clearTimeout(a._bufferTimer),a._bufferTimer=0)},_move:function(a){var b=this,c=a.pageX,d=a.pageY;if(!b.get("dragging")){var e=b.get("startMousePos"),f=0,g=b.get("clickPixelThresh");if((Math.abs(c-e.left)>=g||Math.abs(d-e.top)>=g)&&(b._start(a),f=1),!f)return}b.mousePos={left:c,top:d};var h={drag:b,left:c,top:d,pageX:c,pageY:d,domEvent:a},i=b._allowMove;if(i){var j=b.get("deltaPos"),k=c-j.left,l=d-j.top;h.left=k,h.top=l,b.setInternal("actualPos",{left:k,top:l}),b.fire("dragalign",h)}var m=1;b.fire("drag",h)===!1&&(m=0),m&&i&&b.get("node").offset(b.get("actualPos"))},stopDrag:function(){i._end()},_end:function(a){a=a||{};var b,d=this;d._clearBufferTimer(),o&&c(),d.get("dragging")&&(d.get("node").removeClass(q+"drag-over"),(b=i.get("activeDrop"))?d.fire("dragdrophit",{drag:d,drop:b}):d.fire("dragdropmiss",{drag:d}),d.setInternal("dragging",0),d.fire("dragend",{drag:d,pageX:a.pageX,pageY:a.pageY}))},_handleOut:function(){var a=this;a.get("node").removeClass(q+"drag-over"),a.fire("dragexit",{drag:a,drop:i.get("activeDrop")})},_handleEnter:function(a){var b=this;b.get("node").addClass(q+"drag-over"),b.fire("dragenter",a)},_handleOver:function(a){this.fire("dragover",a)},_start:function(a){var b=this;b._clearBufferTimer(),b.setInternal("dragging",1),b.setInternal("dragStartMousePos",{left:a.pageX,top:a.pageY}),i._start(),b.fire("dragstart",{drag:b,pageX:a.pageX,pageY:a.pageY})},destructor:function(){var a=this;a.detachDragEvent(),a.detach()}},{name:"Draggable",ATTRS:{node:{setter:function(a){return a instanceof h?void 0:l(a)}},clickPixelThresh:{valueFn:function(){return i.get("clickPixelThresh")}},bufferTime:{valueFn:function(){return i.get("bufferTime")}},dragNode:{},shim:{value:!1},handlers:{value:[],getter:function(a){var b=this;return a.length||(a[0]=b.get("node")),m(a,function(c,d){"function"==typeof c&&(c=c.call(b)),"string"==typeof c&&(c=b.get("node").one(c)),c.nodeType&&(c=l(c)),a[d]=c}),b.setInternal("handlers",a),a}},activeHandler:{},dragging:{value:!1,setter:function(a){var b=this;b.get("dragNode")[a?"addClass":"removeClass"](q+"dragging")}},mode:{value:"point"},disabled:{value:!1},move:{value:!1},primaryButtonOnly:{value:!0},halt:{value:!0},groups:{value:!0},startMousePos:{},dragStartMousePos:{},startNodePos:{},deltaPos:{},actualPos:{},preventDefaultOnMove:{value:!0}},inheritedStatics:{DropMode:{POINT:"point",INTERSECT:"intersect",STRICT:"strict"}}}),t=function(a){var b=this,c=a.target;if(b._checkDragStartValid(a)){if(!b._checkHandler(c))return;b._prepare(a)}};return s}),KISSY.add("dd/draggable-delegate",["node","./ddm","./draggable"],function(a,b){var c=b("node"),d=b("./ddm"),e=b("./draggable"),f=d.PREFIX_CLS,g=c.all,h=function(a){var b,c,d=this;if(d._checkDragStartValid(a)){var e=d.get("handlers"),f=g(a.target);b=e.length?d._getHandler(f):f,b&&(c=d._getNode(b)),c&&(d.setInternal("activeHandler",b),d.setInternal("node",c),d.setInternal("dragNode",c),d._prepare(a))}};return e.extend({_onSetNode:function(){},_onSetContainer:function(){this.bindDragEvent()},_onSetDisabledChange:function(a){this.get("container")[a?"addClass":"removeClass"](f+"-disabled")},bindDragEvent:function(){var a=this,b=a.get("container");b.on(c.Gesture.start,h,a).on("dragstart",a._fixDragStart)},detachDragEvent:function(){var a=this;a.get("container").detach(c.Gesture.start,h,a).detach("dragstart",a._fixDragStart)},_getHandler:function(a){for(var b=this,c=b.get("container"),d=b.get("handlers");a&&a[0]!==c[0];){for(var e=0;e<d.length;e++){var f=d[e];if(a.test(f))return a}a=a.parent()}return null},_getNode:function(a){return a.closest(this.get("selector"),this.get("container"))}},{ATTRS:{container:{setter:function(a){return g(a)}},selector:{},handlers:{value:[],getter:0}}})}),KISSY.add("dd/droppable",["node","./ddm","base"],function(a,b){function c(a,b){if(b===!0)return 1;for(var c in a)if(b[c])return 1;return 0}var d=b("node"),e=b("./ddm"),f=b("base"),g=e.PREFIX_CLS;return f.extend({initializer:function(){var a=this;a.addTarget(e),e._regDrop(this)},getNodeFromTarget:function(a,b,c){var d=this.get("node"),e=d[0];return e===b||e===c?null:d},_active:function(){var a=this,b=e.get("activeDrag"),d=a.get("node"),f=a.get("groups"),h=b.get("groups");c(f,h)?(e._addValidDrop(a),d&&(d.addClass(g+"drop-active-valid"),e.cacheWH(d))):d&&d.addClass(g+"drop-active-invalid")},_deActive:function(){var a=this.get("node");a&&a.removeClass(g+"drop-active-valid").removeClass(g+"drop-active-invalid")},__getCustomEvt:function(b){return a.mix({drag:e.get("activeDrag"),drop:this},b)},_handleOut:function(){var a=this,b=a.__getCustomEvt();a.get("node").removeClass(g+"drop-over"),a.fire("dropexit",b)},_handleEnter:function(a){var b=this,c=b.__getCustomEvt(a);c.drag._handleEnter(c),b.get("node").addClass(g+"drop-over"),b.fire("dropenter",c)},_handleOver:function(a){var b=this,c=b.__getCustomEvt(a);c.drag._handleOver(c),b.fire("dropover",c)},_end:function(){var a=this,b=a.__getCustomEvt();a.get("node").removeClass(g+"drop-over"),a.fire("drophit",b)},destructor:function(){e._unRegDrop(this)}},{name:"Droppable",ATTRS:{node:{setter:function(a){return a?d.one(a):void 0}},groups:{value:{}},disabled:{}}})}),KISSY.add("dd/droppable-delegate",["node","./ddm","./droppable"],function(a,b){function c(){var a=this,b=a.get("container"),c=[],d=a.get("selector");b.all(d).each(function(a){e.cacheWH(a),c.push(a)}),a.__allNodes=c}var d=b("node"),e=b("./ddm"),f=b("./droppable"),g=f.extend({initializer:function(){e.on("dragstart",c,this)},getNodeFromTarget:function(b,c,d){var f={left:b.pageX,top:b.pageY},g=this,h=g.__allNodes,i=0,j=Number.MAX_VALUE;return h&&a.each(h,function(a){var b=a[0];if(b!==d&&b!==c){var g=e.region(a);if(e.inRegion(g,f)){var h=e.area(g);j>h&&(j=h,i=a)}}}),i&&(g.setInternal("lastNode",g.get("node")),g.setInternal("node",i)),i},_handleOut:function(){var a=this;a.callSuper(),a.setInternal("node",0),a.setInternal("lastNode",0)},_handleOver:function(a){var b=this,c=b.get("node"),d=g.superclass._handleOut,e=b.callSuper,f=g.superclass._handleEnter,h=b.get("lastNode");h[0]!==c[0]?(b.setInternal("node",h),d.apply(b,arguments),b.setInternal("node",c),f.call(b,a)):e.call(b,a)},_end:function(a){var b=this;b.callSuper(a),b.setInternal("node",0)}},{ATTRS:{lastNode:{},selector:{},container:{setter:function(a){return d.one(a)}}}});return g}),KISSY.add("dd",["dd/ddm","dd/draggable","dd/draggable-delegate","dd/droppable-delegate","dd/droppable"],function(a,b){var c=b("dd/ddm"),d=b("dd/draggable"),e=b("dd/draggable-delegate"),f=b("dd/droppable-delegate"),g=b("dd/droppable"),h={Draggable:d,DDM:c,Droppable:g,DroppableDelegate:f,DraggableDelegate:e};return KISSY.DD=h,h}),KISSY.add("menubutton/menubutton-xtpl",["component/extension/content-xtpl"],function(a,b,c,d){return function(a){var c,e="",f=this.config,g=this,h=f.utils;"undefined"!=typeof d&&d.kissy&&(c=d);{var i=(h.runBlockCommand,h.renderOutput),j=(h.getProperty,h.runInlineCommand);h.getPropertyOrRunCommand}e+="";var k={},l=[];l.push("component/extension/content-xtpl"),k.params=l,c&&(b("component/extension/content-xtpl"),k.params[0]=c.resolveByName(k.params[0]));var m=j(g,a,k,"include",1);e+=i(m,!1),e+='\n<div class="';var n={},o=[];o.push("dropdown"),n.params=o;var p=j(g,a,n,"getBaseCssClasses",2);e+=i(p,!0),e+='">\n    <div class="';var q={},r=[];r.push("dropdown-inner"),q.params=r;var s=j(g,a,q,"getBaseCssClasses",3);return e+=i(s,!0),e+='">\n    </div>\n</div>'}}),KISSY.add("menubutton/render",["button","./menubutton-xtpl","component/extension/content-render"],function(a,b){var c=b("button"),d=b("./menubutton-xtpl"),e=b("component/extension/content-render");return c.getDefaultRender().extend([e],{decorateDom:function(a){var b=this.control,c=b.get("prefixCls"),d=a.one("."+c+"popupmenu"),e=d[0].ownerDocument.body;e.insertBefore(d[0],e.firstChild);var f=this.getComponentConstructorByNode(c,d);b.setInternal("menu",new f({srcNode:d,prefixCls:c}))},beforeCreateDom:function(b){a.mix(b.elAttrs,{"aria-expanded":!1,"aria-haspopup":!0})},_onSetCollapsed:function(a){var b=this,c=b.$el,d=b.getBaseCssClass("open");c[a?"removeClass":"addClass"](d).attr("aria-expanded",!a)}},{ATTRS:{contentTpl:{value:d}}})}),KISSY.add("menubutton/control",["node","button","./render"],function(a,b){function c(a){a.target.isMenuItem&&this.get("collapseOnClick")&&this.set("collapsed",!0)}function d(a){if(a.target.isMenu){var b=this.el,c=a.newVal;b.setAttribute("aria-activedescendant",c&&c.el.id||"")}}var e=b("node"),f=b("button"),g=b("./render"),h=e.KeyCode;return f.extend({isMenuButton:1,_onSetCollapsed:function(b){var c=this,d=c.get("menu");if(b)d.hide();else{var e=c.$el;if(!d.get("visible")){var f={node:e,points:["bl","tl"],overflow:{adjustX:1,adjustY:1}};if(a.mix(d.get("align"),f,!1),c.get("matchElWidth")){d.render();var g=d.get("el"),h=(parseInt(g.css("borderLeftWidth"))||0)+(parseInt(g.css("borderRightWidth"))||0);d.set("width",d.get("align").node[0].offsetWidth-h)}d.show(),e.attr("aria-haspopup",d.get("el").attr("id"))}}},bindUI:function(){var a=this;a.on("afterHighlightedItemChange",d,a),a.on("click",c,a)},handleKeyDownInternal:function(a){var b=this,c=a.keyCode,d=String(a.type),e=b.get("menu");if(c===h.SPACE){if(a.preventDefault(),"keyup"!==d)return void 0}else if("keydown"!==d)return void 0;if(e.get("rendered")&&e.get("visible")){var f=e.handleKeyDownInternal(a);return c===h.ESC?(b.set("collapsed",!0),!0):f}return c===h.SPACE||c===h.DOWN||c===h.UP?(b.set("collapsed",!1),!0):void 0},handleClickInternal:function(){var a=this;a.set("collapsed",!a.get("collapsed"))},handleBlurInternal:function(a){var b=this;b.callSuper(a),b.set("collapsed",!0)},addItem:function(a,b){var c=this.get("menu");c.addChild(a,b)},removeItem:function(a,b){var c=this.get("menu");c.removeChild(a,b)},removeItems:function(a){var b=this.get("menu");b&&(b.removeChildren?b.removeChildren(a):b.children&&(b.children=[]))},getItemAt:function(a){var b=this.get("menu");return b.get("rendered")&&b.getChildAt(a)},_onSetDisabled:function(a){a||this.set("collapsed",!0)},destructor:function(){this.get("menu").destroy()}},{ATTRS:{matchElWidth:{value:!0},collapseOnClick:{value:!1},menu:{value:{},getter:function(a){return a.isControl||(a.xclass=a.xclass||"popupmenu",a=this.createComponent(a),this.setInternal("menu",a)),a},setter:function(a){a.isControl&&a.setInternal("parent",this)}},collapsed:{value:!1,view:1},xrender:{value:g}},xclass:"menu-button"})}),KISSY.add("menubutton/select",["node","./control"],function(a,b){function c(a){var b,c,e=a.get("menu"),f=e.children||e.get&&e.get("children")||[],g=a.get("value");for(c=0;c<f.length;c++)if(b=f[c],d(b)===g)return b;return null}function d(a){var b;return a&&(a.get?void 0===(b=a.get("value"))&&(b=a.get("textContent")||a.get("content")):void 0===(b=a.value)&&(b=a.textContent||a.content)),b}function e(b){var c=b.get("menu"),e=b.get("value"),f=c&&c.get&&c.get("children");a.each(f,function(a){a&&a.set&&a.set("selected",d(a)===e)})}function f(a){var b=this,d=c(b),e=b.get("menu");if(a.target===e){var f=d||e.getChildAt(0);f&&f.set("highlighted",!0),d&&d.set("selected",!0)}}function g(a){var b=c(a),d=b&&(b.textContent||b.get&&b.get("textContent")),e=b&&(b.content||b.get&&b.get("content"));a.set("content",d||e||a.get("defaultCaption"))}function h(a){var b=this,c=a.target;if(c.isMenuItem){var e=d(c),f=b.get("value");b.set("value",e),e!==f&&b.fire("change",{prevVal:f,newVal:e})}}var i=b("node"),j=b("./control"),k=j.extend({bindUI:function(){this.on("click",h,this),this.on("show",f,this)},removeItems:function(){var a=this;a.callSuper.apply(a,arguments),a.set("value",null)},removeItem:function(a,b){var c=this;c.callSuper(a,b),a.get("value")===c.get("value")&&c.set("value",null)},_onSetValue:function(){var a=this;e(a),g(a)},_onSetDefaultCaption:function(){g(this)}},{ATTRS:{value:{},defaultCaption:{value:""},collapseOnClick:{value:!0}},decorate:function(b,c){b=a.one(b),c=c||{},c.elBefore=b;var d,e,f=[],g=null,h=b.val(),j=b.all("option");if(j.each(function(a){var b={xclass:"option",content:a.text(),elCls:a.attr("class"),value:a.val()};h===a.val()&&(g={content:b.content,value:b.value}),f.push(b)}),a.mix(c,{menu:a.mix({children:f},c.menuCfg)}),delete c.menuCfg,e=new k(a.mix(c,g)).render(),d=b.attr("name")){var l=new i('<input type="hidden" name="'+d+'" value="'+h+'">').insertBefore(b,void 0);e.on("afterValueChange",function(a){l.val(a.newVal||"")})}return b.remove(),e},xclass:"select"});return k}),KISSY.add("menubutton/option",["menu"],function(a,b){var c=b("menu"),d=c.Item;return d.extend({},{ATTRS:{selectable:{value:!0},textContent:{}},xclass:"option"})}),KISSY.add("menubutton",["menubutton/control","menubutton/select","menubutton/option"],function(a,b){var c=b("menubutton/control"),d=b("menubutton/select"),e=b("menubutton/option");return c.Select=d,c.Option=e,c}),KISSY.add("gallery/template/1.0/index",function(a){function b(b){if(!c[b]){var d,e,f=a.guid(h),g=[n,f,o,e=t(b),p];try{d=new Function(f,g.join(""))}catch(i){g[3]=j+k+l+","+i.message+j+k,d=new Function(f,g.join(""))}c[b]={name:f,o:e,parser:g.join(""),render:d}}return c[b]}var c={},d={"#":"start","@":"start","/":"end"},e="KS_TEMPL_STAT_PARAM",f=new RegExp(e,"g"),g="KS_TEMPL",h="KS_DATA_",i="as",j='");',k=g+'.push("',l="KISSY.Template: Syntax Error. ",m="KISSY.Template: Render Error. ",n="var "+g+"=[],"+e+"=false;with(",o="||{}){try{"+g+'.push("',p='");}catch(e){'+g+'=["'+m+'" + e.message]}};return '+g+'.join("");',q=function(a){return a.replace(/\\"/g,'"')},r=function(a){return a.replace(/"/g,'\\"')},s=a.trim,t=function(b){var c,e;return r(s(b).replace(/[\r\t\n]/g," ").replace(/\\/g,"\\\\")).replace(/\{\{([#/@]?)(?!\}\})([^}]*)\}\}/g,function(b,h,i){if(c="",i=q(s(i)),h){e=i.indexOf(" "),i=-1===e?[i,""]:[i.substring(0,e),i.substring(e)];var l,m=i[0],n=s(i[1]),o=u[m];o&&d[h]&&(l=o[d[h]],c=String(a.isFunction(l)?l.apply(this,n.split(/\s+/)):l.replace(f,n)))}else c=g+".push(typeof ("+i+') ==="undefined"?"":'+i+");";return j+c+k})},u={"if":{start:"if(typeof ("+e+') !=="undefined" && '+e+"){",end:"}"},"else":{start:"}else{"},elseif:{start:"}else if("+e+"){"},each:{start:function(a,b,c,d){var e="_ks_value",f="_ks_index";return b===i&&c&&(e=c||e,f=d||f),"KISSY.each("+a+", function("+e+", "+f+"){"},end:"});"},"!":{start:"/*"+e+"*/"}};return a.mix(b,{log:function(d){d in c?a.log(c[d].parser,"info"):(b(d),this.log(d))},addStatement:function(b,c){"string"==typeof b?u[b]=c:a.mix(u,b)}}),a.Template=b,b}),KISSY.add("gallery/kcharts/1.3/raphael/index",function(){return function(){!function(a){var b,c,d="0.4.2",e="hasOwnProperty",f=/[\.\/]/,g="*",h=function(){},i=function(a,b){return a-b},j={n:{}},k=function(a,d){a=String(a);var e,f=c,g=Array.prototype.slice.call(arguments,2),h=k.listeners(a),j=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=h.length;q>p;p++)"zIndex"in h[p]&&(l.push(h[p].zIndex),h[p].zIndex<0&&(m[h[p].zIndex]=h[p]));for(l.sort(i);l[j]<0;)if(e=m[l[j++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if(e=h[p],"zIndex"in e)if(e.zIndex==l[j]){if(n.push(e.apply(d,g)),c)break;do if(j++,e=m[l[j]],e&&n.push(e.apply(d,g)),c)break;while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};k._events=j,k.listeners=function(a){var b,c,d,e,h,i,k,l,m=a.split(f),n=j,o=[n],p=[];for(e=0,h=m.length;h>e;e++){for(l=[],i=0,k=o.length;k>i;i++)for(n=o[i].n,c=[n[m[e]],n[g]],d=2;d--;)b=c[d],b&&(l.push(b),p=p.concat(b.f||[]));o=l}return p},k.on=function(a,b){if(a=String(a),"function"!=typeof b)return function(){};for(var c=a.split(f),d=j,e=0,g=c.length;g>e;e++)d=d.n,d=d.hasOwnProperty(c[e])&&d[c[e]]||(d[c[e]]={n:{}});for(d.f=d.f||[],e=0,g=d.f.length;g>e;e++)if(d.f[e]==b)return h;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.f=function(a){var b=[].slice.call(arguments,1);return function(){k.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}},k.stop=function(){c=1},k.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},k.nts=function(){return b.split(f)},k.off=k.unbind=function(a,b){if(!a)return void(k._events=j={n:{}});var c,d,h,i,l,m,n,o=a.split(f),p=[j];for(i=0,l=o.length;l>i;i++)for(m=0;m<p.length;m+=h.length-2){if(h=[m,1],c=p[m].n,o[i]!=g)c[o[i]]&&h.push(c[o[i]]);else for(d in c)c[e](d)&&h.push(c[d]);p.splice.apply(p,h)}for(i=0,l=p.length;l>i;i++)for(c=p[i];c.n;){if(b){if(c.f){for(m=0,n=c.f.length;n>m;m++)if(c.f[m]==b){c.f.splice(m,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var q=c.n[d].f;for(m=0,n=q.length;n>m;m++)if(q[m]==b){q.splice(m,1);break}!q.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},k.once=function(a,b){var c=function(){return k.unbind(a,c),b.apply(this,arguments)};return k.on(a,c)},k.version=d,k.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(this),function(a,b){"function"==typeof define&&define.amd?define(["eve"],function(c){return b(a,c)}):b(a,a.eve)}(this,function(a,b){function c(a){if(c.is(a,"function"))return u?a():b.on("raphael.DOMload",a);if(c.is(a,V))return c._engine.create[D](c,a.splice(0,3+c.is(a[0],T))).add(a);var d=Array.prototype.slice.call(arguments,0);if(c.is(d[d.length-1],"function")){var e=d.pop();return u?e.call(c._engine.create[D](c,d)):b.on("raphael.DOMload",function(){e.call(c._engine.create[D](c,d))})}return c._engine.create[D](c,arguments)}function d(a){if(Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[z](c)&&(b[c]=d(a[c]));return b}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function f(a,b,c){function d(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=d.cache=d.cache||{},i=d.count=d.count||[];return h[z](g)?(e(i,g),c?c(h[g]):h[g]):(i.length>=1e3&&delete h[i.shift()],i.push(g),h[g]=a[D](b,f),c?c(h[g]):h[g])}return d}function g(){return this.hex}function h(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function i(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function j(a,b,c,d,e,f,g,h,j){null==j&&(j=1),j=j>1?1:0>j?0:j;for(var k=j/2,l=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0,p=0;l>p;p++){var q=k*m[p]+k,r=i(q,a,c,e,g),s=i(q,b,d,f,h),t=r*r+s*s;o+=n[p]*N.sqrt(t)}return k*o}function k(a,b,c,d,e,f,g,h,i){if(!(0>i||j(a,b,c,d,e,f,g,h)<i)){var k,l=1,m=l/2,n=l-m,o=.01;for(k=j(a,b,c,d,e,f,g,h,n);Q(k-i)>o;)m/=2,n+=(i>k?1:-1)*m,k=j(a,b,c,d,e,f,g,h,n);return n}}function l(a,b,c,d,e,f,g,h){if(!(O(a,c)<P(e,g)||P(a,c)>O(e,g)||O(b,d)<P(f,h)||P(b,d)>O(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(k){var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(!(n<+P(a,c).toFixed(2)||n>+O(a,c).toFixed(2)||n<+P(e,g).toFixed(2)||n>+O(e,g).toFixed(2)||o<+P(b,d).toFixed(2)||o>+O(b,d).toFixed(2)||o<+P(f,h).toFixed(2)||o>+O(f,h).toFixed(2)))return{x:l,y:m}
}}}function m(a,b,d){var e=c.bezierBBox(a),f=c.bezierBBox(b);if(!c.isBBoxIntersect(e,f))return d?0:[];for(var g=j.apply(0,a),h=j.apply(0,b),i=~~(g/5),k=~~(h/5),m=[],n=[],o={},p=d?0:[],q=0;i+1>q;q++){var r=c.findDotsAtSegment.apply(c,a.concat(q/i));m.push({x:r.x,y:r.y,t:q/i})}for(q=0;k+1>q;q++)r=c.findDotsAtSegment.apply(c,b.concat(q/k)),n.push({x:r.x,y:r.y,t:q/k});for(q=0;i>q;q++)for(var s=0;k>s;s++){var t=m[q],u=m[q+1],v=n[s],w=n[s+1],x=Q(u.x-t.x)<.001?"y":"x",y=Q(w.x-v.x)<.001?"y":"x",z=l(t.x,t.y,u.x,u.y,v.x,v.y,w.x,w.y);if(z){if(o[z.x.toFixed(4)]==z.y.toFixed(4))continue;o[z.x.toFixed(4)]=z.y.toFixed(4);var A=t.t+Q((z[x]-t[x])/(u[x]-t[x]))*(u.t-t.t),B=v.t+Q((z[y]-v[y])/(w[y]-v[y]))*(w.t-v.t);A>=0&&1>=A&&B>=0&&1>=B&&(d?p++:p.push({x:z.x,y:z.y,t1:A,t2:B}))}}return p}function n(a,b,d){a=c._path2curve(a),b=c._path2curve(b);for(var e,f,g,h,i,j,k,l,n,o,p=d?0:[],q=0,r=a.length;r>q;q++){var s=a[q];if("M"==s[0])e=i=s[1],f=j=s[2];else{"C"==s[0]?(n=[e,f].concat(s.slice(1)),e=n[6],f=n[7]):(n=[e,f,e,f,i,j,i,j],e=i,f=j);for(var t=0,u=b.length;u>t;t++){var v=b[t];if("M"==v[0])g=k=v[1],h=l=v[2];else{"C"==v[0]?(o=[g,h].concat(v.slice(1)),g=o[6],h=o[7]):(o=[g,h,g,h,k,l,k,l],g=k,h=l);var w=m(n,o,d);if(d)p+=w;else{for(var x=0,y=w.length;y>x;x++)w[x].segment1=q,w[x].segment2=t,w[x].bez1=n,w[x].bez2=o;p=p.concat(w)}}}}}return p}function o(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+H+this.y+H+this.width+" × "+this.height}function q(a,b,c,d,e,f){function g(a){return((l*a+k)*a+j)*a}function h(a,b){var c=i(a,b);return((o*c+n)*c+m)*c}function i(a,b){var c,d,e,f,h,i;for(e=a,i=0;8>i;i++){if(f=g(e)-a,Q(f)<b)return e;if(h=(3*l*e+2*k)*e+j,Q(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),Q(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function r(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[z](e)&&(d[_(e)]=a[e],c.push(_(e)));c.sort(lb)}this.anim=d,this.top=c[c.length-1],this.percents=c}function s(a,d,e,f,g,h){e=_(e);var i,j,k,l,m,n,p=a.ms,r={},s={},t={};if(f)for(v=0,x=ic.length;x>v;v++){var u=ic[v];if(u.el.id==d.id&&u.anim==a){u.percent!=e?(ic.splice(v,1),k=1):j=u,d.attr(u.totalOrigin);break}}else f=+s;for(var v=0,x=a.percents.length;x>v;v++){if(a.percents[v]==e||a.percents[v]>f*a.top){e=a.percents[v],m=a.percents[v-1]||0,p=p/a.top*(e-m),l=a.percents[v+1],i=a.anim[e];break}f&&d.attr(a.anim[a.percents[v]])}if(i){if(j)j.initstatus=f,j.start=new Date-j.ms*f;else{for(var y in i)if(i[z](y)&&(db[z](y)||d.paper.customAttributes[z](y)))switch(r[y]=d.attr(y),null==r[y]&&(r[y]=cb[y]),s[y]=i[y],db[y]){case T:t[y]=(s[y]-r[y])/p;break;case"colour":r[y]=c.getRGB(r[y]);var A=c.getRGB(s[y]);t[y]={r:(A.r-r[y].r)/p,g:(A.g-r[y].g)/p,b:(A.b-r[y].b)/p};break;case"path":var B=Kb(r[y],s[y]),C=B[1];for(r[y]=B[0],t[y]=[],v=0,x=r[y].length;x>v;v++){t[y][v]=[0];for(var D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(C[v][D]-r[y][v][D])/p}break;case"transform":var G=d._,H=Pb(G[y],s[y]);if(H)for(r[y]=H.from,s[y]=H.to,t[y]=[],t[y].real=!0,v=0,x=r[y].length;x>v;v++)for(t[y][v]=[r[y][v][0]],D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(s[y][v][D]-r[y][v][D])/p;else{var K=d.matrix||new o,L={_:{transform:G.transform},getBBox:function(){return d.getBBox(1)}};r[y]=[K.a,K.b,K.c,K.d,K.e,K.f],Nb(L,s[y]),s[y]=L._.transform,t[y]=[(L.matrix.a-K.a)/p,(L.matrix.b-K.b)/p,(L.matrix.c-K.c)/p,(L.matrix.d-K.d)/p,(L.matrix.e-K.e)/p,(L.matrix.f-K.f)/p]}break;case"csv":var M=I(i[y])[J](w),N=I(r[y])[J](w);if("clip-rect"==y)for(r[y]=N,t[y]=[],v=N.length;v--;)t[y][v]=(M[v]-r[y][v])/p;s[y]=M;break;default:for(M=[][E](i[y]),N=[][E](r[y]),t[y]=[],v=d.paper.customAttributes[y].length;v--;)t[y][v]=((M[v]||0)-(N[v]||0))/p}var O=i.easing,P=c.easing_formulas[O];if(!P)if(P=I(O).match(Z),P&&5==P.length){var Q=P;P=function(a){return q(a,+Q[1],+Q[2],+Q[3],+Q[4],p)}}else P=nb;if(n=i.start||a.start||+new Date,u={anim:a,percent:e,timestamp:n,start:n+(a.del||0),status:0,initstatus:f||0,stop:!1,ms:p,easing:P,from:r,diff:t,to:s,el:d,callback:i.callback,prev:m,next:l,repeat:h||a.times,origin:d.attr(),totalOrigin:g},ic.push(u),f&&!j&&!k&&(u.stop=!0,u.start=new Date-p*f,1==ic.length))return kc();k&&(u.start=new Date-u.ms*f),1==ic.length&&jc(kc)}b("raphael.anim.start."+d.id,d,a)}}function t(a){for(var b=0;b<ic.length;b++)ic[b].el.paper==a&&ic.splice(b--,1)}c.version="2.1.0",c.eve=b;var u,v,w=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},y=/\{(\d+)\}/g,z="hasOwnProperty",A={doc:document,win:a},B={was:Object.prototype[z].call(A.win,"Raphael"),is:A.win.Raphael},C=function(){this.ca=this.customAttributes={}},D="apply",E="concat",F="ontouchstart"in A.win||A.win.DocumentTouch&&A.doc instanceof DocumentTouch,G="",H=" ",I=String,J="split",K="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[J](H),L={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},M=I.prototype.toLowerCase,N=Math,O=N.max,P=N.min,Q=N.abs,R=N.pow,S=N.PI,T="number",U="string",V="array",W=Object.prototype.toString,X=(c._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=N.round,_=parseFloat,ab=parseInt,bb=I.prototype.toUpperCase,cb=c._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},db=c._availableAnimAttrs={blur:T,"clip-rect":"csv",cx:T,cy:T,fill:"colour","fill-opacity":T,"font-size":T,height:T,opacity:T,path:"path",r:T,rx:T,ry:T,stroke:"colour","stroke-opacity":T,"stroke-width":T,transform:"transform",width:T,x:T,y:T},eb=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,fb={hs:1,rg:1},gb=/,?([achlmqrstvxz]),?/gi,hb=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ib=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,jb=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,kb=(c._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),lb=function(a,b){return _(a)-_(b)},mb=function(){},nb=function(a){return a},ob=c._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},pb=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},qb=c._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return pb(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return pb(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return ob(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return ob(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return ob(b.x,b.y,b.width,b.height)},set:function(a){var b=a._getBBox();return ob(b.x,b.y,b.width,b.height)}},rb=c.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=Kb(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(c._g=A,c.type=A.win.SVGAngle||A.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==c.type){var sb,tb=A.doc.createElement("div");if(tb.innerHTML='<v:shape adj="1"/>',sb=tb.firstChild,sb.style.behavior="url(#default#VML)",!sb||"object"!=typeof sb.adj)return c.type=G;tb=null}c.svg=!(c.vml="VML"==c.type),c._Paper=C,c.fn=v=C.prototype=c.prototype,c._id=0,c._oid=0,c.is=function(a,b){return b=M.call(b),"finite"==b?!Y[z](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||W.call(a).slice(8,-1).toLowerCase()==b},c.angle=function(a,b,d,e,f,g){if(null==f){var h=a-d,i=b-e;return h||i?(180+180*N.atan2(-i,-h)/S+360)%360:0}return c.angle(a,b,f,g)-c.angle(d,e,f,g)},c.rad=function(a){return a%360*S/180},c.deg=function(a){return 180*a/S%360},c.snapTo=function(a,b,d){if(d=c.is(d,"finite")?d:10,c.is(a,V)){for(var e=a.length;e--;)if(Q(a[e]-b)<=d)return a[e]}else{a=+a;var f=b%a;if(d>f)return b-f;if(f>a-d)return b-f+a}return b};c.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=16*N.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});c.setWindow=function(a){b("raphael.setWindow",c,A.win,a),A.win=a,A.doc=A.win.document,c._engine.initWin&&c._engine.initWin(A.win)};var ub=function(a){if(c.vml){var b,d=/^\s+|\s+$/g;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),b=e.body}catch(g){b=createPopup().document.body}var h=b.createTextRange();ub=f(function(a){try{b.style.color=I(a).replace(d,G);var c=h.queryCommandValue("ForeColor");return c=(255&c)<<16|65280&c|(16711680&c)>>>16,"#"+("000000"+c.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=A.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",A.doc.body.appendChild(i),ub=f(function(a){return i.style.color=a,A.doc.defaultView.getComputedStyle(i,G).getPropertyValue("color")})}return ub(a)},vb=function(){return"hsb("+[this.h,this.s,this.b]+")"},wb=function(){return"hsl("+[this.h,this.s,this.l]+")"},xb=function(){return this.hex},yb=function(a,b,d){if(null==b&&c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(d=a.b,b=a.g,a=a.r),null==b&&c.is(a,U)){var e=c.getRGB(a);a=e.r,b=e.g,d=e.b}return(a>1||b>1||d>1)&&(a/=255,b/=255,d/=255),[a,b,d]},zb=function(a,b,d,e){a*=255,b*=255,d*=255;var f={r:a,g:b,b:d,hex:c.rgb(a,b,d),toString:xb};return c.is(e,"finite")&&(f.opacity=e),f};c.color=function(a){var b;return c.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=c.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):c.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=c.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(c.is(a,"string")&&(a=c.getRGB(a)),c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=c.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=c.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=xb,a},c.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Q(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],zb(e,f,g,d)},c.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-Q(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],zb(e,f,g,d)},c.rgb2hsb=function(a,b,c){c=yb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=O(a,b,c),g=f-P(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:vb}},c.rgb2hsl=function(a,b,c){c=yb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=O(a,b,c),h=P(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:wb}},c._path2string=function(){return this.join(",").replace(gb,"$1")};c._preload=function(a,b){var c=A.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,A.doc.body.removeChild(this)},c.onerror=function(){A.doc.body.removeChild(this)},A.doc.body.appendChild(c),c.src=a};c.getRGB=f(function(a){if(!a||(a=I(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!(fb[z](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=ub(a));var b,d,e,f,h,i,j=a.match(X);return j?(j[2]&&(e=ab(j[2].substring(5),16),d=ab(j[2].substring(3,5),16),b=ab(j[2].substring(1,3),16)),j[3]&&(e=ab((h=j[3].charAt(3))+h,16),d=ab((h=j[3].charAt(2))+h,16),b=ab((h=j[3].charAt(1))+h,16)),j[4]&&(i=j[4][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),"rgba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100)),j[5]?(i=j[5][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsb2rgb(b,d,e,f)):j[6]?(i=j[6][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsla"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsl2rgb(b,d,e,f)):(j={r:b,g:d,b:e,toString:g},j.hex="#"+(16777216|e|d<<8|b<<16).toString(16).slice(1),c.is(f,"finite")&&(j.opacity=f),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},c),c.hsb=f(function(a,b,d){return c.hsb2rgb(a,b,d).hex}),c.hsl=f(function(a,b,d){return c.hsl2rgb(a,b,d).hex}),c.rgb=f(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),c.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},c.getColor.reset=function(){delete this.start},c.parsePathString=function(a){if(!a)return null;var b=Ab(a);if(b.arr)return Cb(b.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return c.is(a,V)&&c.is(a[0],V)&&(e=Cb(a)),e.length||I(a).replace(hb,function(a,b,c){var f=[],g=b.toLowerCase();if(c.replace(jb,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(e.push([b][E](f.splice(0,2))),g="l",b="m"==b?"l":"L"),"r"==g)e.push([b][E](f));else for(;f.length>=d[g]&&(e.push([b][E](f.splice(0,d[g]))),d[g]););}),e.toString=c._path2string,b.arr=Cb(e),e},c.parseTransformString=f(function(a){if(!a)return null;var b=[];return c.is(a,V)&&c.is(a[0],V)&&(b=Cb(a)),b.length||I(a).replace(ib,function(a,c,d){{var e=[];M.call(c)}d.replace(jb,function(a,b){b&&e.push(+b)}),b.push([c][E](e))}),b.toString=c._path2string,b});var Ab=function(a){var b=Ab.ps=Ab.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[z](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}),b[a]};c.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=R(j,3),l=R(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*N.atan2(q-s,r-t)/S;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},c.bezierBBox=function(a,b,d,e,f,g,h,i){c.is(a,"array")||(a=[a,b,d,e,f,g,h,i]);var j=Jb.apply(null,a);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},c.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},c.isBBoxIntersect=function(a,b){var d=c.isPointInsideBBox;return d(b,a.x,a.y)||d(b,a.x2,a.y)||d(b,a.x,a.y2)||d(b,a.x2,a.y2)||d(a,b.x,b.y)||d(a,b.x2,b.y)||d(a,b.x,b.y2)||d(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)},c.pathIntersection=function(a,b){return n(a,b)},c.pathIntersectionNumber=function(a,b){return n(a,b,1)},c.isPointInsidePath=function(a,b,d){var e=c.pathBBox(a);return c.isPointInsideBBox(e,b,d)&&n(a,[["M",b,d],["H",e.x2+10]],1)%2==1},c._removedFactory=function(a){return function(){b("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var Bb=c.pathBBox=function(a){var b=Ab(a);if(b.bbox)return d(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Kb(a);for(var c,e=0,f=0,g=[],h=[],i=0,j=a.length;j>i;i++)if(c=a[i],"M"==c[0])e=c[1],f=c[2],g.push(e),h.push(f);else{var k=Jb(e,f,c[1],c[2],c[3],c[4],c[5],c[6]);g=g[E](k.min.x,k.max.x),h=h[E](k.min.y,k.max.y),e=c[5],f=c[6]}var l=P[D](0,g),m=P[D](0,h),n=O[D](0,g),o=O[D](0,h),p=n-l,q=o-m,r={x:l,y:m,x2:n,y2:o,width:p,height:q,cx:l+p/2,cy:m+q/2};return b.bbox=d(r),r},Cb=function(a){var b=d(a);return b.toString=c._path2string,b},Db=c._pathToRelative=function(a){var b=Ab(a);if(b.rel)return Cb(b.rel);c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a));var d=[],e=0,f=0,g=0,h=0,i=0;"M"==a[0][0]&&(e=a[0][1],f=a[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=a.length;k>j;j++){var l=d[j]=[],m=a[j];if(m[0]!=M.call(m[0]))switch(l[0]=M.call(m[0]),l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;o>n;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}else{l=d[j]=[],"m"==m[0]&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;q>p;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}return d.toString=c._path2string,b.rel=Cb(d),d},Eb=c._pathToAbsolute=function(a){var b=Ab(a);if(b.abs)return Cb(b.abs);if(c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a)),!a||!a.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,i=0,j=0;"M"==a[0][0]&&(e=+a[0][1],f=+a[0][2],g=e,i=f,j++,d[0]=["M",e,f]);for(var k,l,m=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),n=j,o=a.length;o>n;n++){if(d.push(k=[]),l=a[n],l[0]!=bb.call(l[0]))switch(k[0]=bb.call(l[0]),k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":for(var p=[e,f][E](l.slice(1)),q=2,r=p.length;r>q;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[E](h(p,m));break;case"M":g=+l[1]+e,i=+l[2]+f;default:for(q=1,r=l.length;r>q;q++)k[q]=+l[q]+(q%2?e:f)}else if("R"==l[0])p=[e,f][E](l.slice(1)),d.pop(),d=d[E](h(p,m)),k=["R"][E](l.slice(-2));else for(var s=0,t=l.length;t>s;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=i;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],i=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}return d.toString=c._path2string,b.abs=Cb(d),d},Fb=function(a,b,c,d){return[a,b,c,d,c,d]},Gb=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Hb=function(a,b,c,d,e,g,h,i,j,k){var l,m=120*S/180,n=S/180*(+e||0),o=[],p=f(function(a,b,c){var d=a*N.cos(c)-b*N.sin(c),e=a*N.sin(c)+b*N.cos(c);return{x:d,y:e}});if(k)y=k[0],z=k[1],w=k[2],x=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(N.cos(S/180*e),N.sin(S/180*e),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(d*d);s>1&&(s=N.sqrt(s),c=s*c,d=s*d);var t=c*c,u=d*d,v=(g==h?-1:1)*N.sqrt(Q((t*u-t*r*r-u*q*q)/(t*r*r+u*q*q))),w=v*c*r/d+(a+i)/2,x=v*-d*q/c+(b+j)/2,y=N.asin(((b-x)/d).toFixed(9)),z=N.asin(((j-x)/d).toFixed(9));y=w>a?S-y:y,z=w>i?S-z:z,0>y&&(y=2*S+y),0>z&&(z=2*S+z),h&&y>z&&(y-=2*S),!h&&z>y&&(z-=2*S)}var A=z-y;if(Q(A)>m){var B=z,C=i,D=j;z=y+m*(h&&z>y?1:-1),i=w+c*N.cos(z),j=x+d*N.sin(z),o=Hb(i,j,c,d,e,0,h,C,D,[z,B,w,x])}A=z-y;var F=N.cos(y),G=N.sin(y),H=N.cos(z),I=N.sin(z),K=N.tan(A/4),L=4/3*c*K,M=4/3*d*K,O=[a,b],P=[a+L*G,b-M*F],R=[i+L*I,j-M*H],T=[i,j];if(P[0]=2*O[0]-P[0],P[1]=2*O[1]-P[1],k)return[P,R,T][E](o);o=[P,R,T][E](o).join()[J](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},Ib=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:R(j,3)*a+3*R(j,2)*i*c+3*j*i*i*e+R(i,3)*g,y:R(j,3)*b+3*R(j,2)*i*d+3*j*i*i*f+R(i,3)*h}},Jb=f(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ib(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ib(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ib(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ib(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:P[D](0,p),y:P[D](0,o)},max:{x:O[D](0,p),y:O[D](0,o)}}}),Kb=c._path2curve=f(function(a,b){var c=!b&&Ab(a);if(!b&&c.curve)return Cb(c.curve);for(var d=Eb(a),e=b&&Eb(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(a,b,c){var d,e;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][E](Hb[D](0,[b.x,b.y][E](a.slice(1))));break;case"S":"C"==c||"S"==c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y),a=["C",d,e][E](a.slice(1));break;case"T":"Q"==c||"T"==c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y),a=["C"][E](Gb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][E](Gb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][E](Fb(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][E](Fb(b.x,b.y,a[1],b.y));break;case"V":a=["C"][E](Fb(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][E](Fb(b.x,b.y,b.X,b.Y))}return a}),i=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)k[b]="A",e&&(l[b]="A"),a.splice(b++,0,["C"][E](c.splice(0,6)));a.splice(b,1),p=O(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],p=O(d.length,e&&e.length||0))},k=[],l=[],m="",n="",o=0,p=O(d.length,e&&e.length||0);p>o;o++){d[o]&&(m=d[o][0]),"C"!=m&&(k[o]=m,o&&(n=k[o-1])),d[o]=h(d[o],f,n),"A"!=k[o]&&"C"==m&&(k[o]="C"),i(d,o),e&&(e[o]&&(m=e[o][0]),"C"!=m&&(l[o]=m,o&&(n=l[o-1])),e[o]=h(e[o],g,n),"A"!=l[o]&&"C"==m&&(l[o]="C"),i(e,o)),j(d,e,f,g,o),j(e,d,g,f,o);var q=d[o],r=e&&e[o],s=q.length,t=e&&r.length;f.x=q[s-2],f.y=q[s-1],f.bx=_(q[s-4])||f.x,f.by=_(q[s-3])||f.y,g.bx=e&&(_(r[t-4])||g.x),g.by=e&&(_(r[t-3])||g.y),g.x=e&&r[t-2],g.y=e&&r[t-1]}return e||(c.curve=Cb(d)),e?[d,e]:d},null,Cb),Lb=(c._parseDots=f(function(a){for(var b=[],d=0,e=a.length;e>d;d++){var f={},g=a[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=c.getRGB(g[1]),f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),b.push(f)}for(d=1,e=b.length-1;e>d;d++)if(!b[d].offset){for(var h=_(b[d-1].offset||0),i=0,j=d+1;e>j;j++)if(b[j].offset){i=b[j].offset;break}i||(i=100,j=e),i=_(i);for(var k=(i-h)/(j-d+1);j>d;d++)h+=k,b[d].offset=h+"%"}return b}),c._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),Mb=(c._tofront=function(a,b){b.top!==a&&(Lb(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},c._toback=function(a,b){b.bottom!==a&&(Lb(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},c._insertafter=function(a,b,c){Lb(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},c._insertbefore=function(a,b,c){Lb(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},c.toMatrix=function(a,b){var c=Bb(a),d={_:{transform:G},getBBox:function(){return c}};return Nb(d,b),d.matrix}),Nb=(c.transformPath=function(a,b){return rb(a,Mb(a,b))},c._extractTransform=function(a,b){if(null==b)return a._.transform;b=I(b).replace(/\.{3}|\u2026/g,a._.transform||G);var d=c.parseTransformString(b),e=0,f=0,g=0,h=1,i=1,j=a._,k=new o;if(j.transform=d||[],d)for(var l=0,m=d.length;m>l;l++){var n,p,q,r,s,t=d[l],u=t.length,v=I(t[0]).toLowerCase(),w=t[0]!=v,x=w?k.invert():0;"t"==v&&3==u?w?(n=x.x(0,0),p=x.y(0,0),q=x.x(t[1],t[2]),r=x.y(t[1],t[2]),k.translate(q-n,r-p)):k.translate(t[1],t[2]):"r"==v?2==u?(s=s||a.getBBox(1),k.rotate(t[1],s.x+s.width/2,s.y+s.height/2),e+=t[1]):4==u&&(w?(q=x.x(t[2],t[3]),r=x.y(t[2],t[3]),k.rotate(t[1],q,r)):k.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==v?2==u||3==u?(s=s||a.getBBox(1),k.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(w?(q=x.x(t[3],t[4]),r=x.y(t[3],t[4]),k.scale(t[1],t[2],q,r)):k.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&k.add(t[1],t[2],t[3],t[4],t[5],t[6]),j.dirtyT=1,a.matrix=k}a.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,1==h&&1==i&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1}),Ob=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pb=c._equaliseTransform=function(a,b){b=I(b).replace(/\.{3}|\u2026/g,a),a=c.parseTransformString(a)||[],b=c.parseTransformString(b)||[];for(var d,e,f,g,h=O(a.length,b.length),i=[],j=[],k=0;h>k;k++){if(f=a[k]||Ob(b[k]),g=b[k]||Ob(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;for(i[k]=[],j[k]=[],d=0,e=O(f.length,g.length);e>d;d++)d in f&&(i[k][d]=f[d]),d in g&&(j[k][d]=g[d])}return{from:i,to:j}};c._getContainer=function(a,b,d,e){var f;return f=null!=e||c.is(a,"object")?a:A.doc.getElementById(a),null!=f?f.tagName?null==b?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:b,height:d}:{container:1,x:a,y:b,width:d,height:e}:void 0},c.pathToRelative=Db,c._engine={},c.path2curve=Kb,c.matrix=function(a,b,c,d,e,f){return new o(a,b,c,d,e,f)},function(a){function b(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var c=N.sqrt(b(a));a[0]&&(a[0]/=c),a[1]&&(a[1]/=c)}a.add=function(a,b,c,d,e,f){var g,h,i,j,k=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],m=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof o&&(m=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),g=0;3>g;g++)for(h=0;3>h;h++){for(j=0,i=0;3>i;i++)j+=l[g][i]*m[i][h];k[g][h]=j}this.a=k[0][0],this.b=k[1][0],this.c=k[0][1],this.d=k[1][1],this.e=k[0][2],this.f=k[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new o(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,b,d){a=c.rad(a),b=b||0,d=d||0;var e=+N.cos(a).toFixed(9),f=+N.sin(a).toFixed(9);this.add(e,f,-f,e,b,d),this.add(1,0,0,1,-b,-d)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[I.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return c.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=N.sqrt(b(e[0])),d(e[0]),a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear],a.scaley=N.sqrt(b(e[1])),d(e[1]),a.shear/=a.scaley;var f=-e[0][1],g=e[1][1];return 0>g?(a.rotate=c.deg(N.acos(g)),0>f&&(a.rotate=360-a.rotate)):a.rotate=c.deg(N.asin(f)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[J]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:G)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:G)+(b.rotate?"r"+[b.rotate,0,0]:G)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var Qb=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);v.safari="Apple Computer, Inc."==navigator.vendor&&(Qb&&Qb[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Qb&&Qb[1]<8?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:mb;for(var Rb=function(){this.returnValue=!1},Sb=function(){return this.originalEvent.preventDefault()},Tb=function(){this.cancelBubble=!0},Ub=function(){return this.originalEvent.stopPropagation()},Vb=function(a){var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,c=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;return{x:a.clientX+c,y:a.clientY+b}},Wb=function(){return A.doc.addEventListener?function(a,b,c,d){var e=function(a){var b=Vb(a);return c.call(d,a,b.x,b.y)};if(a.addEventListener(b,e,!1),F&&L[b]){var f=function(b){for(var e=Vb(b),f=b,g=0,h=b.targetTouches&&b.targetTouches.length;h>g;g++)if(b.targetTouches[g].target==a){b=b.targetTouches[g],b.originalEvent=f,b.preventDefault=Sb,b.stopPropagation=Ub;break}return c.call(d,b,e.x,e.y)};a.addEventListener(L[b],f,!1)}return function(){return a.removeEventListener(b,e,!1),F&&L[b]&&a.removeEventListener(L[b],f,!1),!0}}:A.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||A.win.event;var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,e=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Rb,a.stopPropagation=a.stopPropagation||Tb,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0
};return f}:void 0}(),Xb=[],Yb=function(a){for(var c,d=a.clientX,e=a.clientY,f=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,g=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,h=Xb.length;h--;){if(c=Xb[h],F&&a.touches){for(var i,j=a.touches.length;j--;)if(i=a.touches[j],i.identifier==c.el._drag.id){d=i.clientX,e=i.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var k,l=c.el.node,m=l.nextSibling,n=l.parentNode,o=l.style.display;A.win.opera&&n.removeChild(l),l.style.display="none",k=c.el.paper.getElementByPoint(d,e),l.style.display=o,A.win.opera&&(m?n.insertBefore(l,m):n.appendChild(l)),k&&b("raphael.drag.over."+c.el.id,c.el,k),d+=g,e+=f,b("raphael.drag.move."+c.el.id,c.move_scope||c.el,d-c.el._drag.x,e-c.el._drag.y,d,e,a)}},Zb=function(a){c.unmousemove(Yb).unmouseup(Zb);for(var d,e=Xb.length;e--;)d=Xb[e],d.el._drag={},b("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);Xb=[]},$b=c.el={},_b=K.length;_b--;)!function(a){c[a]=$b[a]=function(b,d){return c.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Wb(this.shape||this.node||A.doc,a,b,d||this)})),this},c["un"+a]=$b["un"+a]=function(b){for(var d=this.events||[],e=d.length;e--;)d[e].name!=a||!c.is(b,"undefined")&&d[e].f!=b||(d[e].unbind(),d.splice(e,1),!d.length&&delete this.events);return this}}(K[_b]);$b.data=function(a,d){var e=kb[this.id]=kb[this.id]||{};if(0==arguments.length)return e;if(1==arguments.length){if(c.is(a,"object")){for(var f in a)a[z](f)&&this.data(f,a[f]);return this}return b("raphael.data.get."+this.id,this,e[a],a),e[a]}return e[a]=d,b("raphael.data.set."+this.id,this,d,a),this},$b.removeData=function(a){return null==a?kb[this.id]={}:kb[this.id]&&delete kb[this.id][a],this},$b.getData=function(){return d(kb[this.id]||{})},$b.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},$b.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var ac=[];$b.drag=function(a,d,e,f,g,h){function i(i){(i.originalEvent||i).preventDefault();var j=i.clientX,k=i.clientY,l=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,m=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;if(this._drag.id=i.identifier,F&&i.touches)for(var n,o=i.touches.length;o--;)if(n=i.touches[o],this._drag.id=n.identifier,n.identifier==this._drag.id){j=n.clientX,k=n.clientY;break}this._drag.x=j+m,this._drag.y=k+l,!Xb.length&&c.mousemove(Yb).mouseup(Zb),Xb.push({el:this,move_scope:f,start_scope:g,end_scope:h}),d&&b.on("raphael.drag.start."+this.id,d),a&&b.on("raphael.drag.move."+this.id,a),e&&b.on("raphael.drag.end."+this.id,e),b("raphael.drag.start."+this.id,g||f||this,i.clientX+m,i.clientY+l,i)}return this._drag={},ac.push({el:this,start:i}),this.mousedown(i),this},$b.onDragOver=function(a){a?b.on("raphael.drag.over."+this.id,a):b.unbind("raphael.drag.over."+this.id)},$b.undrag=function(){for(var a=ac.length;a--;)ac[a].el==this&&(this.unmousedown(ac[a].start),ac.splice(a,1),b.unbind("raphael.drag.*."+this.id));!ac.length&&c.unmousemove(Yb).unmouseup(Zb),Xb=[]},v.circle=function(a,b,d){var e=c._engine.circle(this,a||0,b||0,d||0);return this.__set__&&this.__set__.push(e),e},v.rect=function(a,b,d,e,f){var g=c._engine.rect(this,a||0,b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.ellipse=function(a,b,d,e){var f=c._engine.ellipse(this,a||0,b||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},v.path=function(a){a&&!c.is(a,U)&&!c.is(a[0],V)&&(a+=G);var b=c._engine.path(c.format[D](c,arguments),this);return this.__set__&&this.__set__.push(b),b},v.image=function(a,b,d,e,f){var g=c._engine.image(this,a||"about:blank",b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.text=function(a,b,d){var e=c._engine.text(this,a||0,b||0,I(d));return this.__set__&&this.__set__.push(e),e},v.set=function(a){!c.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new mc(a);return this.__set__&&this.__set__.push(b),b.paper=this,b.type="set",b},v.setStart=function(a){this.__set__=a||this.set()},v.setFinish=function(){var a=this.__set__;return delete this.__set__,a},v.setSize=function(a,b){return c._engine.setSize.call(this,a,b)},v.setViewBox=function(a,b,d,e,f){return c._engine.setViewBox.call(this,a,b,d,e,f)},v.top=v.bottom=null,v.raphael=c;var bc=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(A.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(A.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};v.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=A.doc.elementFromPoint(a,b);if(A.win.opera&&"svg"==e.tagName){var f=bc(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},v.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(d){c.isBBoxIntersect(d.getBBox(),a)&&b.push(d)}),b},v.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},v.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===!1)return this;c=c.next}return this},v.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c},$b.isPointInside=function(a,b){var d=this.realPath=qb[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(d=c.transformPath(d,this.attr("transform"))),c.isPointInsidePath(d,a,b)},$b.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=qb[this.type](this),b.bboxwt=Bb(this.realPath),b.bboxwt.toString=p,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=qb[this.type](this)),b.bbox=Bb(rb(this.realPath,this.matrix)),b.bbox.toString=p,b.dirty=b.dirtyT=0),b.bbox)},$b.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},$b.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||qb[this.type](this);f=this.matrix?rb(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cc=function(a,b,d,e,f,g,h,i,l){return null==l?j(a,b,d,e,f,g,h,i):c.findDotsAtSegment(a,b,d,e,f,g,h,i,k(a,b,d,e,f,g,h,i,l))},dc=function(a,b){return function(d,e,f){d=Kb(d);for(var g,h,i,j,k,l="",m={},n=0,o=0,p=d.length;p>o;o++){if(i=d[o],"M"==i[0])g=+i[1],h=+i[2];else{if(j=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6]),n+j>e){if(b&&!m.start){if(k=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],f)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!a&&!b)return k=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=j,g=+i[5],h=+i[6]}l+=i.shift()+i}return m.end=l,k=a?n:b?m:c.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},ec=dc(1),fc=dc(),gc=dc(0,1);c.getTotalLength=ec,c.getPointAtLength=fc,c.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return gc(a,b).end;var d=gc(a,c,1);return b?gc(d,b).end:d},$b.getTotalLength=function(){var a=this.getPath();if(a)return this.node.getTotalLength?this.node.getTotalLength():ec(a)},$b.getPointAtLength=function(a){var b=this.getPath();if(b)return fc(b,a)},$b.getPath=function(){var a,b=c._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return b&&(a=b(this)),a},$b.getSubpath=function(a,b){var d=this.getPath();if(d)return c.getSubpath(d,a,b)};var hc=c.easing_formulas={linear:function(a){return a},"<":function(a){return R(a,1.7)},">":function(a){return R(a,.48)},"<>":function(a){var b=.48-a/1.04,c=N.sqrt(.1734+b*b),d=c-b,e=R(Q(d),1/3)*(0>d?-1:1),f=-c-b,g=R(Q(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:R(2,-10*a)*N.sin(2*(a-.075)*S/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};hc.easeIn=hc["ease-in"]=hc["<"],hc.easeOut=hc["ease-out"]=hc[">"],hc.easeInOut=hc["ease-in-out"]=hc["<>"],hc["back-in"]=hc.backIn,hc["back-out"]=hc.backOut;var ic=[],jc=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,16)},kc=function(){for(var a=+new Date,d=0;d<ic.length;d++){var e=ic[d];if(!e.el.removed&&!e.paused){var f,g,h=a-e.start,i=e.ms,j=e.easing,k=e.from,l=e.diff,m=e.to,n=(e.t,e.el),o={},p={};if(e.initstatus?(h=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*i,e.status=e.initstatus,delete e.initstatus,e.stop&&ic.splice(d--,1)):e.status=(e.prev+(e.percent-e.prev)*(h/i))/e.anim.top,!(0>h))if(i>h){var q=j(h/i);for(var r in k)if(k[z](r)){switch(db[r]){case T:f=+k[r]+q*i*l[r];break;case"colour":f="rgb("+[lc($(k[r].r+q*i*l[r].r)),lc($(k[r].g+q*i*l[r].g)),lc($(k[r].b+q*i*l[r].b))].join(",")+")";break;case"path":f=[];for(var t=0,u=k[r].length;u>t;t++){f[t]=[k[r][t][0]];for(var v=1,w=k[r][t].length;w>v;v++)f[t][v]=+k[r][t][v]+q*i*l[r][t][v];f[t]=f[t].join(H)}f=f.join(H);break;case"transform":if(l[r].real)for(f=[],t=0,u=k[r].length;u>t;t++)for(f[t]=[k[r][t][0]],v=1,w=k[r][t].length;w>v;v++)f[t][v]=k[r][t][v]+q*i*l[r][t][v];else{var x=function(a){return+k[r][a]+q*i*l[r][a]};f=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if("clip-rect"==r)for(f=[],t=4;t--;)f[t]=+k[r][t]+q*i*l[r][t];break;default:var y=[][E](k[r]);for(f=[],t=n.paper.customAttributes[r].length;t--;)f[t]=+y[t]+q*i*l[r][t]}o[r]=f}n.attr(o),function(a,c,d){setTimeout(function(){b("raphael.anim.frame."+a,c,d)})}(n.id,n,e.anim)}else{if(function(a,d,e){setTimeout(function(){b("raphael.anim.frame."+d.id,d,e),b("raphael.anim.finish."+d.id,d,e),c.is(a,"function")&&a.call(d)})}(e.callback,n,e.anim),n.attr(m),ic.splice(d--,1),e.repeat>1&&!e.next){for(g in m)m[z](g)&&(p[g]=e.totalOrigin[g]);e.el.attr(p),s(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&s(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}c.svg&&n&&n.paper&&n.paper.safari(),ic.length&&jc(kc)},lc=function(a){return a>255?255:0>a?0:a};$b.animateWith=function(a,b,d,e,f,g){var h=this;if(h.removed)return g&&g.call(h),h;var i=d instanceof r?d:c.animation(d,e,f,g);s(i,h,i.percents[0],null,h.attr());for(var j=0,k=ic.length;k>j;j++)if(ic[j].anim==b&&ic[j].el==a){ic[k-1].start=ic[j].start;break}return h},$b.onAnimation=function(a){return a?b.on("raphael.anim.frame."+this.id,a):b.unbind("raphael.anim.frame."+this.id),this},r.prototype.delay=function(a){var b=new r(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},r.prototype.repeat=function(a){var b=new r(this.anim,this.ms);return b.del=this.del,b.times=N.floor(O(a,0))||1,b},c.animation=function(a,b,d,e){if(a instanceof r)return a;(c.is(d,"function")||!d)&&(e=e||d||null,d=null),a=Object(a),b=+b||0;var f,g,h={};for(g in a)a[z](g)&&_(g)!=g&&_(g)+"%"!=g&&(f=!0,h[g]=a[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new r({100:h},b)):new r(a,b)},$b.animate=function(a,b,d,e){var f=this;if(f.removed)return e&&e.call(f),f;var g=a instanceof r?a:c.animation(a,b,d,e);return s(g,f,g.percents[0],null,f.attr()),f},$b.setTime=function(a,b){return a&&null!=b&&this.status(a,P(b,a.ms)/a.ms),this},$b.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return s(a,this,-1,P(b,1)),this;for(c=ic.length;c>f;f++)if(d=ic[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e},$b.pause=function(a){for(var c=0;c<ic.length;c++)ic[c].el.id!=this.id||a&&ic[c].anim!=a||b("raphael.anim.pause."+this.id,this,ic[c].anim)!==!1&&(ic[c].paused=!0);return this},$b.resume=function(a){for(var c=0;c<ic.length;c++)if(ic[c].el.id==this.id&&(!a||ic[c].anim==a)){var d=ic[c];b("raphael.anim.resume."+this.id,this,d.anim)!==!1&&(delete d.paused,this.status(d.anim,d.status))}return this},$b.stop=function(a){for(var c=0;c<ic.length;c++)ic[c].el.id!=this.id||a&&ic[c].anim!=a||b("raphael.anim.stop."+this.id,this,ic[c].anim)!==!1&&ic.splice(c--,1);return this},b.on("raphael.remove",t),b.on("raphael.clear",t),$b.toString=function(){return"Raphaël’s object"};var mc=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=$b.constructor&&a[b].constructor!=mc||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},nc=mc.prototype;nc.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],!a||a.constructor!=$b.constructor&&a.constructor!=mc||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},nc.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},nc.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var oc in $b)$b[z](oc)&&(nc[oc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][D](c,b)})}}(oc));return nc.attr=function(a,b){if(a&&c.is(a,V)&&c.is(a[0],"object"))for(var d=0,e=a.length;e>d;d++)this.items[d].attr(a[d]);else for(var f=0,g=this.items.length;g>f;f++)this.items[f].attr(a,b);return this},nc.clear=function(){for(;this.length;)this.pop()},nc.splice=function(a,b){a=0>a?O(this.length+a,0):a,b=O(0,P(this.length-a,b));var c,d=[],e=[],f=[];for(c=2;c<arguments.length;c++)f.push(arguments[c]);for(c=0;b>c;c++)e.push(this[a+c]);for(;c<this.length-a;c++)d.push(this[a+c]);var g=f.length;for(c=0;c<g+d.length;c++)this.items[a+c]=this[a+c]=g>c?f[c]:d[c-g];for(c=this.items.length=this.length-=b-g;this[c];)delete this[c++];return new mc(e)},nc.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},nc.animate=function(a,b,d,e){(c.is(d,"function")||!d)&&(e=d||null);var f,g,h=this.items.length,i=h,j=this;if(!h)return this;e&&(g=function(){!--h&&e.call(j)}),d=c.is(d,U)?d:g;var k=c.animation(a,b,d,g);for(f=this.items[--i].animate(k);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(f,k,k),this.items[i]&&!this.items[i].removed||h--;return this},nc.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},nc.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=P[D](0,a),b=P[D](0,b),c=O[D](0,c),d=O[D](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},nc.clone=function(a){a=this.paper.set();for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},nc.toString=function(){return"Raphaël‘s set"},nc.glow=function(a){var b=this.paper.set();return this.forEach(function(c){var d=c.glow(a);null!=d&&d.forEach(function(a){b.push(a)})}),b},nc.isPointInside=function(a,b){var c=!1;return this.forEach(function(d){return d.isPointInside(a,b)?(c=!0,!1):void 0}),c},c.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[z](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=ab(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[z](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[z](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},v.getFont=function(a,b,d,e){if(e=e||"normal",d=d||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400,c.fonts){var f=c.fonts[a];if(!f){var g=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,G)+"(\\s|$)","i");for(var h in c.fonts)if(c.fonts[z](h)&&g.test(h)){f=c.fonts[h];break}}var i;if(f)for(var j=0,k=f.length;k>j&&(i=f[j],i.face["font-weight"]!=b||i.face["font-style"]!=d&&i.face["font-style"]||i.face["font-stretch"]!=e);j++);return i}},v.print=function(a,b,d,e,f,g,h,i){g=g||"middle",h=O(P(h||0,1),-1),i=O(P(i||1,3),1);var j,k=I(d)[J](G),l=0,m=0,n=G;if(c.is(e,"string")&&(e=this.getFont(e)),e){j=(f||16)/e.face["units-per-em"];for(var o=e.face.bbox[J](w),p=+o[0],q=o[3]-o[1],r=0,s=+o[1]+("baseline"==g?q+ +e.face.descent:q/2),t=0,u=k.length;u>t;t++){if("\n"==k[t])l=0,x=0,m=0,r+=q*i;else{var v=m&&e.glyphs[k[t-1]]||{},x=e.glyphs[k[t]];l+=m?(v.w||e.w)+(v.k&&v.k[k[t]]||0)+e.w*h:0,m=1}x&&x.d&&(n+=c.transformPath(x.d,["t",l*j,r*j,"s",j,j,p,s,"t",(a-p)/j,(b-s)/j]))}}return this.path(n).attr({fill:"#000",stroke:"none"})},v.add=function(a){if(c.is(a,"array"))for(var b,d=this.set(),e=0,f=a.length;f>e;e++)b=a[e]||{},x[z](b.type)&&d.push(this[b.type]().attr(b));return d},c.format=function(a,b){var d=c.is(b,V)?[0][E](b):arguments;return a&&c.is(a,U)&&d.length-1&&(a=a.replace(y,function(a,b){return null==d[++b]?G:d[b]})),a||G},c.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),c.ninja=function(){return B.was?A.win.Raphael=B.is:delete Raphael,c},c.st=nc,function(a,b,d){function e(){/in/.test(a.readyState)?setTimeout(e,9):c.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1),a.readyState="complete"},!1),a.readyState="loading"),e()}(document,"DOMContentLoaded"),b.on("raphael.DOMload",function(){u=!0}),function(){if(c.svg){var a="hasOwnProperty",b=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=c.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};c.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[a](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),b(e[f])):d.setAttribute(f,b(e[f])))}else d=c._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(a,e){var j="linear",k=a.id+e,m=.5,n=.5,o=a.node,p=a.paper,r=o.style,s=c._g.doc.getElementById(k);if(!s){if(e=b(e).replace(c._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(c.rad(t)),f.sin(c.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=c._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,\xb0#]/g,"_"),a.gradient&&k!=a.gradient.id&&(p.defs.removeChild(a.gradient),delete a.gradient),!a.gradient){s=q(j+"Gradient",{id:k}),a.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:a.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=b(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y+"-obj"+d.id;c._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=c._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-E*u):(g=E*u,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=c.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-g):(g=0,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:c.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[a](k)&&!p[k]){var F=c._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,c,d){if(c=u[b(c).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=c.length;h--;)g[h]=c[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[a](o)){if(!c._availableAttrs[a](o))continue;var p=f[o];switch(k[o]=p,o){case"blur":d.blur(p);break;case"title":var u=q("title"),w=c._g.doc.createTextNode(p);u.appendChild(w),i.appendChild(u);break;case"href":case"target":var x=i.parentNode;if("a"!=x.tagName.toLowerCase()){var u=q("a");x.insertBefore(u,i),u.appendChild(i),x=u}"target"==o?x.setAttributeNS(n,"show","blank"==p?"new":p):x.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var z=b(p).split(j);if(4==z.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var A=q("clipPath"),B=q("rect");A.id=c.createUUID(),q(B,{x:z[0],y:z[1],width:z[2],height:z[3]}),A.appendChild(B),d.paper.defs.appendChild(A),q(i,{"clip-path":"url(#"+A.id+")"}),d.clip=B}if(!p){var C=i.getAttribute("clip-path");if(C){var D=c._g.doc.getElementById(C.replace(/(^url\(#|\)$)/g,l));D&&D.parentNode.removeChild(D),q(i,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(i,{d:p?k.path=c._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(i.setAttribute(o,p),d._.dirty=1,!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if("rx"==o&&"rect"==d.type)break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":if(i.setAttribute(o,p),d._.dirty=1,!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if("ry"==o&&"rect"==d.type)break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":"image"==d.type&&i.setAttributeNS(n,"href",p);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(p/=g(h(d._.sx),h(d._.sy))||1),d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var E=b(p).match(c._ISURL);if(E){A=q("pattern");var F=q("image");A.id=c.createUUID(),q(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(F,{x:0,y:0,"xlink:href":E[1]}),A.appendChild(F),function(a){c._preload(E[1],function(){var b=this.offsetWidth,c=this.offsetHeight;q(a,{width:b,height:c}),q(F,{width:b,height:c}),d.paper.safari()})}(A),d.paper.defs.appendChild(A),q(i,{fill:"url(#"+A.id+")"}),d.pattern=A,d.pattern&&s(d);break}var G=c.getRGB(p);if(G.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var H=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(H){var I=H.getElementsByTagName("stop");q(I[I.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}}else delete f.gradient,delete k.gradient,!c.is(k.opacity,"undefined")&&c.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!c.is(k["fill-opacity"],"undefined")&&c.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});G[a]("opacity")&&q(i,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=c.getRGB(p),i.setAttribute(o,G.hex),"stroke"==o&&G[a]("opacity")&&q(i,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity}),"stroke"==o&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p);break;case"opacity":k.gradient&&!k[a]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){H=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),H&&(I=H.getElementsByTagName("stop"),q(I[I.length-1],{"stop-opacity":p}));break}default:"font-size"==o&&(p=e(p,10)+"px");var J=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[J]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if("text"==d.type&&(f[a]("text")||f[a]("font")||f[a]("font-size")||f[a]("x")||f[a]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(c._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[a]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=b(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:i*x,x:g.x}),j.appendChild(c._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:i*x,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&c.is(r,"finite")&&q(m[0],{dy:r})}},z=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.matrix=c.matrix(),this.realPath=null,this.paper=b,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},A=c.el;z.prototype=A,A.constructor=z,c._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,c,e){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,c,e]])),this},A.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this},A.translate=function(a,c){return this.removed?this:(a=b(a).split(j),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this.transform(this._.transform.concat([["t",a,c]])),this)},A.transform=function(b){var d=this._;if(null==b)return d.transform;if(c._extractTransform(this,b),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[a]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&a.defs.removeChild(this.gradient),c._tear(this,a),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var b in this)this[b]="function"==typeof this[b]?c._removedFactory(b):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==b)return this._.transform;for(var g=b.split(j),h={},i=0,l=g.length;l>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return l-1?h:h[g[0]]}if(null==d&&c.is(b,"array")){for(h={},i=0,l=b.length;l>i;i++)h[b[i]]=this.attr(b[i]);return h}if(null!=d){var m={};m[b]=d}else null!=b&&c.is(b,"object")&&(m=b);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[a](n)&&m[a](n)&&c.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[a](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;return a.top!=this&&c._tofront(this,a),this},A.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper);this.paper;return this},A.insertAfter=function(a){if(this.removed)return this;
var b=a.node||a[a.length-1].node;return b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),this},A.insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;return b.parentNode.insertBefore(this.node,b),c._insertbefore(this,a,this.paper),this},A.blur=function(a){var b=this;if(0!==+a){var d=q("filter"),e=q("feGaussianBlur");b.attrs.blur=a,d.id=c.createUUID(),q(e,{stdDeviation:+a||1.5}),d.appendChild(e),b.paper.defs.appendChild(d),b._blur=d,q(b.node,{filter:"url(#"+d.id+")"})}else b._blur&&(b._blur.parentNode.removeChild(b._blur),delete b._blur,delete b.attrs.blur),b.node.removeAttribute("filter");return b},c._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},c._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},c._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},c._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},c._engine.text=function(a,b,d,e){var f=q("text");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={x:b,y:d,"text-anchor":"middle",text:e,font:c._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},c._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a&&a.container,d=a.x,e=a.y,f=a.width,g=a.height;if(!b)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==b?(i.style.cssText=j+"position:absolute;",c._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:absolute",b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i)),b=new c._Paper,b.width=f,b.height=g,b.canvas=i,b.clear(),b._left=b._top=0,h&&(b.renderfix=function(){}),b.renderfix(),b},c._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=g(c/this.width,d/this.height),j=this.top,l=e?"meet":"xMinYMin";for(null==a?(this._vbSize&&(i=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=i,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:l});i&&j;)h="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":h}),j._.dirty=1,j._.dirtyT=1,j=j.prev;return this._viewBox=[a,b,c,d,!!e],this},c.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}c.top="auto",c.left="auto"},c.prototype.clear=function(){c.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(c._g.doc.createTextNode("Created with Raphaël "+c.version)),a.appendChild(this.desc),a.appendChild(this.defs=q("defs"))},c.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null};var B=c.st;for(var C in A)A[a](C)&&!B[a](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}}(),function(){if(c.vml){var a="hasOwnProperty",b=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=c.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(a){var d=/[ahqstv]/gi,e=c._pathToAbsolute;if(b(a).match(d)&&(e=c._path2curve),d=/[clmz]/g,e==c._pathToAbsolute&&!b(a).match(d)){var g=b(a).replace(q,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=p[b];return c.replace(s,function(a){e&&2==d.length&&(g+=d+p["m"==b?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h,i,j=e(a);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],i=j[k][0].toLowerCase(),"z"==i&&(i="x");for(var m=1,r=h.length;r>m;m++)i+=f(h[m]*u)+(m!=r-1?",":o);g.push(i)}return g.join(n)},y=function(a,b,d){var e=c.matrix();return e.rotate(-a,.5,.5),{dx:e.x(b,d),dy:e.y(b,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q=u/b,r=u/c;if(m.visibility="hidden",b&&c){if(l.coordsize=i(q)+n+i(r),m.rotation=f*(0>b*c?-1:1),f){var s=y(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-q+n+e*-r,k||g.fillsize){var t=l.getElementsByTagName(j);t=t&&t[0],l.removeChild(t),k&&(s=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),t.position=s.dx*o+n+s.dy*o),g.fillsize&&(t.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(t)}m.visibility="visible"}};c.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,c,d){for(var e=b(c).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),r=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),s=e;for(var t in i)i[a](t)&&(m[t]=i[t]);if(q&&(m.path=c._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=x(~b(m.path).toLowerCase().indexOf("r")?c._pathToAbsolute(m.path):m.path),e._.dirty=1,"image"==e.type&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var y=+m.cx,B=+m.cy,D=+m.rx||+m.r||0,E=+m.ry||+m.r||0;l.path=c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((y-D)*u),f((B-E)*u),f((y+D)*u),f((B+E)*u),f(y*u)),e._.dirty=1}if("clip-rect"in i){var G=b(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||c._g.doc.createElement("div"),I=H.style;I.clip=c.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&A(s,i["arrow-start"]),"arrow-end"in i&&A(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j),L=!1;if(K=K&&K[0],!K&&(L=K=F(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var M=b(i.fill).match(c._ISURL);if(M){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=M[1],K.type="tile";var N=e.getBBox(1);K.position=N.x+n+N.y,e._.fillpos=[N.x,N.y],c._preload(M[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=c.getRGB(i.fill).hex,K.src=o,K.type="solid",c.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=b(i.fill).charAt())&&C(s,i.fill,K)&&(m.fill="none",m.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var O=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+c.getRGB(i.fill).o+1||2)-1);O=h(g(O,0),1),K.opacity=O,K.src&&(K.color="none")}l.appendChild(K);var P=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Q=!1;!P&&(Q=P=F("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(P.on=!0),("none"==i.stroke||null===i.stroke||null==P.on||0==i.stroke||0==i["stroke-width"])&&(P.on=!1);var R=c.getRGB(i.stroke);P.on&&i.stroke&&(P.color=R.hex),O=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+R.o+1||2)-1);var S=.75*(d(i["stroke-width"])||1);if(O=h(g(O,0),1),null==i["stroke-width"]&&(S=m["stroke-width"]),i["stroke-width"]&&(P.weight=S),S&&1>S&&(O*=S)&&(P.weight=1),P.opacity=O,i["stroke-linejoin"]&&(P.joinstyle=i["stroke-linejoin"]||"miter"),P.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(P.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var T={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=T[a](i["stroke-dasharray"])?T[i["stroke-dasharray"]]:o}Q&&l.appendChild(P)}if("text"==s.type){s.paper.canvas.style.display=o;var U=s.paper.span,V=100,W=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=U.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),W=d(m["font-size"]||W&&W[0])||10,p.fontSize=W*V+"px",s.textpath.string&&(U.innerHTML=b(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=U.getBoundingClientRect();s.W=m.w=(X.right-X.left)/V,s.H=m.h=(X.bottom-X.top)/V,s.X=m.x,s.Y=m.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=c.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,$=Y.length;$>Z;Z++)if(Y[Z]in i){s._.dirty=1;break}switch(m["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},C=function(a,f,g){a.attrs=a.attrs||{};var h=(a.attrs,Math.pow),i="linear",j=".5 .5";if(a.attrs.gradient=f,f=b(f).replace(c._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+n+c),o}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=c._parseDots(f);if(!l)return null;if(a=a.shape||a.node,l.length){a.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var m=[],p=0,q=l.length;q>p;p++)l[p].offset&&m.push(l[p].offset+n+l[p].color);g.colors=m.length?m.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),a.appendChild(g)}return 1},D=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=b,this.matrix=c.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},E=c.el;D.prototype=E,E.constructor=D,E.transform=function(a){if(null==a)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:o;e&&(d=a=b(a).replace(/\.{3}|\u2026/g,this._.transform||o)),c._extractTransform(this,f+a);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~b(this.attrs.fill).indexOf("-"),l=!b(this.attrs.fill).indexOf("url(");if(h.translate(1,1),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;j.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else j.style.filter=o,z(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=o,i.matrix=b(h),i.offset=h.offset();return d&&(this._.transform=d),this},E.rotate=function(a,c,e){if(this.removed)return this;if(null!=a){if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,c,e]])),this}},E.translate=function(a,c){return this.removed?this:(a=b(a).split(k),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=c),this.transform(this._.transform.concat([["t",a,c]])),this)},E.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),c.eve.unbind("raphael.*.*."+this.id),c._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;this.removed=!0}},E.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if(b==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=b.split(k),h={},i=0,m=g.length;m>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&c.is(b,"array")){for(h={},i=0,m=b.length;m>i;i++)h[b[i]]=this.attr(b[i]);return h}var n;null!=d&&(n={},n[b]=d),null==d&&c.is(b,"object")&&(n=b);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[a](o)&&n[a](o)&&c.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[a](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&c._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper)),this)},E.insertAfter=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[a.length-1]),a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),this)},E.insertBefore=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[0]),a.node.parentNode.insertBefore(this.node,a.node),c._insertbefore(this,a,this.paper),this)},E.blur=function(a){var b=this.node.runtimeStyle,d=b.filter;return d=d.replace(r,o),0!==+a?(this.attrs.blur=a,b.filter=d+n+m+".Blur(pixelradius="+(+a||1.5)+")",b.margin=c.format("-{0}px 0 0 -{0}px",f(+a||1.5))):(b.filter=d,b.margin=0,delete this.attrs.blur),this},c._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},c._engine.rect=function(a,b,d,e,f,g){var h=c._rectPath(b,d,e,f,g),i=a.path(h),j=i.attrs;return i.X=j.x=b,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},c._engine.ellipse=function(a,b,c,d,e){{var f=a.path();f.attrs}return f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},c._engine.circle=function(a,b,c,d){{var e=a.path();e.attrs}return e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},c._engine.image=function(a,b,d,e,f,g){var h=c._rectPath(d,e,f,g),i=a.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=b,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=b,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},c._engine.text=function(a,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=c.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=b(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,a),l={fill:"#000",stroke:"none",font:c._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=b(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),a.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},c._engine.setSize=function(a,b){var d=this.canvas.style;return this.width=a,this.height=b,a==+a&&(a+="px"),b==+b&&(b+="px"),d.width=a,d.height=b,d.clip="rect(0 "+a+" "+b+" 0)",this._viewBox&&c._engine.setViewBox.apply(this,this._viewBox),this},c._engine.setViewBox=function(a,b,d,e,f){c.eve("raphael.setViewBox",this,this._viewBox,[a,b,d,e,f]);var h,i,j=this.width,k=this.height,l=1/g(d/j,e/k);return f&&(h=k/e,i=j/d,j>d*h&&(a-=(j-d*h)/2/h),k>e*i&&(b-=(k-e*i)/2/i)),this._viewBox=[a,b,d,e,!!f],this._viewBoxShift={dx:-a,dy:-b,scale:l},this.forEach(function(a){a.transform("...")}),this};var F;c._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},c._engine.initWin(c._g.win),c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a.container,d=a.height,e=a.width,f=a.x,g=a.y;if(!b)throw new Error("VML container not found.");var h=new c._Paper,i=h.canvas=c._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=1e3*u+n+1e3*u,h.coordorigin="0 0",h.span=c._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=c.format("top:auto;left:auto;width:{0};height:{1};display:inline-block;position:absolute;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==b?(c._g.doc.body.appendChild(i),j.position="absolute"):b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i),h.renderfix=function(){},h},c.prototype.clear=function(){c.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=c._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},c.prototype.remove=function(){c.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;return!0};var G=c.st;for(var H in E)E[a](H)&&!G[a](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}}(),B.was?A.win.Raphael=c:Raphael=c,c})}(window),window.Raphael}),KISSY.add("gallery/kcharts/1.3/basechart/common",function(a,b){function c(b,c){if(b._cfg.title.isShow){var d=b.htmlPaper,e=c+"-title",f=b._cfg,g=b.getInnerContainer(),h=.6*g.y;b._title=d.rect(g.x,0,g.width,h).addClass(e).css(a.mix({"line-height":h+"px"},f.title.css)).html(f.title.content)}}function d(b,c){if(b._cfg.subTitle.isShow){var d=b.htmlPaper,e=c+"-subtitle",f=b._cfg,g=b.getInnerContainer(),h=.4*g.y;b._subTitle=d.rect(g.x,.6*g.y,g.width,h).addClass(e).css(a.mix({"line-height":h+"px"},f.subTitle.css)).html(f.subTitle.content)}}function e(a){if(a._cfg.xAxis.isShow){var b=a.getInnerContainer(),c=b.bl,d=b.width,e=a.htmlPaper,f=a._cfg.themeCls+"-axisx";return a._axisX=e.lineX(c.x,c.y,d).addClass(f).css(a._cfg.xAxis.css||{}),a._axisX}}function f(a){if(a._cfg.yAxis.isShow){var b=a.getInnerContainer(),c=b.tl,d=b.height,e=a.htmlPaper,f=a._cfg.themeCls+"-axisy";return a._axisY=e.lineY(c.x,c.y,d).addClass(f).css(a._cfg.yAxis.css||{}),a._axisY}}function g(a){if(a._cfg.yGrids.isShow)for(var b=a.getInnerContainer(),c=b.x,d=a._pointsY,e=(a._cfg.yGrids.template,0),f=d.length;f>e;e++)a._gridsY[e]={0:j(a,{x:c,y:d[e].y,index:e}),x:c,y:d[e].y,num:d[e].number}}function h(a){if(a._cfg.xGrids.isShow){var b,c=a._points[0],d=a.getInnerContainer();if(a._gridsX=[],"x"==a._cfg.zoomType){b=function(){var a=c.length,b=[];if(a>1){var d=(c[1].x-c[0].x)/2;b.push({x:c[0].x-d});for(var e in c)b.push({x:c[e].x- -d})}return b}();for(var e=0,f=b.length;f>e;e++)a._gridsX[e]={0:i(a,{index:e,x:b[e].x}),x:b[e].x,y:d.bl.y,index:e,num:a.coordNum[e]}}else for(var e in a._pointsX)a._gridsX[e]={index:e,0:i(a,{index:e,x:a._pointsX[e].x}),x:a._pointsX[e].x,y:d.bl.y,num:a.coordNumX[e]};return a._gridsX}}function i(c,d,e){if(c._cfg.xGrids.isShow){var f=c.getInnerContainer(),e=e||c._cfg.xGrids.css,g=c.htmlPaper,h=c._cfg.themeCls+"-gridsx",i=c._cfg.xGrids.template,j={index:d.index,paper:g,x:d.x,y:f.tl.y,height:f.height,css:e,className:h,chart:c};return i?a.isFunction(i)?i(j):b(i).render({data:j}):g.lineY(d.x,f.tl.y,f.height).addClass(h).css(e)}}function j(c,d,e){if(c._cfg.yGrids.isShow){var f=c.getInnerContainer(),e=e||c._cfg.yGrids.css,g=c.htmlPaper,h=c._cfg.themeCls+"-gridsy",i=c._cfg.yGrids.template,j={index:d.index,paper:g,x:f.x,y:d.y,width:f.width,css:e,className:h,chart:c};return i?a.isFunction(i)?i(j):b(i).render({data:j}):g.lineX(f.x,d.y,f.width).addClass(h).css(e)}}function k(a){if(a._cfg.yLabels.isShow){var b=a.getInnerContainer();for(var c in a._pointsY)a._labelY[c]={0:n(a,c,a._pointsY[c].number),num:a._pointsY[c].number,x:b.x,y:a._pointsY[c].y};return a._labelY}}function l(a){if(a._cfg.xLabels.isShow)for(var b in a._pointsX)a._labelX[b]={0:m(a,b,a._pointsX[b].number),num:a._pointsX[b].number,x:a._pointsX[b].x,y:a._pointsX[b].y}}function m(c,d,e){if(c._cfg.xLabels.isShow){var f,g=c.htmlPaper,h=c._pointsX.length||0,i=c._cfg.themeCls+"-xlabels",j="{{data}}",k="";return h>d?(j=c._cfg.xLabels.template||j,k=a.isFunction(j)?j(d,e):b(j).render({data:e}),k&&(f=g.text(c._pointsX[d].x,c._pointsX[d].y,"<span class="+i+">"+k+"</span>","center"),f.children().css(c._cfg.xLabels.css)),f):void 0}}function n(c,d,e){if(c._cfg.yLabels.isShow&&e){var f,g=c.htmlPaper,h=c._cfg.themeCls+"-ylabels",i="{{data}}",j="";return i=c._cfg.yLabels.template||i,j=a.isFunction(i)?i(d,e):b(i).render({data:e}),j&&(f=g.text(c._pointsY[d].x,c._pointsY[d].y,"<span class="+h+">"+j+"</span>","right","middle"),f.children().css(c._cfg.yLabels.css)),f}}function o(a){function b(b,c,d,e,f){for(var g="_grids"+b,l="_label"+b,o=Math.max.apply(null,[a[l].length,a[g].length]),p=function(){a[g]=[],a[l]=[];for(var b in c)a[g][b]={0:c[b].grid,y:d[b].y,x:d[b].x,num:c[b].num},a[l][b]={0:c[b].lbl,y:d[b].y,x:d[b].x,num:c[b].num};for(var b in e)e[b].remove()},q=0;o>q;q++)!function(i){var j=a[l][i]?a[l][i].num:a[g][i].num,m=u(j,d,f);if(m&&void 0!==m.x&&void 0!==m.y){var n="Y"==b?{top:m.y+"px"}:{left:m.x+"px"};c.push({num:j,lbl:a[l][i]&&a[l][i][0]&&a[l][i][0].stop().animate(n,h,k),grid:a[g][i]&&a[g][i][0]&&a[g][i][0].stop().animate(n,h,k)})}else{var n="Y"==b?{top:a[l][i]&&v(a[l][i]).y+"px",opacity:0}:{left:a[l][i]&&v(a[l][i]).x+"px",opacity:0};a[l][i]&&a[l][i][0]&&e.push(a[l][i][0].stop().animate(n,h,k)),a[g][i]&&a[g][i][0]&&e.push(a[g][i][0].stop().animate(n,h,k))}}(q);for(var q in d)if(!r(d[q].number,f)){var s="Y"==b?v(d[q]).y+"px":v(d[q]).x+"px",t="Y"==b?{top:s,opacity:0}:{left:s,opacity:0},w="Y"==b?{top:d[q].y,opacity:1}:{left:d[q].x,opacity:1};if("Y"==b){var x=n(a,q,d[q].number),y=j(a,v(d[q]).y);c.push({num:d[q].number,lbl:x&&x.css(t).stop().animate(w,h,k),grid:y&&y.css(t).stop().animate(w,h,k)})}else{var x=m(a,q,d[q].number),y=i(a,v(d[q]).x);c.push({num:d[q].number,lbl:x&&x.css(t).stop().animate(w,h,k),grid:y&&y.css(t).stop().animate(w,h,k)})}}Array.prototype.sort.call(c,function(a,b){return a.num-b.num}),p()}var c=a._cfg,d=c.zoomType,e=a._pointsY,f=a._pointsX,g=a.getInnerContainer(),h=.5,k="easeout",l=[],o=[],p=[],q=[],s=[],t=[],u=function(a,b,c){for(var d in b)if(a===b[d].number)return c.push(a),b[d]},v=function(a){if(a){var b=Math.min.apply(null,[c.canvasAttr.x,c.canvasAttr.y])/2,e=g.y+g.height/2,f=g.x+g.width/2;switch(d){case"x":return{y:a.y>e?g.bl.y+b:g.y-b,x:a.x};case"y":return{x:a.x>f?g.br.x+b:g.x-b,y:a.y};case"xy":return{y:a.y>e?g.bl.y+b:g.y-b,x:a.x>f?g.br.x+b:g.x-b}}}};switch(d){case"x":b("Y",s,e,p,l);break;case"y":b("X",t,f,q,o);break;case"xy":b("X",t,f,q,o),b("Y",s,e,p,l)}}function p(a){var b=0;for(var c in a)a[c].x&&a[c].y&&b++;return b}function q(a,b){var c="",d=(a._innerContainer.bl.y,p(b)),e=0;if(!b)return"";if(e=function(){for(var c in b)if(!a.isEmptyPoint(b[c]))return Math.round(c)}(),c+="M"+b[e].x+","+b[e].y,"arc"==a._cfg.lineType&&d>2){c+=" R";for(var f=e+1,d=b.length;d>f;f++)b[f].x&&b[f].y&&(c+=b[f].x+","+b[f].y+" ")}else for(var f=e+1,d=b.length;d>f;f++)b[f].x&&b[f].y&&(c+=" L"+b[f].x+","+b[f].y);return c}function r(a,b){for(var c in b)if(b[c]===a)return!0;return!1}return{drawTitle:c,drawSubTitle:d,drawAxisX:e,drawAxisY:f,drawGridsX:h,drawGridX:i,drawGridY:j,drawGridsY:g,drawLabelsX:l,drawLabelsY:k,drawLabelX:m,drawLabelY:n,getRealPointsNum:p,animateGridsAndLabels:o,getLinePath:q,isInArray:r}},{requires:["gallery/template/1.0/index"]}),KISSY.add("gallery/kcharts/1.3/basechart/index",function(a,c,d,e){var f,g=a.all,h=!1,i=!1,j={init:function(b){b||(b=this.userConfig);var c=this,d=c._cfg;if(b&&b.renderTo){if(!c.__isInited){d=c._cfg=a.mix({autoRender:!0,zIndex:0,yAxis:{spacing:{top:0,bottom:0}},xAxis:{spacing:{left:0,right:0}},canvasAttr:{x:60,y:60},zoomType:"x"},b,void 0,void 0,!0),c._$ctnNode=g(b.renderTo),c._$ctnNode.css({position:"relative","-webkit-text-size-adjust":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"}),c.createContainer(),a.mix(c,{_datas:{cur:{},total:{}},_points:{},_centerPoints:[],_pointsX:[],_pointsY:[],_gridsX:[],_gridsY:[],_areas:[],_axisX:null,_axisY:null,_labelX:[],_labelY:[],_evtEls:[],_gridPoints:[],stackable:!1});for(var e in Array.prototype)delete Array.prototype[e]}"barchart"==c.chartType&&(d.xAxis.min=0,d.yAxis.min=0),c.__setData(),c.__isInited=1}},__setData:function(){var a=this,b=a._cfg.series;if(b&&!(b.length<=0)&&b[0].data)for(var c in b)a._datas.total[c]={index:c,data:b[c].data},a._datas.cur[c]={index:c,data:b[c].data}},dataFormat:function(){var a,b,c,d,e,f,g,h=this,i=h._cfg,j=i.zoomType,k=h._innerContainer,l=i.xAxis.spacing?h.px2num(i.xAxis.spacing.left):0,m=i.xAxis.spacing?h.px2num(i.xAxis.spacing.right):0,n=i.yAxis.spacing?h.px2num(i.yAxis.spacing.top):0,o=i.yAxis.spacing?h.px2num(i.yAxis.spacing.bottom):0,p=k.width-l-m,q=k.height-n-o,r=k.x/1+l,s=k.y/1+n;switch(h._pointsY=[],h._pointsX=[],j){case"x":a=h.getAllDatas(),g=c=h.coordNum=h._getScales(a,i.yAxis),e=h.data2GrapicData(c,!1,!0);break;case"y":b=h.getAllDatas(),g=d=h.coordNumX=h._getScales(b,i.xAxis),f=h.data2GrapicData(d,!0,!1);break;case"xy":a=h.getAllDatas(0),b=h.getAllDatas(1),g=c=h.coordNum=h._getScales(a,i.xAxis),d=h.coordNumX=h._getScales(b,i.yAxis),e=h.data2GrapicData(c,!1,!1),f=h.data2GrapicData(d,!0,!0)}var t=function(a,b,c){{var d=i.series[b],e=Math.max.apply(null,c),f=Math.min.apply(null,c),g=[];h.getDataType()}switch(j){case"x":for(var k in h._pointsX)g[k]=""===a[k]||null===a[k]?{x:h._pointsX[k].x,index:Math.round(k)}:{x:h._pointsX[k].x,y:h.data2Grapic(a[k],e,f,q,s,!0),dataInfo:{y:a[k],x:i.xAxis.text[k]},index:Math.round(k)};break;case"y":for(var k in h._pointsY)g[k]={x:h.data2Grapic(a[k],e,f,p,r),y:h._pointsY[k].y,dataInfo:{y:a[k],x:i.yAxis.text[k]},index:Math.round(k)};break;case"xy":var l=h.data2GrapicData(h.getArrayByKey(d.data,0)),m=h.data2GrapicData(h.getArrayByKey(d.data,1),!0,!0);for(var k in d.data)g[k]={x:l[k],y:m[k],dataInfo:{y:a[k]},index:Math.round(k)}}return g};switch(j){case"x":for(var u in e)h._pointsY[u]={number:c[u]+"",y:e[u],x:r};try{h._gridPoints=h.getSplitPoints(r,s+q,r+p,s+q,i.xAxis.text.length,!0),h._pointsX=h.getCenterPoints(h._gridPoints);for(var u in i.xAxis.text)h._pointsX[u].number=i.xAxis.text[u]}catch(v){throw new Error("未配置正确的xAxis.text数组")}break;case"y":for(var u in f)h._pointsX[u]={number:d[u]+"",y:s+q,x:f[u]};try{h._pointsY=h.getSplitPoints(r,s,r,s+q,i.yAxis.text.length+1);for(var u in i.yAxis.text)h._pointsY[u].number=i.yAxis.text[u]}catch(v){throw new Error("未配置正确的yAxis.text数组")}break;case"xy":for(var u in f)h._pointsY[u]={number:d[u]+"",y:f[u],x:r};for(var u in e)h._pointsX[u]={number:c[u]+"",y:s+q,x:e[u]}}for(var u in h._datas.cur)h._points[u]=t(h._datas.cur[u].data,u,g)},removeData:function(a){var b=this;delete b._datas.cur[a],b.dataFormat()},recoveryData:function(a){var b=this;b._datas.cur[a]=b._datas.total[a],b.dataFormat()},createContainer:function(){var a=this,b=a._$ctnNode,c=a._cfg.canvasAttr,d=c.width||b.width()-2*c.x,e=c.height||b.height()-2*c.y,f=c.x,g=c.y,h=d,i=e,j={x:f,y:g},k={x:f+d,y:g},l={x:f,y:g+i},m={x:f+d,y:g+i};a._innerContainer={x:f,y:g,width:h,height:i,tl:j,tr:k,bl:l,br:m}},getInnerContainer:function(){return this._innerContainer},getAllDatas:function(){{var b,c=this,d=c._cfg,e=[],f=d.zoomType,g=arguments[0];c.getDataType()}if(d.stackable)for(var h in c._datas.cur){a.isArray(c._datas.cur[h].data)&&(b=c._datas.cur[h].data);for(var i in b)e[i]=e[i]?b[i]-0+(e[i]-0):b[i]}else for(var h in c._datas.cur)a.isArray(c._datas.cur[h].data)&&(b="xy"==f?c.getArrayByKey(c._datas.cur[h].data,g):c._datas.cur[h].data),e.push(b.join(","));return e.length?e.join(",").split(","):[]},getDataType:function(){var b=this;if(b._datas.total[0]&&b._datas.total[0].data)for(var c in b._datas.total[0].data){if(a.isPlainObject(b._datas.total[0].data[c]))return"object";if(a.isNumber(b._datas.total[0].data[c]-0))return"number"}},_getScales:function(b,c){var d=this;if(c.text&&a.isArray(c.text))return c.text;var e=c.max/1,f=c.min/1,g=c.num||5,j=Math.max.apply(null,b),k=Math.min.apply(null,b);h=0>=j?1:0,i=k>=0?1:0;var l=.1*(j-k),m=(e||0==e)&&e>=j?e:j+l,n=(f||0==f)&&k>=f?f:k-l;
return d.getScales(m,n,g)},data2GrapicData:function(b,c,d){if(void 0!==b){var e,f=this,g=f._innerContainer,h=c?g.x:g.y,i=g.height,j=g.width,k=f._cfg.zoomType,l=c?Math.max.apply(null,f.coordNumX):Math.max.apply(null,f.coordNum),m=c?Math.min.apply(null,f.coordNumX):Math.min.apply(null,f.coordNum),n=[];switch(k){case"xy":e=c?i:j;break;case"x":e=i;break;case"y":e=j}if(a.isArray(b)){for(var o in b)n.push(f.data2Grapic(b[o],l,m,e,h,d));return n}return f.data2Grapic(b,l,m,e,h,d)}},data2Grapic:function(a,b,c,d,e,f){return 0>=b-c?void 0:f?d*(1-(a-c)/(b-c))+e:d*(a-c)/(b-c)+e},getSplitPoints:function(a,b,c,d,e,f){var g=(c-a)/e,h=(d-b)/e,i=[];f&&i.push({x:a,y:b});for(var j=0;e-1>j;j++)i.push({x:a+(j+1)*g,y:b+(j+1)*h});return f&&i.push({x:c,y:d}),i},getCenterPoints:function(a){var b=[],c=a.length;if(c>1)for(var d=0;c-1>d;d++)b[d]={x:(a[d].x+a[d+1].x)/2,y:(a[d].y+a[d+1].y)/2};return b},getScales:function(a,b,c){var d,e,f,g,j,k,l,m=this,n=Math.log,o=Math.pow,p=[],q=0;for(a===b&&b>0?(b=0,a=2*a):a===b&&0>b&&(a=0,b=2*b),d=(a-b)/c,f=Math.floor(n(d)/n(10))+1,e=d/o(10,f),e=e>0&&.1>=e?.1:e>.1&&.2>=e?.2:e>.2&&.25>=e?.25:e>.25&&.5>=e?.5:1,g=e*o(10,f),l=(a+b)/2-(a+b)/2%g,j=k=l;j>b;)j-=g;for(;a>k;)k+=g;if(m.isFloat(g)){var r=g+"";r.indexOf(".")>-1&&(q=r.split(".")[1].length>4?4:r.split(".")[1].length)}for(var s=j;k>=s;s+=g)p.push(parseFloat(s).toFixed(q));if(h)for(s in p)p[s]>0&&p.splice(s,1);else if(i)for(s in p)p[s]<0&&p.splice(s,1);return p},arraySort:function(a,b,c){return a.sort(function(a,d){return b?"object"==typeof a&&"object"==typeof d?d[c]-a[c]:d-a:"object"==typeof a&&"object"==typeof d?a[c]-d[c]:a-d})},getArrayByKey:function(b,c){var d=[];for(var e in b)(b[e][c]||a.isNumber(b[e][c]))&&d.push(b[e][c]);return d},isFloat:function(a){return/^([+-]?)\d*\.\d+$/.test(a)},obj2Array:function(a,b){var c=[];for(var d in a)c.push(b?a[b]:a[d]);return c},getObjKeys:function(a){var c=[];for(b in a)c.push(b);return c},isInSide:function(a,b,c,d,e,f){return a>c&&c- -e>a&&b>d&&d- -f>b?!0:!1},px2num:function(a){{var a=a||0;Math.round((a+"").replace(/\s+|px/g,""))}return Math.round((a+"").replace(/\s+|px/g,""))},getOffset:function(b){var c=b.currentTarget;if(b.offsetX)return{offsetX:b.offsetX,offsetY:b.offsetY};var d=a.DOM.offset(c);return{offsetX:b.offsetX||b.clientX-d.left,offsetY:b.offsetY||b.clientY-d.top}},getConfig:function(){return this._cfg},setConfig:function(b){this._cfg=a.mix(this._cfg,b,void 0,void 0,!0),this.__setData()}};return c.extend?f=c.extend(j):(f=function(){},a.extend(f,c,j)),f.Common=e,f},{requires:["base","node","./common"]}),KISSY.add("gallery/kcharts/1.3/tools/color/index",function(a){function b(a,b){var c=parseInt(a.substring(1,3),16),d=parseInt(a.substring(3,5),16),e=parseInt(a.substring(5,7),16);c=parseInt(c*(100+b)/100),d=parseInt(d*(100+b)/100),e=parseInt(e*(100+b)/100),c=255>c?c:255,d=255>d?d:255,e=255>e?e:255;var f=1==c.toString(16).length?"0"+c.toString(16):c.toString(16),g=1==d.toString(16).length?"0"+d.toString(16):d.toString(16),h=1==e.toString(16).length?"0"+e.toString(16):e.toString(16);return"#"+f+g+h}var c=function(a){this.init(a)};return a.augment(c,{init:function(a){var b=a&&a.themeCls||"ks-chart-default";this._colors=this.colorCfg[b]||this.colorCfg["ks-chart-default"]},colorCfg:{"ks-chart-default":[{DEFAULT:"#1f77b4",HOVER:"#1f77b4"},{DEFAULT:"#aec7e8",HOVER:"#aec7e8"},{DEFAULT:"#98df8a",HOVER:"#98df8a"},{DEFAULT:"#ff7f0e",HOVER:"#ff7f0e"},{DEFAULT:"#2ca02c",HOVER:"#2ca02c"},{DEFAULT:"#ffbb78",HOVER:"#ffbb78"},{DEFAULT:"#d62728",HOVER:"#d62728"},{DEFAULT:"#ff9896",HOVER:"#ff9896"}],"ks-chart-analytiks":[{DEFAULT:"#00adef",HOVER:"#1176ba"},{DEFAULT:"#8cc63e",HOVER:"#066839"},{DEFAULT:"#f7941d",HOVER:"#ef3e38"},{DEFAULT:"#ee217e",HOVER:"#cd7db2"},{DEFAULT:"#603814",HOVER:"#8a5e3b"},{DEFAULT:"#662e91",HOVER:"#492062"},{DEFAULT:"#bf1e2d",HOVER:"#ec1d23"}],"ks-chart-rainbow":[{DEFAULT:"#4573a7",HOVER:"#5E8BC0"},{DEFAULT:"#aa4644",HOVER:"#C35F5C"},{DEFAULT:"#89a54e",HOVER:"#A2BE67"},{DEFAULT:"#806a9b",HOVER:"#9982B4"},{DEFAULT:"#3e96ae",HOVER:"#56AFC7"},{DEFAULT:"#d9853f",HOVER:"#F49D56"},{DEFAULT:"#808080",HOVER:"#A2A2A2"},{DEFAULT:"#188AD7",HOVER:"#299BE8"},{DEFAULT:"#90902C",HOVER:"#B7B738"},{DEFAULT:"#AFE65D",HOVER:"#C5ED89"}]},removeAllColors:function(){return this._colors=[],this._colors},setColor:function(a){var c=10;a&&(a.DEFAULT&&a.HOVER||(a.DEFAULT&&!a.HOVER?a.HOVER=b(a.DEFAULT,c):a={DEFAULT:a,HOVER:b(a,c)})),this._colors.push(a)},getColor:function(a){return this._colors[a%this._colors.length]},getColors:function(){var a,b=0,c=this,d=[];arguments[1]?(b=arguments[0],a=arguments[1]):a=arguments[0];for(var e=b;a-b>e;e++)d.push(c.getColor(e));return d}}),c}),KISSY.add("gallery/kcharts/1.3/tools/htmlpaper/index",function(a){var b=a.all,c=function(a,c){var d=this;if(a)return d.$tgt=b(a),d._init(c)};return a.augment(c,{_init:function(b){var c=this;c._cfg=a.mix({clsName:"ks-charts-container",prependTo:!0,width:void 0,height:void 0,left:0,top:0,css:{}},b),c.$paper=c._createPaper()},_createPaper:function(){var a=this,c=a.$tgt,d=a._cfg,e=b("<div></div>").addClass(d.clsName).css({width:d.width||c.width(),height:d.height||c.height(),position:"absolute",left:d.left||0,top:d.top||0}).css(d.css);return d.prependTo?e.prependTo(c):e.appendTo(c),e},text:function(a,c,d,e,f){var g,h,i=this,j=0,k=0,a=a-i._cfg.left,c=c-i._cfg.top,l=b("<div></div>").html(d).css({display:"block",position:"absolute"});switch(l.appendTo(i.$paper),g=l.outerWidth(),h=l.outerHeight(),e){case"right":j=-g;break;case"center":j=-g/2}switch(f){case"middle":k=-h/2;break;case"bottom":k=-h}return l.css({left:a,top:c,marginLeft:j,marginTop:k}),l},rect:function(a,c,d,e){var f=this,a=a-f._cfg.left,c=c-f._cfg.top,g=b("<div></div>").css({left:a,top:c,width:d,height:e,"font-size":"1px",display:"block",position:"absolute"});return g.appendTo(f.$paper)},lineX:function(a,c,d){var e=this,a=a-e._cfg.left,c=c-e._cfg.top,f=b("<div></div>").css({left:a,top:c,display:"block",position:"absolute",width:d,height:0,borderTop:"1px solid"});return f.appendTo(e.$paper)},lineY:function(a,c,d){var e=this,a=a-e._cfg.left,c=c-e._cfg.top,f=b("<div></div>").css({left:a,top:c,display:"block",position:"absolute",width:0,height:d,borderLeft:"1px solid"});return f.appendTo(e.$paper)},clear:function(){var a=this;return a.$paper.html(""),a.$paper}}),c}),KISSY.add("gallery/kcharts/1.3/legend/index",function(a,b,c,d,e,f,g){function h(b){m||(m=a.Node("<div/>").css({visibility:"hidden",position:"fixed",left:"-9999em",top:0}).appendTo(r)),d.append(b,m);var c={width:d.outerWidth(m),height:d.outerHeight(m)};return m.html(""),c}function i(a,b){var c=this.el,d=c.icon,e=c.des;"cy"===a?d.transform("t0,"+b):"top"===a&&e.css("top",b+"px")}function j(a,b){var c=this.el,d=c.icon,e=c.des;"cx"===a?d.transform("t"+b+",0"):"left"===a&&e.css(a,b+"px")}function k(b){var c=b.get("disablestyle"),d={icon:{stroke:"#ccc",fill:"#ccc"},text:{color:"#ccc"}};d=a.isFunction(c)?a.mix(d,c(this,this.index)):a.mix(d,c);var e=this.icon,f=this.des;e.attr(d.icon),f.css(d.text)}function l(b,c){var d=b.get("enablestyle"),e={icon:{stroke:c.DEFAULT,fill:c.DEFAULT},text:{color:c.DEFAULT}};e=a.isFunction(d)?a.mix(e,d(this,this.index)):a.mix(e,d);var f=this.icon,g=this.des;f.attr(e.icon),g.css(e.text)}var m,n,o=(a.merge,f.BASIC[1]),p=window,q=p.Raphael,r=a.one(document.body),s={offset:[0,0],globalConfig:{interval:5}},t={initializer:function(){this._setupPaper(),this._setupCon();var b=(this.get("bbox"),this.get("paper"),this.get("align")),c=this.get("iconfn");c&&a.isFunction(c)&&(this.icon=c),this.align(b)},_setupPaper:function(){var a=this.get("paper");if(!a){var b=this.get("container");a=q(b[0],d.width(b),d.height(b)),this.set("paper",a)}"VML"==q.type||(a.canvas.style.zIndex=10)},bindEvent:function(){var b=this.get("els"),c=this;a.each(b,function(b){var d=b.icon,e=b.des,f={icon:d,text:e,index:b.index,el:b};a.each(["click","mouseover","mouseout"],function(a){d[a](function(){c.fire(a,f)}),e.on(a,function(){c.fire(a,f)})})})},unbindEvent:function(){var b=this.get("els");a.each(b,function(b){var c=b.icon,d=b.des;a.each(["click","mouseover","mouseout"],function(a){c["un"+a](),d.detach(a)})})},remmoveLegendIconAndText:function(){var b=this.get("els");a.each(b,function(a){var b=a.icon,c=a.des;b.remove(),c.remove()})},onframeend:function(){this.bindEvent()},_setupCon:function(){var a=this.get("container"),b=d.css(a,"position");"static"==b&&d.css(a,"position","relative")},item:function(a){var b=this.get("els");return b[a]},icon:function(a,b,c,d){var e,g=this.get("paper"),h=c;switch(d){case"triangle":e=f.triangle(a,b,{paper:g,size:h});break;case"linetriangle":e=f.linetriangle(a,b,{paper:g,size:h});break;case"rhomb":case"diamon":e=f.diamond(a,b,{paper:g,size:h});break;case"linerhomb":case"linediamond":e=f.linediamond(a,b,{paper:g,size:h});break;case"square":e=f.square(a,b,{paper:g,size:h});break;case"linesquare":e=f.linesquare(a,b,{paper:g,size:h});break;case"linecircle":e=f.linecircle(a,b,{paper:g,size:h});break;default:e=f.circle(a,b,{paper:g,size:h})}return e},align:function(a){var b={tl:"alignTopLeft",tc:"alignTopCenter",tr:"alignTopRight",rt:"alignRightTop",rm:"alignRightMiddle",rb:"alignRightBottom",bl:"alignBottomLeft",bc:"alignBottomCenter",br:"alignBottomRight",lt:"alignLeftTop",lm:"alignLeftMiddle",lb:"alignLeftBottom"},c=b[a]||"alignRight";this[c]()},alignTop:function(b,c){var e=this.get("container"),f=this.get("bbox"),i=this.get("offset"),m=(this.get("paper"),this.get("config")),n=this.get("globalConfig"),p=this,q=n.iconsize||[1,1],r=q*o||6,s=n.icontype,t=0,u=[];a.each(m,function(b,c){var d=b.text||"data"+c,e=a.Node('<span class="kcharts-legend-item">'+d+"</span>"),f=h(e);t+=f.width,u.push({el:e,width:f.width,height:f.height,zIndex:10,cursor:"pointer"})});var v=t,w=p.icon(-9999,9999,q,s),x=w.getBBox(),y=n.iconright||0,z=n.interval||0;w.remove(),v+=(x.width+y)*m.length+z*(m.length-1);var A=f.left+i[0],B=f.top+i[1]-2*r,C=A+(f.width-v)/2+r,D=B;if(c&&(D=D+4*r+f.height),"l"==b)C=0+i[0]+r;else if("r"==b){var E=d.width(e);C=E-v}var F=[],G=this.get("alignhook"),H=this.get("iconAttrHook"),I=this.get("spanAttrHook"),J=[],K=this.get("anim"),L=K?d.width(e):0,M={icontype:s,iconsize:r,iconright:y};a.each(m,function(b,c){G&&(M=G.call(p,M,c));var f=C,g=D;f+=L;var i=p.icon(f,g,q,b.icontype||M.icontype),m=i.getBBox(),n={};a.mix(n,b,!0,["DEFAULT","HOVER"]);var o={fill:n.DEFAULT};H&&(o=a.merge({fill:n.DEFAULT},H.call(p,c))),o.stroke=o.fill,i.attr(o);var r=b.text||"data"+c,s=d.create('<span class="kcharts-legend-item"></span>');d.html(s,r);var t,u,v=h(s);s=a.Node('<span class="kcharts-legend-item">'+r+"</span>"),t=C+M.iconsize+M.iconright,u=D-(m.height/2+(v.height-m.height)/2),t+=L;var w={left:t+"px",top:u+"px",position:"absolute",zIndex:10,cursor:"pointer"};n.DEFAULT&&(w.color=n.DEFAULT),I&&(w=a.merge(w,I.call(p,c))),s.css(w),s.appendTo(e),C+=v.width+2*M.iconsize+z+M.iconright;var x={icon:i,des:s,index:c,disable:function(){k.call(x,p,b)},enable:function(){l.call(x,p,b)}};F.push(x),K&&J.push({el:x,frame:j,from:{cx:0,left:t},to:{cx:-L,left:t-L}})}),this.set("els",F),K?(K.endframe=function(){p.onframeend()},g.AnimateObject(J,K)):p.onframeend()},alignTopLeft:function(){this.alignTop("l")},alignTopCenter:function(){this.alignTop("c")},alignTopRight:function(){this.alignTop("r")},alignRight:function(a){this.alignLeft(a,!0)},alignRightTop:function(){this.alignRight("t")},alignRightMiddle:function(){this.alignRight("m")},alignRightBottom:function(){this.alignRight("b")},alignBottomLeft:function(){this.alignTop("l",!0)},alignBottomCenter:function(){this.alignTop("c",!0)},alignBottomRight:function(){this.alignTop("r",!0)},alignLeft:function(b,c){var e=this.get("container"),f=this.get("bbox"),j=this.get("offset"),m=(this.get("paper"),this.get("config")),n=this.get("globalConfig"),p=this,q=n.iconsize||[1,1],r=q*o||6,s=n.icontype,t=0,u=m[0],v=p.icon(-9999,-9999,q,s),w=v.getBBox(),x=m.length,y=n.iconright||0,z=n.interval;v.remove();var A=u.text||"data",B=a.Node('<span class="kcharts-legend-item">'+A+"</span>"),C=h(B),D=Math.max(C.height,w.height);t+=D*x+z*(x-1);var E,F,G,H,I=0,J=[];a.each(m,function(b,c){{var d=a.Node('<span class="kcharts-legend-item">'+b.text+"</span>"),e=h(d);b.text||"data"+c}I<e.width&&(I=e.width),J.push({el:d,width:e.width,height:e.height})}),I+=y,c?(E=f.left+f.width+j[0],F=f.top+j[1],G=E+r,H=F):(E=f.left+j[0],F=f.top+j[1],G=E,H=F),"m"==b?H=f.top+(f.height-t)/2:"b"==b&&(H=f.top+f.height-t);var K=[],L=this.get("alignhook"),M=this.get("iconAttrHook"),N=this.get("spanAttrHook"),O=[],P=this.get("anim"),Q=P?d.height(e):0,R={icontype:s,iconright:y};a.each(m,function(b,d){L&&(R=L.call(p,R,d));var f,g;c?(f=G+j[0],g=H+j[1]):(f=G-I-r+j[0],g=H+j[1]),g+=Q;var h=p.icon(f,g,q,b.icontype||R.icontype),m=h.getBBox(),n=J[d],o={};a.mix(o,b,!0,["DEFAULT","HOVER"]);var s={fill:o.DEFAULT};M&&(s=a.merge(s,M.call(p,d))),s.stroke=s.fill,h.attr(s);var t,u,v=a.Node('<span class="kcharts-legend-item">'+b.text+"</span>");c?(t=G+r+m.width+j[0],u=H-(m.height/2+(C.height-m.height)/2)+j[1]):(t=G+j[0]-I+R.iconright,u=H-(m.height/2+(n.height-m.height)/2)+j[1]),u+=Q;var w={left:t+"px",top:u+"px",position:"absolute",zIndex:10,cursor:"pointer"};o.DEFAULT&&(w.color=o.DEFAULT),N&&(w=a.merge(w,N.call(p,d))),v.css(w),v.appendTo(e);var x=Math.max(n.height,m.height);H+=x+z;var y={icon:h,des:v,index:d,disable:function(){k.call(y,p,b)},enable:function(){l.call(y,p,b)}};K.push(y),P&&O.push({el:y,frame:i,from:{cy:0,top:u},to:{cy:-Q,top:u-Q}})}),this.set("els",K),P?(P.endframe=function(){p.onframeend()},g.AnimateObject(O,P)):p.onframeend()},alignLeftTop:function(){this.alignLeft("t")},alignLeftMiddle:function(){this.alignLeft("m")},alignLeftBottom:function(){this.alignLeft("b")},destroy:function(){this.unbindEvent(),this.remmoveLegendIconAndText()}};return b.extend?n=b.extend(t):(n=function(b){b=a.merge(s,b),this.set(b),this.initializer()},a.extend(n,b,t)),n},{requires:["base","node","dom","event","gallery/kcharts/1.3/icons/index","gallery/kcharts/1.3/animate/index","gallery/kcharts/1.3/raphael/index"]}),KISSY.add("gallery/kcharts/1.3/tools/touch/index",function(a){function b(a,b){if(!(a.touches.length>1)){var c=a.changedTouches,d=c[0],e=document.createEvent("MouseEvent");e.initMouseEvent(b,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(e)}}function c(a){var c=f(a);g||c||(g=!0,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))}function d(a){g&&(b(a,"mousemove"),h=!0)}function e(a){g&&(b(a,"mouseup"),h&&b(a,"mouseout"),h=!1,g=!1)}function f(a){return"INPUT"==a.target.tagName.toUpperCase()?!0:!1}if(!a.UA.ie){var g,h=!1;document.addEventListener("touchstart",c,!0),document.addEventListener("touchmove",d,!0),document.addEventListener("touchend",e,!0)}}),KISSY.add("gallery/kcharts/1.3/tip/index",function(a,b,c,d,e){var f,g=a.all,h={initializer:function(){this.init()},init:function(){var b=this.userConfig,c=this,d={clsName:"ks-chart-default",autoRender:!0,isVisable:!1,boundry:{x:0,y:0,width:0,height:0},rootNode:g("body"),tpl:"",corner:{isShow:!1,tpl:"corner",css:{position:"absolute",marginLeft:0,marginTop:0}},anim:{easing:"easeOut",duration:.25},offset:{x:0,y:0},alignX:"left",alignY:"top"};c._events={MOVE:"move",SETCONT:"setcontent",HIDE:"hide"},c._cfg=a.mix(d,b,void 0,void 0,!0),c._cfg.rootNode=g(c._cfg.rootNode);var e=c._cfg;c._data={},c._tpl=e.tpl,c.bindEvent(),e.autoRender&&c.render()},bindEvent:function(){var b=this,c=b._cfg.template,d=b._events;b.on(d.MOVE,function(a){var c=a.x,d=a.y,e=a.style;b.isVisable()&&b._cfg.anim?b.animateTo(c,d):b.moveTo(c,d),e&&b.$tip.css(e)}),b.on(d.SETCONT,function(d){a.isFunction(c)?b.setContent(c(d.data)):b.renderTemplate(c,d.data)}),b.on(d.HIDE,function(){b.hide()})},getInstance:function(){return this.$tip},isVisable:function(){return"none"==this.$tip.css("display")?!1:!0},show:function(){var a=this;return a.$tip&&a.$tip.show(),a},hide:function(){var a=this;return a.$tip&&a.$tip.stop()&&a.$tip.hide(),a},moveTo:function(a,b){var c=this;c._prevtime=(new Date).getTime(),c.show();var d=c.getInstance(),e=c._cfg,f=(c._cfg.anim,c.getPos(a,b)),g=(e.corner.css["margin-top"]||e.corner.css.marginTop||0,e.corner.css["margin-left"]||e.corner.css.marginLeft||0),h=c.$corner;h&&h.css({"margin-left":g+a-f.x}),d.css({"margin-top":f.y,"margin-left":f.x})},animateTo:function(a,b,c){var d=this,e=d._cfg,f=e.anim,g=(new Date).getTime();d._prevtime&&g-d._prevtime<100&&d.animateFast(a,b,c),d.show(),d._prevtime=(new Date).getTime();var h=d.getInstance(),i=d.getPos(a,b),j=(e.corner.css["margin-top"]||e.corner.css.marginTop||0,e.corner.css["margin-left"]||e.corner.css.marginLeft||0),k=d.$corner;k&&k.css({"margin-left":j+a-i.x}),h.stop().animate({"margin-top":i.y,"margin-left":i.x},f.duration,f.easing,function(){c&&c()})},animateFast:function(a,b,c){var d,e,f=this,g=f.get("x"),h=f.get("y"),i=.2;f._prevtime=(new Date).getTime(),f.show(),void 0!==g&&(d=g/1+(a-g)*i,e=h/1+(b-h)*i);var j=f.getInstance(),k=f._cfg,l=f._cfg.anim,m=f.getPos(d,e),n=(k.corner.css["margin-top"]||k.corner.css.marginTop||0,k.corner.css["margin-left"]||k.corner.css.marginLeft||0),o=f.$corner;o&&o.css({"margin-left":n+a-m.x}),j.css({"margin-top":m.y,"margin-left":m.x});var p=f.getPos(a,b);j.stop().animate({"margin-top":p.y,"margin-left":p.x},l.duration,l.easing,function(){c&&c()})},renderTemplate:function(a,b){return this.setContent(e(a).render(b))},setContent:function(a){return g("."+this._cfg.clsName+"-tip-content",this.$tip).html(a)},getPos:function(a,b){var c=this,d=c._cfg,e=d.offset,f=b+e.y,g=a+e.x,h=d.alignX,i=d.alignY,j=c.getInstance(),k=j.outerWidth(),l=j.outerHeight(),m=d.boundry;switch(c.set("x",a||0),c.set("y",b||0),h){case"center":g=Math.round(a)+e.x-k/2;break;case"right":g=Math.round(a)+e.x-k}switch(i){case"middle":f=Math.round(b)+e.y-l/2;break;case"bottom":f=Math.round(b)+e.y-l}if(m.width&&m.height){var n=m.x||0,o=m.y||0,p=m.width,q=m.height;o>f?f=b- -Math.abs(e.y):f>o+q-l&&(f=b-l-Math.abs(e.y)),n>g?g=a- -Math.abs(e.x):g>n+p-k&&(g=a-k-Math.abs(e.x))}return{x:g,y:f}},_isExist:function(){return this.$tip&&this.$tip[0]},render:function(){var a=this,b=a._cfg,c=a._tpl,d=a._data,e=b.isVisable?"inline-block":"none",f=b.rootNode.offset();return b.rootNode.offset()?(a.$tip=!a._isExist()&&g('<span class="'+b.clsName+'-tip" style="*zoom:1;"><span class="'+b.clsName+'-tip-content"></span></span>').css({display:e}).appendTo(b.rootNode),a.$corner=b.corner.isShow&&b.corner.tpl?g("<div class='"+b.clsName+"-corner'>"+b.corner.tpl+"</div>").css(b.corner.css).appendTo(a.$tip):void 0,a.$tip.css({"margin-top":f.top+b.offset.y,"margin-left":f.left+b.offset.x,position:"absolute"}),a.renderTemplate(c,d),a.$tip):!1}};return c.extend?f=c.extend(h):(f=function(a){a&&(this.userConfig=a,this.init())},a.extend(f,c,h)),f},{requires:["node","base","anim","gallery/template/1.0/index","./assets/tip.css"]}),KISSY.add("gallery/kcharts/1.3/animate/index",function(a,b){function c(b,c,h){function i(){t||(m=+new Date,x=!0)}function j(){var a=+new Date;w=w+a-m,x=!1}h||(h={}),h=a.merge(d,h);var k,l,m,n=+new Date,o=(n+h.duration,n),p=h.duration,q=e[h.easing],r=h.frame||a.noop,s={},t=!1,u=h.duration,v=0,w=0,x=!1;for(var y in b)c[y]||0==c[y]?s[y]=null:delete b[y];k=function(){var d,e;if(e=v/p,d=q(e),a.isArray(b))for(var g=0,i=b.length;i>g;g++)s[g]=b[g]+(c[g]-b[g])*d;else for(var j in b)s[j]=b[j]+(c[j]-b[j])*d;u>v?(r.call(z,s,e),l=f(k)):(r.call(z,c,1),t=!0,h.endframe&&h.endframe.call(z,c,1)),o=+new Date,v=o-n-w};var z={stop:function(){g(l)},resume:function(){x&&(j(),k())},pause:function(){x||(i(),g(l))},isRunning:function(){return!t}};return k(),z}var d,e=b.Easing,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,16)},g=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;return d={duration:1e3,easing:"easeNone"},c.AnimateObject=function(b,d){var e=[],f=0,g={},h={},i=b.length;a.each(b,function(a,b){var c,d=a.from,i=a.to;for(var j in d)c=f++,e[c]=[a,j,b],g[c]=d[j],h[c]=i[j]});var j=c(g,h,{easing:d.easing,duration:d.duration,frame:function(a){for(var b in a){var c=e,d=c[b][0],f=c[b][1],g=c[b][2],h=d.from;h[f]=a[b],d.frame&&d.frame(f,a[b],a,g,i)}},endframe:function(a){for(var b in a){var c=e,f=c[b][0],g=c[b][1],h=c[b][2];f.endframe&&f.endframe(g,a[b],h,a)}d.endframe&&d.endframe()}});return j},c},{requires:["anim"]}),KISSY.add("gallery/kcharts/1.3/tools/graphtool/index",function(a){var b=Math.sqrt,c={},d=function(a,c,d,e,f){var g,h=["M"+[c,d-e].join(","),"L"+[c-e*b(3)/2,d-0+1*e/2].join(","),[c-0+e*b(3)/2,d-0+1*e/2].join(","),"Z"].join(" ");return a&&a.path?(g=a.path(h),g.rotate(f,c,d),g):void 0},e=function(a,b,c,d,e,f){var g,h=["M"+[b,c-e/2].join(","),"L"+[b-0+d/2,c].join(","),[b,c-0+e/2].join(","),[b-d/2,c].join(","),"Z"].join(",");return a&&a.path?(g=a.path(h),g.rotate(f,b,c),g):void 0},f=function(a,b,c,d,e){var f,g=[["M",b-d/2,",",c-e/2].join(""),[" L",b/1+d/2,",",c-e/2," v",e," h",-d,"z"].join("")];return a&&a.path?f=a.path(g):void 0};return c=a.merge(c,{triangle:d,rhomb:e,square:f})},{requires:["gallery/kcharts/1.3/raphael/index"]}),KISSY.add("gallery/kcharts/1.3/icons/index",function(a){var b=a.merge,c=a.isArray,d=[10,6],e="M",f="L",g="Z",h={trianglePath:function(a,b,c){var d=Math.sqrt(3)/3*c,h=1/6*c,i=[a,b-2/3*c+h],j=[a-d,b+1/3*c+h],k=[a+d,b+1/3*c+h],l=[e,i[0],i[1],f,j[0],j[1],f,k[0],k[1],g];return l},lineThrouth:function(a,b,c,d){var f=d.paper,g=d.size[0];return f.path([e,a-1.1*g*c,b,a+1.1*g*c,b].join(","))}},i={rect:function(a,c,e){var f=e.width||d[0],g=e.height||d[1],h=a-f/2,i=c-g/2,j=e.paper.rect(h,i,f,g).attr(b({},e.attrs));return j},square:function(a,c,e){return this.rect(a,c,b({width:d[1]},e))},linesquare:function(a,b,c){var e=this.square(a,b,c),f=d[1],g=c.paper.set();g.push(e);var i=h.lineThrouth(a,b,f,c);return g.push(i),g},diamond:function(a,b,c){var d=this.square(a,b,c).attr("transform","r45");return d},linediamond:function(a,b,c){var e=this.square(a,b,c).attr("transform","r45"),f=d[1],g=c.paper.set();g.push(e);var i=h.lineThrouth(a,b,f,c);return g.push(i),g},circle:function(a,b,c){var e;return e=c.paper.circle(a,b,d[1]/2)},linecircle:function(a,b,c){var e=this.circle(a,b,c),f=d[1],g=c.paper.set();g.push(e);var i=h.lineThrouth(a,b,f,c);return g.push(i),g},triangle:function(a,b,c){var e=d[1],f=h.trianglePath(a,b,e);return c.paper.path(f.join(","))},linetriangle:function(a,b,c){var e=d[1],f=h.trianglePath(a,b,e),g=c.paper.set();g.push(c.paper.path(f.join(",")));var i=h.lineThrouth(a,b,e,c);return g.push(i),g}},j={};for(var k in i)!function(b){var d=i[b];j[b]=function(b,e,f){var g=d.call(i,b,e,f);f.size&&(c(f.size)||(f.size=[f.size,f.size]),g.scale(f.size[0],f.size[1]));var h,j,k=f.attrs||{};return g.clear?(h=g[0],j=g[1],j.attr({stroke:k.fill||"#000","stroke-width":2*f.size[1]})):h=g,h.attr(a.merge({"stroke-width":0},f.attrs)),g}}(k);return j.BASIC=d,j}),KISSY.add("gallery/kcharts/1.3/linechart/theme",function(){var a="{COLOR}",b={"ks-chart-default":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{stroke:"#fff",r:4,"stroke-width":1.5,fill:a},hoverAttr:{stroke:"#fff",r:5,fill:a,"stroke-width":0}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#000"}},xAxis:{css:{color:"#000"}},xLabels:{css:{color:"#000","font-size":"12px"}},yLabels:{css:{color:"#000","font-size":"12px"}},pointLine:{css:{color:"#aaa"}}},"ks-chart-analytiks":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{type:"circle",stroke:"{COLOR}",fill:"#fff",r:4,"stroke-width":2},hoverAttr:{type:"circle",stroke:"{COLOR}",fill:"#fff",r:5,"stroke-width":2}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}},pointLine:{css:{color:"#ccc"}}},"ks-chart-rainbow":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{type:"circle",stroke:"#fff",r:4,"stroke-width":1.5,fill:a},hoverAttr:{type:"circle",stroke:"#fff",r:5,fill:a,"stroke-width":0}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}},pointLine:{css:{color:"#ccc"}}}};return b}),KISSY.add("gallery/kcharts/1.3/linechart/cfg",function(){var a="ks-chart-",b=a+"default",c="{COLOR}";return{themeCls:b,autoRender:!0,comparable:!1,lineType:"straight",colors:[],title:{content:"",css:{"text-align":"center","font-size":"16px"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px"},isShow:!0},points:{isShow:!0,attr:{type:"circle",stroke:"#fff",r:4,"stroke-width":1.5,fill:c},hoverAttr:{type:"circle",stroke:"#fff",r:5,fill:c,"stroke-width":0}},xLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},yLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},xAxis:{isShow:!0,css:{zIndex:10}},yAxis:{isShow:!0,css:{zIndex:10},num:5},xGrids:{isShow:!0,css:{}},yGrids:{isShow:!0,css:{}},areas:{isShow:!1,attr:{fill:"90-#fff-"+c,"stroke-width":0,opacity:.5}},line:{isShow:!0,attr:{"stroke-width":"3px"},hoverAttr:{"stroke-width":"4px"}},pointLine:{isShow:!1,css:{}},legend:{isShow:!1},tip:{isShow:!0,clsName:"",template:"",css:{},offset:{x:0,y:0},boundryDetect:!0}}}),KISSY.add("gallery/kcharts/1.3/linechart/index",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s=a.all,t="ks-chart-",u=t+"evtlayout",v="{COLOR}",w=["circle","triangle","rhomb","square"],x={initializer:function(){this.init()},init:function(){var b=this;b.chartType="linechart";var c=a.clone(q);b._cfg=a.mix(c,b.userConfig,void 0,void 0,!0),h.prototype.init.call(b,b._cfg),b._cfg.autoRender&&b.render()},render:function(){var b,c,d=this,e=d._cfg,f=e.themeCls;if(d._$ctnNode[0]){h.prototype.dataFormat.call(d,d._cfg),d._lines={},d._evtEls={},d._finished=[],d._hoverstocks={},f=d._cfg.themeCls||q.themeCls,d._cfg=a.mix(a.clone(a.mix(q,l[f],void 0,void 0,!0)),d._cfg,void 0,void 0,!0),c=d.color=new i({themeCls:f}),d._cfg.colors.length>0&&c.removeAllColors();for(var k in d._cfg.colors)c.setColor(d._cfg.colors[k]);d.__cfg=d.cloneSeriesConfig(["line","points"]),points=d._points[0],b=Math.round(points&&points[0]&&points[1]&&points[1].x-points[0].x||d.getInnerContainer().width),b&&d.set("area-width",b),d.beforeRender(),d._$ctnNode.html(""),d.paper=g(d._$ctnNode[0],e.width,e.height),d.htmlPaper=new j(d._$ctnNode,{clsName:f}),h.Common.drawTitle.call(null,this,f),h.Common.drawSubTitle.call(null,this,f),d.renderTip(),h.Common.drawGridsX.call(null,this),h.Common.drawGridsY.call(null,this),d.drawPointLine(),h.Common.drawAxisX.call(null,this),h.Common.drawAxisY.call(null,this),h.Common.drawLabelsX.call(null,this),h.Common.drawLabelsY.call(null,this),d.drawLines(function(){d.__drawHoverStocks(),d.renderEvtLayout(),d.bindEvt(),d.renderLegend(),d.afterRender()}),a.log(d)}},cloneSeriesConfig:function(b){var c,d=this,e={},f=a.clone(d._cfg);if(b){for(var g in b)for(var h in d._cfg.series)c=d._cfg.series[h][b[g]]?a.mix(f[b[g]],d._cfg.series[h][b[g]],void 0,void 0,!0):d._cfg[b[g]],c&&(e[b[g]]||(e[b[g]]=[]),e[b[g]][h]=c);return e}},drawLine:function(a){var b=this,c=b._points[a];if(c&&c.length){b.drawArea(a);var d=h.Common.getLinePath.call(null,b,c),e=b.paper,f=b.color.getColor(a).DEFAULT,g=b.__cfg.line[a].attr,i=e.path(d).attr(g).attr({stroke:f});return b._stocks[a].stocks=b.drawStocks(a,b.processAttr(b._cfg.points.attr,f)),b._finished.push(!0),i}},drawArea:function(a){if(this._cfg.areas.isShow){var b=this,c=b._points[a];if(c&&c.length){var d=b.getAreaPath(c),e=b.paper,f=b.color.getColor(a).DEFAULT,g=b._cfg.areas.attr;b._areas[a]={0:e.path(d).attr(b.processAttr(g,f)),attr:g,path:d}}}},getAreaPath:function(a){var b=this,c=h.Common.getLinePath.call(null,b,a),d=b.getInnerContainer(),e=g.pathBBox(c),f=[c," L",e.x2,",",d.br.y," ",e.x,",",d.bl.y," z"].join("");return f},getFirstUnEmptyPointIndex:function(a){var b=this,c=b._points[a];for(var d in c)if(!b.isEmptyPoint(c[d]))return d},animateLine:function(a,b){var c,d,e,f,i=this,j=0,k=0,l=[],m=i._cfg,n=i.color,p=i.paper,q=i._points[a],r=h.Common.getLinePath.call(null,i,q),s=g.getTotalLength(r),t=m.anim?m.anim.duration||500:500,u="easeNone",v=i.get("area-width"),w=i.__cfg.line[a].attr,x=p.path(c).attr(w).attr({stroke:n.getColor(a).DEFAULT});for(var y in i._points[a])l[y]="";f=i.getFirstUnEmptyPointIndex(a),l[f]=i.drawStock(a,f);new o({},{},{duration:t,easing:u,frame:function(){d=arguments[1]*s,c=g.getSubpath(r,k,d),e=g.pathBBox(c),j=Math.floor(1.01*e.width/v)- -f,!l[j]&&q[j]&&(l[j]=i.drawStock(a,j));for(var b in q)j>b&&!l[b]&&(l[b]=i.drawStock(a,b));x&&x.attr({path:c})},endframe:function(){i._stocks[a].stocks=l,i._finished.push(!0),i._finished.length==m.series.length&&b&&b(),i.__drawHoverStocks(a)}});return x},__drawHoverStocks:function(){var a=this;for(var b in a._stocks)a.removeHoverStock(b),a._hoverstocks[b]=a.drawStock(b,a.getFirstUnEmptyPointIndex(b),{x:0,y:0}).attr(a._stocks[b].hoverAttr).hide()},removeHoverStock:function(a){var b=this;b._hoverstocks[a]&&b._hoverstocks[a].remove&&b._hoverstocks[a].remove(),delete b._hoverstocks[a]},drawLines:function(b){var c=this,d=c._cfg,e=w.length;c._lines={},c._stocks={};for(var f in c._points){var g,i=h.Common.getLinePath.call(null,c,c._points[f]),j=c.color.getColor(f),k=c.processAttr(c._cfg.points.attr,j.DEFAULT),l=c.processAttr(c._cfg.points.hoverAttr,j.HOVER);c._stocks[f]={points:c._points[f],color:j,attr:k,hoverAttr:l,type:"auto"==k.type?w[f%e]:k.type},g=d.anim?c.animateLine(f,b):c.drawLine(f),c._lines[f]={line:g,path:i,points:c._points[f],color:j,attr:a.mix({stroke:j.DEFAULT},c._cfg.line.attr),isShow:!0},c._finished.length==d.series.length&&b&&b()}return c._lines},processAttr:function(b,c){var d=a.clone(b);for(var e in d)d[e]&&"string"==typeof d[e]&&(d[e]=d[e].replace(v,c));return d},drawStocks:function(a){var b=this,c=[];for(var d in b._points[a])c.push(b.drawStock(a,d));return c},drawStock:function(b,c,d){if(this._cfg.points.isShow||void 0!==d){var e,f=this,g=f._cfg,h=f.paper,i=f.color,j=i.getColor(b).DEFAULT,k=f.processAttr(g.points.attr,j),l=f._stocks[b].type,m=f._points[b][c],n=g.points.template,d=d||{},o=void 0!==d.x?d.x:m.x,q=void 0!==d.y?d.y:m.y,r=k.r;if(void 0!==o&&void 0!==q){if(a.isFunction(n))return n({paper:h,lineIndex:b,stockIndex:c,attr:k,color:j,graphTool:p,x:o,y:q});switch(l){case"triangle":e=p.triangle(h,o,q,1.4*r);break;case"rhomb":e=p.rhomb(h,o,q,2.4*r,2.4*r);break;case"square":e=p.rhomb(h,o,q,2.4*r,2.4*r,45);break;default:e=h.circle(o,q,r,k)}return e.attr(k).attr({cx:o,cy:q}),e}}},drawPointLine:function(){if(this._cfg.comparable){var a=this,b=a.htmlPaper,c=a._cfg.themeCls+"-pointline",d=a._innerContainer;return a._pointline=b.lineY(0,d.tl.y,d.height).addClass(c).css(a._cfg.pointLine.css).css({display:"none"}),a._pointline}},renderTip:function(){if(this._cfg.tip.isShow){var b=this,c=b._cfg,d=b._innerContainer,e=c.tip.boundryDetect?{x:d.tl.x,y:d.tl.y,width:d.width,height:d.height}:{},f=a.mix(c.tip,{rootNode:b._$ctnNode,clsName:c.themeCls,boundry:e},void 0,void 0,!0);return b.tip=new n(f),b.tip}},renderEvtLayout:function(){var a,b=this,c=b._innerContainer,d=(c.tl.y,b._points[0]),e=d&&d[0]&&d[1]&&d[1].x-d[0].x||c.width,f=c.height,g=b._evtEls._areas=[],h=b._evtEls._rects=[];a=b._evtEls.paper?b._evtEls.paper:b._evtEls.paper=new j(b._$ctnNode,{clsName:u,prependTo:!1,width:c.width,height:f,left:c.tl.x,top:c.tl.y,css:{"z-index":20,background:"#fff",filter:"alpha(opacity =1)","-moz-opacity":.01,"-khtml-opacity":.01,opacity:.01}});
for(var i=0,k=d.length;k>i;i++)g[i]={x:d[i].x-e/2,y:c.tl.y,width:e,height:f};for(var i in b._stocks){var l=b._stocks[i],m=[],d=l.points;for(var n in d)m[n]={x:d[n].x-e/2,y:d[n].y-5,width:e,height:10};h[i]=m}},clearEvtLayout:function(){var a=this;a._evtEls._areas&&a._evtEls._areas.length&&(a._evtEls._areas=[]),a._evtEls._rects&&a._evtEls._rects.length&&(a._evtEls._rects=[])},renderLegend:function(){if(this._cfg.legend.isShow){var b=this,c=b._cfg.legend,d=c.container&&s(c.container)[0]?s(c.container):b._$ctnNode,e=b._stocks,f=b._innerContainer,g=b.color._colors,h=g.length,i=b._cfg,j=b._cfg.series,l=a.map(j,function(a,b){b%=h;var c={},d=g[b];c.text=a.text,c.DEFAULT=d.DEFAULT,c.HOVER=d.HOVER;var f=e[b].type;return c.icontype="line"+f,c.iconsize=[1,1],c}),m=a.merge({interval:20,iconright:5,showicon:!0},i.legend.globalConfig);return b.legend=new k({container:d,paper:b.paper,bbox:{width:f.width,height:f.height,left:f.x,top:f.y},align:i.legend.align||"bc",offset:i.legend.offset||[0,30],globalConfig:m,config:l}),b.legend.on("click",function(a){var b=a.index,c=(a.text,a.icon,a.el);1!=c.hide?(this.hideLine(b),c.hide=1,c.disable()):(this.showLine(b),c.hide=0,c.enable())},this),b.legend}},bindEvt:function(){{var a=this,b=(a._cfg,a._evtEls);a.curStockIndex=function(){for(var b in a._stocks)if(a._stocks[b].stocks)return b}()}a.curLineIndex=a.getFirstVisibleLineIndex(),e.detach(b.paper.$paper,"mouseleave"),e.on(b.paper.$paper,"mouseleave",function(){a._lines[0].line.attr(a._lines[0].attr),a.tip&&a.tip.hide(),a._pointline&&a._pointline.hide();for(var b in a._hoverstocks)a._hoverstocks[b].hide();a.curStockIndex=void 0,a.paperLeave()}),e.detach(b.paper.$paper,"mousemove"),e.on(b.paper.$paper,"mousemove",function(b){b=a.getOffset(b),a.delegateMouseMove(b)}),e.detach(b.paper.$paper,"click"),e.on(b.paper.$paper,"click",function(b){b=a.getOffset(b),a.delegateClick(b)})},delegateClick:function(a){var b=this,c=b.getInnerContainer();for(var d in b._evtEls._rects)for(var e in b._evtEls._rects[d]){var f=b._evtEls._rects[d][e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height))return void b.stockClick(d,e)}},delegateMouseMove:function(a){var b=this,c=b.getInnerContainer(),d=b.curStockIndex;for(var e in b._evtEls._areas){var f=b._evtEls._areas[e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height)&&(void 0===d||d!=e))return b.curStockIndex=e,void b.tipHandler(b.curLineIndex,b.curStockIndex)}for(var e in b._evtEls._rects)for(var g in b._evtEls._rects[e]){var h=b._evtEls._rects[e][g];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,h.x,h.y,h.width,h.height)){if(b.curLineIndex===e)return;return b.lineChangeTo(e),void b.tipHandler(b.curLineIndex,b.curStockIndex)}}},lineChangeTo:function(a){var b=this,c=(b._cfg,b.__cfg.line[a].hoverAttr);if(!b._isAnimating&&b._lines[a].isShow){for(var d in b._stocks)b._stocks[d].points=b._points[d];for(var d in b._lines)d!=a&&b._lines[d].line&&b._lines[d].line.attr(b.__cfg.line[d].attr);b.removeLine(a),b._lines[a].line=b.drawLine(a).attr(c),b.__drawHoverStocks(),b.curLineIndex=a}},tipHandler:function(b,c){var d=this;if(void 0!==b&&void 0!==c){var e,f=d.tip,g=d._cfg,i=g.series,j=g.tip.template,k=(f.getInstance(),d._points[b]),l=(d._stocks[b],k[c]),m=d._lines[b].color.DEFAULT;if(j&&g.tip.isShow&&void 0!==d.curStockIndex){if(d._cfg.comparable){var n={datas:{}},o=[];for(var p in d._points)if(d._stocks[p].stocks&&d._points[p][c].dataInfo){d._points[p][c].dataInfo.color=d._stocks[p].color.DEFAULT;var q=a.merge(d._points[p][c].dataInfo,i[p]);delete q.data,n.datas[p]=q}for(var p in n.datas)o.push(n.datas[p]);n.datas=h.prototype.arraySort(o,!0,"y"),e=n}else e=a.merge(d._points[b][c].dataInfo,i[b]),delete e.data;d.stockChange(b,c),d.isEmptyPoint(k[c])||(e.lineindex=b,e.pointindex=c,f.fire("setcontent",{data:e}),f.fire("move",{x:l.x,y:l.y,style:d.processAttr(g.tip.css,m)}))}}},stockChange:function(b,c){var d=this,e=d._points[b],f=d._stocks[b],g=f.stocks&&f.stocks[c];if(e&&!d.isEmptyPoint(e[c])&&d._lines[b].isShow)if(d._pointline&&d._pointline.css({left:d._pointsX[c].x}).show(),d._cfg.comparable)for(var h in d._hoverstocks){var i=d._points[h][c];d._lines[h].isShow&&d._hoverstocks[h].transform(["T",i.x,",",i.y].join("")).show()}else{var i=e[c];d._lines[b].isShow&&d._hoverstocks[b].transform(["T",i.x,",",i.y].join("")).show()}else{var j=d.getFirstNotEmptyPointsLineIndex(c);j&&d.lineChangeTo(j)}if(d._points[b][c].dataInfo&&d._lines[b].isShow){var k=a.mix({target:g,currentTarget:g,lineIndex:Math.round(b),stockIndex:Math.round(c)},f.points[c]);d.fire("stockChange",k)}},getFirstNotEmptyPointsLineIndex:function(a){var b=this;for(var c in b._points)if(!b.isEmptyPoint(b._points[c][a])&&b._lines[c].isShow)return c+"";return""},getFirstVisibleLineIndex:function(){var a=this;for(var b in a._lines)if(a._lines[b].isShow)return b},isEmptyPoint:function(a){return a&&a.dataInfo?!1:!0},removeArea:function(a){this._areas&&this._areas[a]&&(this._areas[a].remove&&this._areas[a].remove(),delete this._areas[a])},removeStock:function(a){var b=this;for(var c in b._stocks[a].stocks)b._stocks[a].stocks[c]&&b._stocks[a].stocks[c].remove();delete b._stocks[a].stocks},transformLine:function(a){var b=this,c=500,d=h.Common.getLinePath.call(null,b,b._points[a]),e=b._lines[a].path;e!=d&&""!=d&&(b._isAnimating=!0,b.__transformArea(a,c),b.__transformStock(a,c),b.__transformLine(a,{path:d},c,function(){b._isAnimating=!1}))},__transformArea:function(a,b,c){var d=this,e=d._areas[a],f=d.getAreaPath(d._points[a]);e&&(e[0]&&e[0].stop()&&e[0].animate({path:f},b,c),e.path=f)},__transformLine:function(a,b,c,d){var e=this,f=e._lines[a];f.line&&f.line.stop()&&f.line.animate(b,c,d),f.path=b.path},__transformStock:function(a,b){var c,d=this,e=d._stocks[a];for(var f in e.stocks)e.stocks[f]&&(c=e.stocks[f],c.stop().animate({transform:"T"+(e.points[f].x-e.stocks[f].attr("cx"))+","+(e.points[f].y-e.stocks[f].attr("cy"))},b))},removeLine:function(a){var b=this;b._lines[a].line.remove(),b._areas[a]&&b._areas[a][0]&&b._areas[a][0].remove&&b._areas[a][0].remove();for(var c in b._stocks)a==c&&(b.removeStock(a),b.removeArea(a),b.removeHoverStock(a)),b._stocks[c].points=b._points[c]},hideLine:function(b){var c=this;if(c._lines[b].isShow){c._lines[b].isShow=!1,b==c.curLineIndex&&(c.curLineIndex=c.getFirstVisibleLineIndex()),h.prototype.removeData.call(c,b),h.Common.animateGridsAndLabels.call(null,c),c.removeLine(b);for(var d in c._lines)d!=b&&c.transformLine(d);c.clearEvtLayout(),c.renderEvtLayout(),c.bindEvt(),a.log(c)}},showLine:function(a){var b=this;if(!b._lines[a].isShow){b._lines[a].isShow=!0,b._cfg.series[a].isShow=!0,h.prototype.recoveryData.call(b,a),h.Common.animateGridsAndLabels.call(null,b),b._lines[a].line=b.drawLine(a),b.__drawHoverStocks();for(var c in b._stocks)b._stocks[c].points=b._points[c];for(var c in b._lines)b.transformLine(c);b.clearEvtLayout(),b.renderEvtLayout(),b.bindEvt()}},paperLeave:function(){var a=this;a.fire("paperLeave",a)},stockClick:function(b,c){var d=this,e=d._stocks[b],f=e.stocks&&e.stocks[c],g=a.mix({target:f,currentTarget:f,lineIndex:Math.round(b),stockIndex:Math.round(c)},e.points[c]);d.fire("stockClick",g)},beforeRender:function(){var a=this;a.fire("beforeRender",a)},afterRender:function(){var a=this;a.fire("afterRender",a)},getHtmlPaper:function(){return this.htmlPaper},getRaphaelPaper:function(){return this.paper},clear:function(){this._$ctnNode.html("")}};return b.extend?r=h.extend(x):(r=function(a){var b=this;b.userConfig=a,b.init()},a.extend(r,h,x)),r},{requires:["base","node","dom","event","gallery/template/1.0/index","gallery/kcharts/1.3/raphael/index","gallery/kcharts/1.3/basechart/index","gallery/kcharts/1.3/tools/color/index","gallery/kcharts/1.3/tools/htmlpaper/index","gallery/kcharts/1.3/legend/index","./theme","gallery/kcharts/1.3/tools/touch/index","gallery/kcharts/1.3/tip/index","gallery/kcharts/1.3/animate/index","gallery/kcharts/1.3/tools/graphtool/index","./cfg"]}),KISSY.add("mustache",function(){var a=function(){var a=function(){};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){if(d||(this.context=b,this.buffer=[]),!this.includes("",a))return d?a:void this.send(a);a=this.render_pragmas(a);var e=this.render_section(a,b,c);return d?this.render_tags(e,b,c,d):void this.render_tags(e,b,c,d)},send:function(a){""!==a&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g");return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};if(b.pragmas[c]={},d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,c){if(a=this.trim(a),!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};return"object"!=typeof b[a]?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this,e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return a.replace(e,function(a,e,f,g){var h=d.find(f,b);return"^"==e?!h||d.is_array(h)&&0===h.length?d.render(g,b,c,!0):"":"#"==e?d.is_array(h)?d.map(h,function(a){return d.render(g,d.create_context(a),c,!0)}).join(""):d.is_object(h)?d.render(g,d.create_context(h),c,!0):"function"==typeof h?h.call(b,g,function(a){return d.render(a,b,c,!0)}):h?d.render(g,b,c,!0):"":void 0})},render_tags:function(a,b,c,d){for(var e=this,f=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},g=f(),h=function(a,d,h){switch(d){case"!":return"";case"=":return e.set_delimiters(h),g=f(),"";case">":return e.render_partial(h,b,c);case"{":return e.find(h,b);default:return e.escape(e.find(h,b))}},i=a.split("\n"),j=0;j<i.length;j++)i[j]=i[j].replace(g,h,this),d||this.send(i[j]);return d?i.join("\n"):void 0},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return a===!1||0===a||a}a=this.trim(a);var d;return c(b[a])?d=b[a]:c(this.context[a])&&(d=this.context[a]),"function"==typeof d?d.apply(b):void 0!==d?d:""},includes:function(a,b){return-1!=b.indexOf(this.otag+a)},escape:function(a){return a=String(null===a?"":a),a.replace(/&(?!\w+;)|["'<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},is_array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;d>e;e++)c.push(b(a[e]));return c}},{name:"mustache.js",version:"0.3.1-dev",to_html:function(b,c,d,e){var f=new a;return e&&(f.send=e),f.render(b,c,d),e?void 0:f.buffer.join("\n")}}}();return a}),KISSY.add("mu",function(a,b){function c(a,b){for(var c=d(a),f="",g=0;g<c.length;g++)f="if("+c[g]+")",b[f]||(b[f]=e(c[g]))}function d(a){var b=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,c=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,d=a.match(b),e=[];if(d)for(var f=0;f<d.length;f++)e.push(d[f].match(c)[1]);return e}function e(a){a=a.split("==");var b=function(){for(var b=a[0].split("."),c=a[1],d=this,e=b.length-1;e>-1;e--){var f=b.slice(e),g=d;try{for(var h=0;h<f.length-1;h++)g=g[f[h]];if(f[f.length-1]in g)return g[f[f.length-1]].toString()===c?!0:!1}catch(i){}}return!1};return b}function f(a,b){var c,d;for(c in a)d=a[c],d instanceof Array?g(d):"object"==typeof d&&5>b&&f(d,b+1)}function g(a){for(var b=0;b<a.length;b++){var c=a[b];"object"==typeof c&&(0===b?c.__first__=!0:b===a.length-1?c.__last__=!0:c.__mid__=!0,c.__index__=b)}}var h=/\s*<script[^>]+type\s*=\s*(['"])\s*text\/tmpl\1[^>]*>([\s\S]*?)<\/script>\s*/gi;return{to_html:function(a,d){"object"==typeof d&&f(d,0);var e=a.match(h);if(e&&(a=a.replace(h,function(){return'<script type="text/tmpl"></script>'})),a=a.replace(/(\{{2,3})@if/gi,"$1#if"),c(a,d),a=b.to_html.apply(this,arguments),e){var g=0;a=a.replace(h,function(){return e[g++]})}return a},name:b.name,version:b.version,tags:b.tags,Scanner:b.Scanner,Context:b.Context,Writer:b.Writer,escape:b.escape,parse:b.parse,clearCache:b.clearCache,compile:b.compile,compilePartial:b.compilePartial,compileTokens:b.compileTokens,render:function(){return this.to_html.apply(this,arguments)}}},{requires:["mustache"]}),KISSY.add("cookie",[],function(a){function b(a){return"string"==typeof a&&""!==a}var c=a.Env.host.document,d=864e5,e=encodeURIComponent,f=a.urlDecode;return a.Cookie={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=g;"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+g*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(h)&&(k+="; domain="+h),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k},remove:function(a,b,c,d){this.set(a,"",-1,b,c,d)}},a.Cookie}),KISSY.add("gallery/slide/1.2/kissy2yui",function(a){"use strict";a.augment(a.Node,{_delegate:function(){var b=this;return a.isFunction(arguments[1])?b.delegate(arguments[0],arguments[2],arguments[1]):b.delegate.apply(b,arguments),b},indexOf:function(b){var c=this;if(a.isUndefined(b))return null;b[0]&&(b=b[0]);var d=0;return c.each(function(a,c){a[0]===b&&(d=c)}),d},size:function(){return this.length},set:function(a,b){return"innerHTML"===a?this.html(b):this.attr(a,b),this},get:function(a){var b=this,c={innerHTML:function(){return b.html()},region:function(){return{height:b.height(),width:b.width()}}};return a in c?c[a]():void 0},appendChild:function(){return this.append.apply(this,arguments),this},setStyle:function(){return this.css.apply(this,arguments),this},setStyles:function(){return this.css.apply(this,arguments),this},cloneNode:function(){return this.clone.apply(this,arguments)}}),a.Node.create=function(b){return a.Node(b)}},{requires:["node","event"]}),KISSY.add("gallery/slide/1.2/slide-util",function(a){"use strict";a.mix(a,{setHash:function(a,b){var c,d;"object"==typeof a?(c=window.location.href,b=a):c=a,c.indexOf("#")<0&&(c+="#");var e=this.getHash(c);for(d in b)e[d]=b[d];c=c.split("#")[0]+"#";for(d in e)c+=d+"="+e[d]+"&";return c=c.substr(0,c.length-1)},getHash:function(b){var c=b||window.location.href;if(c.indexOf("#")<0)return{};var d=c.split("#")[1];if(""===d)return{};"&"==d[d.length-1]&&(d=d.substr(0,d.length-1)),d=d.replace(/"/gi,"'"),d=d.replace(/=/gi,'":"'),d=d.replace(/&/gi,'","'),d+='"',d='{"'+d+"}";var e=a.JSON.parse(d);return e},_globalEval:function(a){if(a&&/\S/.test(a)){var b=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],c=document.createElement("script");c.text=a,b.insertBefore(c,b.firstChild),setTimeout(function(){b.removeChild(c)},1)}},execScript:function(b){var c,d,e,f,g,h,i=this,j=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi),k=a.one("head").getDOMNode(),l=/\ssrc=(['"])(.*?)\1/i,m=/\scharset=(['"])(.*?)\1/i;for(j.lastIndex=0;c=j.exec(b);)d=c[1],e=d?d.match(l):!1,e&&e[2]?(g=document.createElement("script"),g.src=e[2],(f=d.match(m))&&f[2]&&(g.charset=f[2]),g.async=!0,k.appendChild(g)):(h=c[2])&&h.length>0&&i._globalEval(h)},isDaily:function(){return/daily\.taobao\.net/.test(window.location.hostname)?!0:!1},getHiddenProp:function(){if("hidden"in document)return"hidden";for(var a=["webkit","moz","ms","o"],b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null},isHidden:function(){var a=this.getHiddenProp();return a?document[a]:!1}})},{requires:["node","json","event"]}),KISSY.add("gallery/slide/1.2/base",function(a){"use strict";var b=(a.Node.all,function(){if(!(this instanceof b))throw new Error('please use "new Slide()"');this.init.apply(this,arguments)});return b.plug=function(){},a.augment(b,a.Event.Target,{init:function(b,c){var d=this;if(a.isObject(b))d.con=b;else if(/^#/i.test(b))d.con=a.one(b);else if(a.one("#"+b))d.con=a.one("#"+b);else{if(!a.one(b))throw new Error("Slide Container Hooker not found");d.con=a.one(b)}if(d.buildParam(c),d.buildHTML(),d.bindEvent(),d.fire("ready",{index:0,navnode:d.tabs.item(0),pannelnode:d.pannels.item(0)}),d.reverse){var e;e=d.previous,d.previous=d.next,d.next=e}if(d.carousel)for(var f=0;f<d.colspan;f++)d.fix_for_transition_when_carousel(2*f);return d.fixSlideSize(),d.layerSlide&&d.initLayer(),d.renderPannelTextarea(d.currentTab),this},setWrapperSize:function(b){var c=this;a.isUndefined(b)&&(b=0),c.pannels=c.con.all("."+c.contentClass+" ."+c.pannelClass),c.length=c.pannels.length;var d={none:function(){},vSlide:function(){var a=c.animcon.get("region");c.animwrap.setStyles({height:(c.length+b)*a.height/c.colspan+"px"})},hSlide:function(){var a=c.animcon.get("region");c.animwrap.setStyles({width:(c.length+b)*a.width/c.colspan+"px"})},fade:function(){}};return d[c.effect](),a.isUndefined(b)||c.relocateCurrentTab(),this},add:function(b,c){var d=this;return(a.isUndefined(c)||c>d.length)&&(c=d.length),a.isString(b)&&(b=a.one(b)),d.transitions&&b.css({visibility:"hidden"}),c==d.length?(setTimeout(function(){d.setWrapperSize(1)},0),b.insertAfter(d.pannels[c-1])):b.insertBefore(d.pannels[c]),d.setWrapperSize(),d.fixSlideSize(d.currentTab),d.transitions&&b.css({visibility:""}),d.transitions,this},remove:function(b){var c=this;if(1!==c.length)return b<=c.currentTab&&(c.currentTab--,c.length--),c.transitions&&c.con.css({display:"none"}),a.one(c.pannels[b]).remove(),c.setWrapperSize(),c.transitions&&c.con.css({display:"block"}),c.fixSlideSize(c.currentTab),this},removeLast:function(){var a=this;return a.remove(a.length-1),a},renderLazyData:function(b){if(b.setStyle("display","none"),"1"!=b.attr("lazy-data")){if(b.attr("lazy-data","1"),a.isUndefined(d)){String(a.now())}else{a.stamp(d)}var c=b.get("innerHTML").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),d=a.Node.create("<div>"+c+"</div>");a.DOM.insertBefore(d,b),a.execScript(c)}},renderPannelTextarea:function(b){var c=this;if(c.pannels.item(b))for(var d=function(b){var d=(a.one(c.pannels.item(b)),c.pannels.item(b).all(".data-lazyload"));d&&d.each(function(a){c.renderLazyData(a)})},e=0;e<c.colspan;e++)d(b+e)},buildWrap:function(){var b=this;return b.animwrap=a.Node.create('<div style="position:absolute;"></div>'),b.animcon.children().appendTo(b.animwrap),b.animcon.empty().appendChild(b.animwrap),b.pannels=b.con.all("."+b.contentClass+" ."+b.pannelClass),b},doEffectInit:function(){var a=this,b={none:function(){a.pannels=a.con.all("."+a.contentClass+" ."+a.pannelClass),a.pannels.setStyles({display:"none"}),a.pannels.item(a.defaultTab).setStyles({display:"block"})},vSlide:function(){a.buildWrap();var b=a.animcon.get("region");a.pannels.setStyles({"float":"none",overflow:"hidden"}),a.animwrap.setStyles({height:a.length*b.height/a.colspan+"px",overflow:"hidden",top:-1*a.defaultTab*b.height+"px"})},hSlide:function(){a.buildWrap();var b=a.animcon.get("region");a.pannels.setStyles({"float":"left",overflow:"hidden"}),a.animwrap.setStyles(a.transitions?{overflow:"hidden",width:a.length*b.width/a.colspan+"px","-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*a.defaultTab*b.width+"px,0,0)"}:{width:a.length*b.width/a.colspan+"px",overflow:"hidden",left:-1*a.defaultTab*b.width+"px"})},fade:function(){a.pannels=a.con.all("."+a.contentClass+" ."+a.pannelClass),a.pannels.setStyles({position:"absolute",zIndex:0}),a.pannels.each(function(b,c){b.setStyles(c==a.defaultTab?{opacity:1,display:"block"}:{opacity:0,display:"none"})})}};return b[a.effect](),this},buildHTML:function(){var b=this,c=b.con;b.tabs=c.all("."+b.navClass+" "+b.triggerSelector);var d=c.all("."+b.contentClass+" ."+b.pannelClass);if(b.length=d.size(),c.one("."+b.navClass)||a.Node('<ul class="'+b.navClass+'" style="display:none"></ul>').appendTo(b.con),0===b.tabs.size()){for(var e=c.all("."+b.navClass),f="",g=0;g<b.length;g++){var h="";0===g&&(h=b.selectedClass),f+='<li class="'+h+'"><a href="javascript:void(0);">'+(g+1)+"</a></li>"}e.set("innerHTML",f)}return b.tabs=c.all("."+b.navClass+" "+b.triggerSelector),b.animcon=c.one("."+b.contentClass),b.animwrap=null,b.doEffectInit(),b.carousel?(b.fixSlideSize(b.currentTab-b.colspan),b.highlightNav(b.currentTab-b.colspan)):(b.fixSlideSize(b.currentTab),b.highlightNav(b.getWrappedIndex(b.currentTab))),b.autoSlide===!0&&(b.invisibleStop&&b.isSlideVisible()||!b.invisibleStop)&&b.play(),this},getCurrentPannel:function(){var b=this;return a.one(b.pannels[b.currentTab])},renderWidth:function(){var a=this,b=a.animcon.get("region").width;return"hSlide"==a.effect&&(b/=a.colspan),a.pannels.setStyles({width:b+"px"}),this},renderHeight:function(){var a=this,b=a.animcon.get("region").height;return"vSlide"==a.effect&&(b/=a.colspan),a.pannels.setStyles({height:b+"px"}),this},relocateCurrentTab:function(b){var c=this;return a.isUndefined(b)&&(b=c.currentTab),"hSlide"==c.effect?(c.animwrap.setStyles(c.transitions?{"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*b*c.animcon.get("region").width/c.colspan+"px,0,0)","-webkit-backface-visibility":"hidden"}:{left:-1*b*c.animcon.get("region").width/c.colspan}),c.currentTab=b,this):void 0},fixSlideSize:function(a){var b=this;return b.adaptive_fixed_width&&b.renderWidth(),b.adaptive_fixed_height&&b.renderHeight(),b.adaptive_fixed_size&&b.renderHeight().renderWidth(),b.resetSlideSize(a),this},removeHeightTimmer:function(){var b=this;a.isNull(b.heightTimmer)||(clearInterval(b.heightTimmer),b.heightTimmer=null)},addHeightTimmer:function(){var b=this;a.isNull(b.heightTimmer)||(clearInterval(b.heightTimmer),b.heightTimmer=null);var c=function(){"hSlide"==b.effect&&b.animcon.setStyles({height:b.pannels.item(b.currentTab).get("region").height+"px"})};b.heightTimmer=setInterval(c,100),c()},resetSlideSize:function(a){var b,c,d=this;return("undefined"==typeof a||null===a)&&(a=d.currentTab),"hSlide"==d.effect||"vSlide"==d.effect?("hSlide"==d.effect&&(b=d.adaptive_width?d.adaptive_width():d.animcon.get("region").width,c=d.pannels.item(a).get("region").height,d.animwrap.setStyles({width:d.pannels.size()*b+"px"}),b/=d.colspan,d.pannels.setStyles({width:b+"px",display:"block"}),d.animcon.setStyles({width:b*d.colspan+"px",overflow:"hidden"}),d.animWrapperAutoHeightSetting&&d.animcon.setStyles({height:c+"px"})),"vSlide"==d.effect&&(b=d.pannels.item(a).get("region").width,c=d.adaptive_height?d.adaptive_height():d.animcon.get("region").height,d.animwrap.setStyles({height:d.pannels.size()*c+"px"}),c/=d.colspan,d.pannels.setStyles({height:c*d.colspan+"px",display:"block"}),d.animcon.setStyles({height:c*d.colspan+"px",overflow:"hidden"}),d.animWrapperAutoHeightSetting&&d.animcon.setStyles({width:b+"px"})),this):void 0},getWrappedIndex:function(a){var b=this,c=0;return c=b.carousel?a<b.colspan?b.length-3*b.colspan+a:a>=b.length-b.colspan?a-(b.length-b.colspan):a-b.colspan:a},getMousePosition:function(){var b=this,c=function(a){b._t_mouseX=a.clientX,b._t_mouseY=a.clientY};a.Event.on(document,"mousemove",c),setTimeout(function(){a.Event.detach(window,"mouseover",c)},b.triggerDelay)},massTrigger:function(b,c){var d=this;return a.inArray(d.eventType,["mouseover","mouseenter"])?(d.getMousePosition(),void(a.isUndefined(d._fired)||a.isNull(d._fired)?d._fired=setTimeout(function(){d.inRegion([d._t_mouseX+a.DOM.scrollLeft(),d._t_mouseY+a.DOM.scrollTop()],a.one(c))&&b(a.one(c)),d._fired=null},d.triggerDelay):(clearTimeout(d._fired),d._fired=setTimeout(function(){d.inRegion([d._t_mouseX+a.DOM.scrollLeft(),d._t_mouseY+a.DOM.scrollTop()],a.one(c))&&b(a.one(c)),d._fired=null},d.triggerDelay)))):void b(a.one(c))},getMaxAnimDelay:function(b){var c=this,d=0;if(c.sublayers)return a.each(c.sublayers[b],function(a){a.durationout+a.delayout>d&&(d=a.durationout+a.delayout)}),d},inRegion:function(a,b){var c=b.offset(),d={width:b.width(),height:b.height()};return a[0]>=c.left&&a[0]<=c.left+d.width&&a[1]>=c.top&&a[1]<=c.top+d.height?!0:!1},bindEvent:function(){var b=this;if(a.inArray(b.eventType,["click","mouseover","mouseenter"])&&b.con._delegate(b.eventType,function(a){a.preventDefault(),b.massTrigger(function(a){var c=Number(b.tabs.indexOf(a));b.carousel&&(c=(c+1)%b.length),b.go(c),b.autoSlide&&b.stop().play()},a.currentTarget)},"."+b.navClass+" "+b.triggerSelector),b.hoverStop&&(b.con._delegate("mouseover",function(){b.isMouseover=!0,b.autoSlide&&b.stop()},"."+b.contentClass+" ."+b.pannelClass),b.con._delegate("mouseout",function(){b.isMouseover=!1,b.autoSlide&&b.play()},"."+b.contentClass+" ."+b.pannelClass)),a.one(window).on("resize",function(){b.fixSlideSize(b.currentTab),b.relocateCurrentTab()}),b.on("beforeSwitch",function(){return this.layerSlide&&this.isAming()?!1:void 0}),"ontouchstart"in document.documentElement){if(!b.touchmove)return this;b.con._delegate("touchstart",function(a){b.stop(),b.touching=!0,b.is_last()&&b.carousel&&b.fix_next_carousel(),b.is_first()&&b.carousel&&b.fix_pre_carousel(),b.startX=a.changedTouches[0].clientX,b.startY=a.changedTouches[0].clientY,b.animwrap.setStyles({"-webkit-transition-duration":"0s"}),b.startT=Number(new Date)},"."+b.contentClass),b.con._delegate("touchend",function(a){b.touching=!1;var c=a.changedTouches[0].clientX,d=Number(b.animcon.get("region").width);b.deltaX=Math.abs(c-b.startX);var e=Math.abs(c)<Math.abs(b.startX),f=!e,g=b.carousel?!1:b.is_last()&&e||b.is_first()&&f,h=function(){b.animwrap.setStyles({"-webkit-transition-duration":Number(b.speed)/2+"s","-webkit-transform":"translate3d("+-1*b.currentTab*b.animcon.get("region").width/b.colspan+"px,0,0)"})},i=function(){var a=b.animcon.get("region").width/b.colspan,c=parseInt((b.deltaX-a/2)/a,10);e?(c>=1&&b.length>2&&(b.currentTab+=c+1,b.currentTab>=b.length-b.colspan&&(b.currentTab=b.length-b.colspan-1)),b.next()):(c>=1&&b.length>2&&(b.currentTab+=-1*c-1,b.currentTab<=0&&(b.currentTab=1)),b.previous())};return b.touchmove&&b.deltaX<30?void h():(!g&&(b.touchmove&&b.deltaX>d/3||!b.touchmove&&b.carousel||!b.carousel&&b.touchmove&&"hSlide"==b.effect||!b.touchmove&&!b.carousel||Number(new Date)-b.startT<550)?i():h(),void(b.autoSlide&&b.play()))},"."+b.contentClass),b.touchmove&&(b.con._delegate("touchmove",function(a){if(!(a.touches.length>1)){b.deltaX=a.touches[0].clientX-b.startX;var c=b.is_last()&&b.deltaX<0||b.is_first()&&b.deltaX>0;if(!b.carousel&&"hSlide"==b.effect&&c&&(b.deltaX=b.deltaX/3),b.isScrolling=Math.abs(b.deltaX)<Math.abs(a.touches[0].clientY-b.startY)?!0:!1,!b.isScrolling){a.preventDefault(),b.stop();var d=Number(b.animcon.get("region").width/b.colspan),e=b.deltaX-b.currentTab*d;b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+e+"px,0,0)"})}}},"."+b.contentClass),b.animwrap.on("webkitTransitionEnd",function(){}))}if(b.invisibleStop){var c=a.getHiddenProp();if(c){var d,e=c.replace(/[H|h]idden/,"")+"visibilitychange";a.Event.on(document,e,function(){a.isHidden()?b.timer?(d=!0,b.stop()):d=!1:b.isSlideVisible()&&d&&b.play()})}a.Event.on(window,"scroll resize",function(){b.isSlideVisible()?b.timer||b.hoverStop&&(!b.hoverStop||b.isMouseover)||b.play():b.timer&&b.stop()})}return this},isSlideVisible:function(){var b=this,c=b.animcon.offset().left,d=b.animcon.offset().top,e=b.animcon.outerWidth(),f=b.animcon.outerHeight(),g=a.DOM.scrollTop(),h=a.DOM.scrollLeft();return g>d+f||g+a.DOM.height(window)<d||h>c+e||h+a.DOM.width(window)<c?!1:!0},initLayer:function(){var b=this;if(!("ontouchstart"in document.documentElement||a.UA.ie>0&&a.UA.ie<9)){var c=["durationin","easingin","durationout","easingout","delayin","delayout","slideindirection","slideoutdirection","offsetin","offsetout","alpha","easeInStrong","easeOutStrong","easeBothStrong","easeNone","easeIn","easeOut","easeBoth","elasticIn","elasticOut","elasticBoth","backIn","backOut","backBoth","bounceIn","bounceOut","bounceBoth","left","top","right","bottom"],d={durationin:1e3,easingin:"easeIn",durationout:1e3,easingout:"easeOut",delayin:300,delayout:300,slideindirection:"right",slideoutdirection:"left",alpha:!0,offsetin:50,offsetout:50},e=function(b){function e(a,b){var c=h[b];f[b]=void 0===c||null===c?a:c}var f=this,g=b.attr("rel").replace(/"'/gi,"").replace(new RegExp("("+c.join("|")+")","ig"),'"$1"'),h=a.JSON.parse("{"+g+"}");a.each(d,e),this.el=b,this.left=Number(b.css("left").replace("px","")),this.top=Number(b.css("top").replace("px","")),this.animIn=function(){var b=this,c=b.offsetin,d=b.slideindirection,e={left:function(){b.el.css({left:b.left-c})},top:function(){b.el.css({top:b.top-c})},right:function(){b.el.css({left:b.left+c})},bottom:function(){b.el.css({top:b.top+c})}};e[d](),setTimeout(function(){var c={left:{left:b.left},top:{top:b.top},bottom:{top:b.top},right:{left:b.left}},e={};a.mix(e,c[d]),b.alpha&&a.mix(e,{opacity:1}),a.Anim(b.el,e,b.durationin/1e3,b.easingin,function(){}).run()},b.delayin),b.alpha&&b.el.css({opacity:0})},this.animOut=function(){var b=this,c=b.offsetout,d=b.slideoutdirection,e={left:function(){b.el.css({left:b.left})},top:function(){b.el.css({top:b.top})},right:function(){b.el.css({left:b.left})},bottom:function(){b.el.css({top:b.top})}};e[d](),setTimeout(function(){var e={left:{left:b.left+c},top:{top:b.top+c},bottom:{top:b.top-c},right:{left:b.left-c}},f={};a.mix(f,e[d]),b.alpha&&a.mix(f,{opacity:0}),a.Anim(b.el,f,b.durationout/1e3,b.easingout,function(){}).run()},b.delayout),b.alpha&&b.el.css({opacity:1})}};b.sublayers=[],b.pannels.each(function(a,c){return("vSlide"==b.effect||"hSlide"==b.effect)&&a.css({position:"relative"}),0===a.all('[alt="sublayer"]').length?void(b.sublayers[c]=[]):(void 0===b.sublayers[c]&&(b.sublayers[c]=[]),void a.all('[alt="sublayer"]').each(function(a){b.sublayers[c].push(new e(a))}))}),b.on("beforeSwitch",function(a){return a.index===b.currentTab?!1:void b.subLayerRunin(a.index)}),b.on("beforeTailSwitch",function(a){return b.subLayerRunout(a.index),b.getMaxAnimDelay(a.index)})}},subLayerRunin:function(b){var c=this,d=c.sublayers[b];a.each(d,function(a){a.animIn()})},subLayerRunout:function(b){var c=this,d=c.sublayers[b];a.each(d,function(a){a.animOut()})},buildParam:function(b){function c(a,c){var e=b[c];d[c]=void 0===e||null===e?a:e}var d=this;return(void 0===b||null===b)&&(b={}),a.each({autoSlide:!1,speed:500,timeout:3e3,effect:"none",eventType:"click",easing:"easeBoth",hoverStop:!0,invisibleStop:!1,selectedClass:"selected",conClass:"t-slide",navClass:"tab-nav",triggerSelector:"li",contentClass:"tab-content",pannelClass:"tab-pannel",carousel:!1,reverse:!1,touchmove:!1,adaptive_fixed_width:!1,adaptive_fixed_height:!1,adaptive_fixed_size:!1,adaptive_width:!1,adaptive_height:!1,defaultTab:0,layerSlide:!1,layerClass:"tab-animlayer",colspan:1,animWrapperAutoHeightSetting:!0,webkitOptimize:!0,triggerDelay:300,autoActived:!0},c),a.mix(d,{tabs:[],animcon:null,pannels:[],timmer:null,touching:!1}),d.speed=d.speed/1e3,0!==d.defaultTab&&(d.defaultTab=Number(d.defaultTab)-1),d.carousel&&(d.defaultTab=d.colspan+d.defaultTab,d.effect="hSlide"),d.currentTab=d.defaultTab,d.transitions="webkitTransition"in document.body.style&&d.webkitOptimize,d},fix_for_transition_when_carousel:function(a){var b=this;"undefined"==typeof a&&(a=0);var c=b.con;if(b.animcon=b.con.one("."+b.contentClass),b.animwrap=b.animcon.one("div"),b.pannels=c.all("."+b.contentClass+" ."+b.pannelClass),"hSlide"==b.effect){{var d=Number(b.animcon.get("region").width/b.colspan);Number(b.animcon.get("region").height)
}b.animwrap.setStyle("width",b.pannels.size()*d+2*d);var e=b.pannels.item(a).cloneNode(!0),f=b.pannels.item(b.pannels.size()-1-a).cloneNode(!0);if(b.animwrap.append(e),b.animwrap.prepend(f),0!==b.defaultTab)var g=-1*d*(a/2+1+b.defaultTab-1);else var g=-1*d*(a/2+1);b.transitions?b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+g+"px,0,0)","-webkit-backface-visibility":"hidden",left:"0"}):b.animwrap.setStyle("left",g)}return b.pannels=c.all("."+b.contentClass+" ."+b.pannelClass),b.length=b.pannels.size(),this},isAming:function(){var a=this;return a.anim?a.anim.isRunning():!1},previous:function(a){var b=this;try{if(b.isAming()&&b.carousel)return this}catch(c){}var d=b.currentTab+b.length-1-(b.colspan-1);return d>=b.length-b.colspan+1&&(d%=b.length-b.colspan+1),b.carousel&&b.is_first()?(b.fix_pre_carousel(),b.previous.call(b),this):(b.go(d,a),this)},is_last:function(){var a=this;return a.currentTab==a.length-(a.colspan-1)-1?!0:!1},is_first:function(){var a=this;return 0===a.currentTab?!0:!1},next:function(a){var b=this;try{if(b.isAming()&&b.carousel)return this}catch(c){}var d=b.currentTab+1;return d>=b.length-b.colspan+1&&(d%=b.length-b.colspan+1),b.carousel&&b.is_last()?(b.fix_next_carousel(),b.next.call(b),this):(b.go(d,a),this)},fix_next_carousel:function(){var a=this;a.currentTab=a.colspan;var b=a.con;"none"!=a.effect&&(a.pannels=b.all("."+a.contentClass+" ."+a.pannelClass));var c="-"+Number(a.animcon.get("region").width).toString()+"px";"hSlide"==a.effect?a.transitions?a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+c+",0,0)"}):a.animwrap.setStyle("left",c):"vSlide"==a.effect},fix_pre_carousel:function(){var a=this;a.currentTab=a.length-1-2*a.colspan+1;var b=a.con;"none"!=a.effect&&(a.pannels=b.all("."+a.contentClass+" ."+a.pannelClass));var c="-"+(Number(a.animcon.get("region").width/a.colspan)*a.currentTab).toString()+"px";"hSlide"==a.effect?a.transitions?a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+c+",0,0)"}):a.animwrap.setStyle("left",c):"vSlide"==a.effect},highlightNav:function(a){var b=this;return b.carousel&&b.colspan>1?this:(b.tabs.item(a)&&(b.tabs.removeClass(b.selectedClass),b.tabs.item(a).addClass(b.selectedClass)),this)},hightlightNav:function(){var a=this;return a.highlightNav.apply(a,arguments),this},unhighlightNav:function(a){var b=this;return b.carousel&&b.colspan>1?this:(b.tabs.item(a)&&b.tabs.removeClass(b.selectedClass),this)},unhighlightNavAll:function(){var a=this;return a.tabs.removeClass(a.selectedClass),this},switch_to:function(b,c){var d=this;if(c===!1)var e=!1;else var e=!0;var f=function(){a.isFunction(c)&&c.call(d,d),d.fire("afterSwitch",{index:d.currentTab,navnode:d.tabs.item(d.getWrappedIndex(d.currentTab)),pannelnode:d.pannels.item(d.currentTab)})},g=d.fire("beforeTailSwitch",{index:d.currentTab,navnode:d.tabs.item(d.getWrappedIndex(d.currentTab)),pannelnode:d.pannels.item(d.currentTab)});if(d.fixSlideSize(b),d.autoSlide&&d.stop().play(),b>=d.length&&(b%=d.length),b==d.currentTab)return this;if(d.anim)try{d.anim.stop(),d.anim=null}catch(h){}var i={none:function(a){d.pannels.setStyles({display:"none"}),d.pannels.item(a).setStyles({display:"block"}),f()},vSlide:function(b){d.transitions?(d.animwrap.setStyles({"-webkit-transition-duration":(e?d.speed:"0")+"s","-webkit-transform":"translate3d(0,"+-1*b*d.animcon.get("region").height/d.colspan+"px,0)","-webkit-backface-visibility":"hidden"}),e?(d.anim=a.Anim(d.animwrap,{opacity:1},d.speed,d.easing,function(){f()}),d.anim.run()):f()):e?(d.anim=a.Anim(d.animwrap,{top:-1*b*d.animcon.get("region").height/d.colspan},d.speed,d.easing,function(){f()}),d.anim.run()):(d.animwrap.css({top:-1*b*d.animcon.get("region").height/d.colspan}),f())},hSlide:function(b){d.transitions?(d.animwrap.setStyles({"-webkit-transition-duration":(e?d.speed:"0")+"s","-webkit-transform":"translate3d("+-1*b*d.animcon.get("region").width/d.colspan+"px,0,0)","-webkit-backface-visibility":"hidden"}),e?(d.anim=a.Anim(d.animwrap,{opacity:1},d.speed,d.easing,function(){f()}),d.anim.run()):f()):e?(d.anim=a.Anim(d.animwrap,{left:-1*b*d.animcon.get("region").width/d.colspan},d.speed,d.easing,function(){f()}),d.anim.run()):(d.animwrap.css({left:-1*b*d.animcon.get("region").width/d.colspan}),f())},fade:function(b){var c=d.currentTab;d.anim=a.Anim(d.pannels.item(b),{opacity:1},e?d.speed:.01,d.easing,function(){d.pannels.item(c).setStyle("zIndex",0),d.pannels.item(b).setStyle("zIndex",1),d.pannels.item(c).setStyle("opacity",0),d.pannels.item(c).setStyles({display:"none"}),f()}),d.pannels.item(b).setStyles({display:"block"}),d.pannels.item(b).setStyle("opacity",0),d.pannels.item(c).setStyle("zIndex",1),d.pannels.item(b).setStyle("zIndex",2),d.anim.run()}},j=function(){var a=d.fire("beforeSwitch",{index:b,navnode:d.tabs.item(b),pannelnode:d.pannels.item(b)});a!==!1&&(b+d.colspan>d.pannels.size()&&(b=d.pannels.size()-d.colspan),i[d.effect](b),d.currentTab=b,d.highlightNav(d.getWrappedIndex(b)),d.fire("switch",{index:b,navnode:d.tabs.item(d.getWrappedIndex(b)),pannelnode:d.pannels.item(b)}),d.renderPannelTextarea(b))};a.isNumber(g)?setTimeout(function(){j()},g):j()},go:function(a,b){var c=this;return c.switch_to(a,b),this},play:function(){var a=this;return null!==a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){a.next().play()},Number(a.timeout)),this},stop:function(){var a=this;return clearTimeout(a.timer),a.timer=null,this}}),b},{requires:["node","json","event","gallery/slide/1.2/slide-util","gallery/slide/1.2/kissy2yui"]}),KISSY.add("gallery/slide/1.2/index",function(a,b){return b},{requires:["gallery/slide/1.2/base"]});